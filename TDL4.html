<!doctype html>
<html>
<head>
	<title>TDL4 Specification</title>
<style>
* {
	font-family: Calibri, Arial, sans-serif;
}

body {
	max-width: 1000px;
	margin: auto;
}

p {
	margin: 1em auto;
}

pre.code {
	white-space: pre-wrap;
	margin: 1em auto;
	font-family: Consolas, "Courier New", monospace;
}

code {
	font-family: Consolas, "Courier New", monospace;
}

table {
	border: #9cc2e5 1px solid;
	border-collapse: collapse;
	width: 100%;
	margin: 1em auto;
}

thead {
	border-bottom: #9cc2e5 3px solid;
}

td, th {
	padding-left: 2px;
	padding-right: 2px;
	border: #9cc2e5 1px solid;
	text-align: left;
	vertical-align: top;
}

h1, h2, h3, h4 {
	color: #3e7ebb;
	margin: 1em auto 0.3em;
}

div.hor-scroll {
	width : 100%;
	overflow-x: auto;
}

svg {
    background: rgba(0, 0, 0, 0.03);
    flex: 1;
}

svg.railroad-diagram path {
    stroke-width: 2;
    stroke: darkgray;
    fill: rgba(0, 0, 0, 0);
}

svg.railroad-diagram text {
    text-anchor: middle;
    fill: #404040;
}

svg.railroad-diagram g.terminal text {
    font-weight: bold;
}

svg.railroad-diagram g.non-terminal rect {
    stroke-width: 2;
    stroke: #404040;
    fill: rgba(255, 255, 255, 1);
}

svg.railroad-diagram g.terminal rect {
	stroke-width: 2;
    stroke: #404040;
    fill: rgba(0, 0, 0, 0.1);
}
</style>
</head>
<body>
<h1>Transform Definition Language</h1>
<p>Version 4 release 4.0, April 2024</p>

<h2>General Description</h2>
<p>Transform Definition Language version 4 (TDL4) is a declarative domain-specific language designed to describe ETL processes to perform with Data Cooker ETL tool. The strongest emphasis is on the Transformation phase.</p>
<p>Syntax of TDL4 is inspired by and based on SQL, but has substantial semantic differences due to Data Cooker's differences from traditional RDBMS. Instead of SQL tables that consist of column-based rows, Data Cooker operates with strongly typed collections of Record Objects called 'DS' (for Data Sets / Data Streams). Also, Transformation phase of ETL does not imply analytic workloads or complex data manipulation that traditional SQL facilities usually provide.</p>
<p>Another difference from SQL engines is that Data Cooker doesn't require global data catalog nor information schema. A rudimentary partial schema is defined ad hoc by language statements only if required by current context. It doesn't imply control over data types, nor integrity, neither consistency, neither enforces data constraints.</p>
<p>TDL4 allows high level manipulation over DSs as a whole, and intentionally omits features like aggregation, window functions, and anything that reduces several records of given DS to a single value. Only record-level expression evaluations for record attributes are provided by SELECT and similar statements. Those Expression Operators and Functions are implemented as Java classes and thus are extensible.</p>
<p>At the same time, Data Cooker's language interpreter also does provide built-in support for pluggable 'Operations' and 'Transforms' to allow more complex manipulations with DS written in Java. By implementing an Operation interface, developers are allowed to seamlessly integrate custom logic into ETL processes, including generation of new DS and changing data inside of them as they like. With Transforms, it is possible to change type of DS Record Objects.</p>
<p>Another level of extensibility is provided by 'Storage Adapters' layer of plug-ins that covers Extract and Load phases of ETL processing.</p>
<p>TDL4 does have specific type system, customized for DS that contain not only relatively flat Records, but also complex Spatial Objects with embedded geometry data, because Data Cooker's heritage begins from a geo-informatic processing toolchain.</p>

<h2>DS</h2>
<p>In terms of Data Cooker, a DS is a basic entity of every ETL process.</p>
<p>DS is a typed collection of Objects, that may have or not complex type-dependent internal structure, and/or a set of simple Attributes, accessible from the process by Names. Each Object together with an opaque Key form an elementary unit of processing, the Record.</p>
<p>DSs are partitioned — split into chunks called Partitions, to balance the load of executors because they process a single partition at each time. Number of Partitions in most cases must be set manually, but if not, it'll be defined by Input Adapter using intrinsic properties of data source and execution environment. Records are assigned to Partitions by hashcodes of its Keys. Correct definition of Keys is crucial to avoid 'data skew' (a situation when a small number of Partitions contain most of the records while all others are empty).</p>

<h3>DS Life Cycle</h3>
<p>According to definition of ETL, DSs can be created (once), transformed (many times), and stored (several times).</p>
<p>In Data Cooker, a DS can be created by several means from the external source of data or from other existing DSs.</p>

<h4>Create DS</h4>
<p><b>Create method #1.</b> Input Adapters extract data from the data source, which could be some object or file-based storage, a traditional database, or something else. Each Input Adapter supports creation of a single type of DS, but may support different data sources.</p>
<p>Initial Key of newly created Record is set by Input Adapter, then DS is partitioned using those initial keys. Rules for a concrete Input Adapter are documented by its developer.</p>
<p><b>Method #2.</b> A DS can be derived from one or many existing by performing an SQL-like SELECT query. Type and partitioning of a derived DS is inherited from parent DSs. See SELECT section of this manual for details.</p>
<p><b>Method #3</b> to create a DS is to call an Operation that generates new DS from existing ones using its own rules. There are some common patterns described below in the CALL section, but exact rules are documented by the developer of the Operation.</p>

<h4>Transform DS</h4>
<p>After DS is created, it may be <b>transformed</b> by Transforms, changing its Record type and/or Key, as well as number of partitions. Number of objects can also change if one source object corresponds to many resulting ones and vice versa. There can be performed as many consecutive Transforms on a given DS as needed. As Transforms are pluggable, transformation rules are documented by developer.</p>
<p>If Record Keys are changed by applying a Transform, affected Records may be assigned to other partitions.</p>

<h4>Store DS</h4>
<p>Final step of DS's life cycle is <b>storage</b> to some external data store, performed by Output Adapter. An Output Adapter may store different types of DSs into different formats. Rules, as usual, are documented by developer.</p>

<h2>Type System</h2>
<p>Differing from SQL, TDL4 data types are defined first on the level of DS as a whole for each Record Object, and then by level of Record Attributes and language constructs.</p>

<h3>DS Types</h3>
<p>Record Objects may have or not an internal structure, and if Record Object type does allow Attributes, each Attribute type is dynamically coalesced to match the context of expression that references it, if possible.</p>
<p>Supported types are:</p>
<ul>
	<li>General purpose:
<ul>
	<li><b>PlainText</b> — unstructured data. Each object is just array of bytes, treated in most cases as plain text in system encoding (most likely, UTF8). Does not have Attributes.</li>
	<li><b>Structured</b> data records map arbitrary property names to their respective values, or an array of values, where any property may be a map or array itself (even the topmost object). Treat this data type as generic JSON data. Record Attributes expose all properties for reading, but only top-level ones for writing.</li>
	<li><b>Passthru</b> is a special type that marks DS's type as 'unchanged during the transformation'.</li>
</ul>
	</li>
	<li>Column-based data:
		<ul>
<li><b>Columnar</b> — each object is a flat record that consists from a fixed number of directly named 'columns', fully accessible via Attributes.</li>
		</ul>
	</li>
	<li>Spatial / Geometric data:
<ul>
	<li><b>Point</b> — each object represents a Point on a map with optional radius, and a set of arbitrarily named properties accessible via Attributes.</li>
	<li><b>Track</b> — each object is a collection of regular Points (with 3rd-level Attributes), organized into Segments. Track and Segments also may have their own arbitrarily named properties (accessible via top-level and 2nd-level Attributes).</li>
	<li><b>Polygon</b> — each object represents a Polygon on a map, but without direct access to its vertices. Polygon may have holes. It may have a set of arbitrarily named properties too accessible via Attributes.</li>
</ul>
	</li>
</ul>

<h4>PlainText</h4>
<p>After loading a DS from unstructured text source, each line is represented as text in the system encoding (usually, UTF8), or byte array. Before performing meaningful transformations on the data contained in that set, it should be converted to another, structured type.</p>
<p>Vice versa, before saving structured DSs to text-based file formats, it should be converted to PlainText.</p>

<h4>Structured</h4>
<p>Each object of a Structured DS is backed by a JSON representation, so it can be as arbitrary as it fits within JSON limitations. Namely, String, Numeric, Boolean, an NULL properties are supported, as well as homogenous arrays (with every member of same type). Top level object may be an array itself.</p>
<p>Each top-level property is an Attribute itself (read-write), and nested properties' Attribute names are compound (read only). They may include array index or range part too.</p>

<h4>Passthru</h4>
<p>This type is not a data type per se, but just a marker reported from API calls to plugin Transforms that means it doesn't change data type in the set.</p>

<h4>Columnar</h4>
<p>Each object of DS of that type is a record consisting of uniquely named columns, enumerated in the specified order. After enumerated, they can be accessed via Attributes of same name.</p>
<p>Data in the column doesn't have an explicit type, nor it has any metadata except name. Columns, omitted from the record, have automatically assigned NULL values.</p>

<h4>Spatial DS Types</h4>
<p>Because Data Cooker inherited preceding project legacy which was a geo-informatics project, TDL4 natively supports geometry-specific Spatial data types implemented as extensions to JTS Topology Suite and GeoJSON.</p>

<h4>Point</h4>
<p>Objects of that type are abstractions of Points a map with an optional set of arbitrary Attributes.</p>
<p>Being an extension of JTS Point, each object has mandatory internal attributes of geographic 'latitude' and 'longitude'.</p>

<h4>Track</h4>
<p>Object of a Track is an abstraction of a route traveled by some physical object over the real-world map. It consists of Points, grouped together by an appointed 'tracking' Attribute, and sorted by another 'timestamp' Attribute, optionally cut into segments by 'segmentation' Attribute. If segmentation Attribute is not defined, there still be a single segment that includes all points of a track.</p>
<p>Each level of nested objects (Track, Segments, Points) may have an arbitrary number of other named Attributes.</p>

<h4>Polygon</h4>
<p>A region on a map, defined as a collection of a single external border outline and any number of internal cut-out outlines, with an arbitrary number of other named attributes.</p>
<p>There is no direct access to vertices of Polygon outlines, but there is an automatically computed Centroid Point, with radius set to its most distant border vertex.</p>

<h3>Attribute, Variable, and Parameter Types</h3>
<p>Outside DSs, there are also script-level Variables, and Expression- / Pluggable Entity-level Parameters, that may have their own types, more or less similar to SQL: Names, String, Numeric, Boolean, NULL, and Typed Arrays.</p>

<h4>Names</h4>
<p>Names are used to define and identify any entities that have to be referred to in the script, i.e. DSs, Attributes, Parameters, Variables, and so on.</p>
<p>Canonical representation of a Name is a string of Latin alphabet letters, numbers (any position except first), and underscores, or a string of any valid Unicode characters enclosed in double quotes. If name should contain a character of double quote itself, it must be doubled. If name clashes with a TDL4 keyword, it must be quoted.</p>
<p><b>ALL Names are case-sensitive.</b></p>
<p>Quoted representation of names provides automatic expression evaluation (see later in a dedicated paragraph).</p>
<p>Names could be joined by a dot to create compound names, used in SELECTs with JOINs.</p>
<p>Names of Variables are always explicitly identified by preceding 'dollar sign' <b>$</b> sigil. Names of Parameters are likewise preceded by 'commercial at' <b>@</b> sigil.</p>

<h4>String Literals</h4>
<p>String literals are fragments of arbitrary Unicode text enclosed in apostrophes. If a String should contain an apostrophe, it must be doubled.</p>
<p>String literals are always automatically evaluated (see later).</p>

<h4>Numerics</h4>
<p>There are different representations of immediate Numeric values allowed:</p>
<ul>
	<li>Equivalent of Java Double: <b>[s]99[.99][E[s]99][D]</b> or <b>[s].99[E[s]99][D]</b>.</li>
	<li>Equivalent of Java Long: <b>[s]99[L]</b>.</li>
	<li>'Unsigned long' for bit-masking operators: <b>0xHH</b>.</li>
</ul>
<p><b>99</b> here means a sequence of decimal numbers, <b>HH</b> for hexadecimal numbers, <b>s</b> is sign sigil (+ or -). Parts in square braces are optional, symbols <b>E</b>, <b>L</b>, <b>.</b> (dot) and <b>0x</b> are used as is.</p>

<h4>Boolean Type</h4>
<p>Literal <b>TRUE</b> is used for Boolean truth and literal <b>FALSE</b> for Boolean falseness.</p>

<h4>NULL</h4>
<p>Like in SQL, <b>NULL</b> is used for non-value.</p>
<p>Most of the expressions that include NULL evaluate to NULL, except ones that use truth table similar to OR operator, and some other specific cases (sse in the dedicated topic). As in SQL, no NULL is equal to another NULL.</p>
<p>A Variable or parameter that is not defined in the current context evaluates to NULL as well.</p>

<h4>Typed Arrays</h4>
<p>Names, String Literals, and Numerics can be collected into Arrays. Syntax for an array constructor is a simple list of values using comma, enclosed in square brackets. Optional keyword ARRAY may be used before the opening bracket.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1046" height="298" viewBox="0 0 1046 298"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M1006 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h32"></path><path d="M954 55h32"></path><g><path d="M92 55h0"></path><path d="M218 55h0"></path><path d="M92 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M112 20h86"></path></g><path d="M198 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M92 55h20"></path><g class="terminal"><path d="M112 55h0"></path><path d="M198 55h0"></path><rect x="112" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="155" y="59">ARRAY</text></g><path d="M198 55h20"></path></g><path d="M218 55h10"></path><g class="terminal"><path d="M228 55h0"></path><path d="M370 55h0"></path><rect x="228" y="44" width="142" height="22" rx="0" ry="0"></rect><text x="299" y="59">[</text></g><path d="M370 55h10"></path><path d="M380 55h10"></path><g class="terminal"><path d="M390 55h0"></path><path d="M484 55h0"></path><rect x="390" y="44" width="94" height="22" rx="0" ry="0"></rect><text x="437" y="59">String</text></g><path d="M484 55h10"></path><g><path d="M494 55h0"></path><path d="M794 55h0"></path><path d="M494 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M514 20h260"></path></g><path d="M774 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M494 55h20"></path><g><path d="M514 55h0"></path><path d="M774 55h0"></path><path d="M514 55h10"></path><g><path d="M524 55h0"></path><path d="M764 55h0"></path><path d="M524 55h20"></path><g><path d="M544 55h0"></path><path d="M744 55h0"></path><g class="terminal"><path d="M544 55h0"></path><path d="M630 55h0"></path><rect x="544" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="587" y="59">,</text></g><path d="M630 55h10"></path><path d="M640 55h10"></path><g class="terminal"><path d="M650 55h0"></path><path d="M744 55h0"></path><rect x="650" y="44" width="94" height="22" rx="0" ry="0"></rect><text x="697" y="59">String</text></g></g><path d="M744 55h20"></path></g><path d="M764 55h10"></path><path d="M524 55a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M524 90h240"></path></g><path d="M764 90a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M774 55h20"></path></g><path d="M794 55h10"></path><g class="terminal"><path d="M804 55h0"></path><path d="M954 55h0"></path><rect x="804" y="44" width="150" height="22" rx="0" ry="0"></rect><text x="879" y="59">]</text></g></g><path d="M986 55h20"></path><path d="M40 55a10 10 0 0 1 10 10v74a10 10 0 0 0 10 10"></path><g><path d="M60 149h24"></path><path d="M962 149h24"></path><g><path d="M84 149h0"></path><path d="M210 149h0"></path><path d="M84 149a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M104 114h86"></path></g><path d="M190 114a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M84 149h20"></path><g class="terminal"><path d="M104 149h0"></path><path d="M190 149h0"></path><rect x="104" y="138" width="86" height="22" rx="0" ry="0"></rect><text x="147" y="153">ARRAY</text></g><path d="M190 149h20"></path></g><path d="M210 149h10"></path><g class="terminal"><path d="M220 149h0"></path><path d="M362 149h0"></path><rect x="220" y="138" width="142" height="22" rx="0" ry="0"></rect><text x="291" y="153">[</text></g><path d="M362 149h10"></path><path d="M372 149h10"></path><g class="terminal"><path d="M382 149h0"></path><path d="M484 149h0"></path><rect x="382" y="138" width="102" height="22" rx="0" ry="0"></rect><text x="433" y="153">Numeric</text></g><path d="M484 149h10"></path><g><path d="M494 149h0"></path><path d="M802 149h0"></path><path d="M494 149a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M514 114h268"></path></g><path d="M782 114a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M494 149h20"></path><g><path d="M514 149h0"></path><path d="M782 149h0"></path><path d="M514 149h10"></path><g><path d="M524 149h0"></path><path d="M772 149h0"></path><path d="M524 149h20"></path><g><path d="M544 149h0"></path><path d="M752 149h0"></path><g class="terminal"><path d="M544 149h0"></path><path d="M630 149h0"></path><rect x="544" y="138" width="86" height="22" rx="0" ry="0"></rect><text x="587" y="153">,</text></g><path d="M630 149h10"></path><path d="M640 149h10"></path><g class="terminal"><path d="M650 149h0"></path><path d="M752 149h0"></path><rect x="650" y="138" width="102" height="22" rx="0" ry="0"></rect><text x="701" y="153">Numeric</text></g></g><path d="M752 149h20"></path></g><path d="M772 149h10"></path><path d="M524 149a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M524 184h248"></path></g><path d="M772 184a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M782 149h20"></path></g><path d="M802 149h10"></path><g class="terminal"><path d="M812 149h0"></path><path d="M962 149h0"></path><rect x="812" y="138" width="150" height="22" rx="0" ry="0"></rect><text x="887" y="153">]</text></g></g><path d="M986 149a10 10 0 0 0 10 -10v-74a10 10 0 0 1 10 -10"></path><path d="M40 55a10 10 0 0 1 10 10v168a10 10 0 0 0 10 10"></path><g><path d="M60 243h0"></path><path d="M986 243h0"></path><g><path d="M60 243h0"></path><path d="M186 243h0"></path><path d="M60 243a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M80 208h86"></path></g><path d="M166 208a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M60 243h20"></path><g class="terminal"><path d="M80 243h0"></path><path d="M166 243h0"></path><rect x="80" y="232" width="86" height="22" rx="0" ry="0"></rect><text x="123" y="247">ARRAY</text></g><path d="M166 243h20"></path></g><path d="M186 243h10"></path><g class="terminal"><path d="M196 243h0"></path><path d="M338 243h0"></path><rect x="196" y="232" width="142" height="22" rx="0" ry="0"></rect><text x="267" y="247">[</text></g><path d="M338 243h10"></path><path d="M348 243h10"></path><g class="terminal"><path d="M358 243h0"></path><path d="M484 243h0"></path><rect x="358" y="232" width="126" height="22" rx="0" ry="0"></rect><text x="421" y="247">Name</text></g><path d="M484 243h10"></path><g><path d="M494 243h0"></path><path d="M826 243h0"></path><path d="M494 243a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M514 208h292"></path></g><path d="M806 208a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M494 243h20"></path><g><path d="M514 243h0"></path><path d="M806 243h0"></path><path d="M514 243h10"></path><g><path d="M524 243h0"></path><path d="M796 243h0"></path><path d="M524 243h20"></path><g><path d="M544 243h0"></path><path d="M776 243h0"></path><g class="terminal"><path d="M544 243h0"></path><path d="M630 243h0"></path><rect x="544" y="232" width="86" height="22" rx="0" ry="0"></rect><text x="587" y="247">,</text></g><path d="M630 243h10"></path><path d="M640 243h10"></path><g class="terminal"><path d="M650 243h0"></path><path d="M776 243h0"></path><rect x="650" y="232" width="126" height="22" rx="0" ry="0"></rect><text x="713" y="247">Name</text></g></g><path d="M776 243h20"></path></g><path d="M796 243h10"></path><path d="M524 243a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M524 278h272"></path></g><path d="M796 278a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M806 243h20"></path></g><path d="M826 243h10"></path><g class="terminal"><path d="M836 243h0"></path><path d="M986 243h0"></path><rect x="836" y="232" width="150" height="22" rx="0" ry="0"></rect><text x="911" y="247">]</text></g></g><path d="M986 243a10 10 0 0 0 10 -10v-168a10 10 0 0 1 10 -10"></path></g><path d="M 1006 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>All values in the array must be of same type as the first one, otherwise Data Cooker will throw an error and halt script execution.</p>

<p>For Numeric Arrays that consist of Long values over some continuous range, there is a special syntax:</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="878.5" height="62" viewBox="0 0 878.5 62" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 21v20m0 -10h20"></path></g><g><path d="M40 31h0"></path><path d="M838.5 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><g><path d="M60 31h10"></path><path d="M808.5 31h10"></path><g class="terminal "><path d="M70 31h0"></path><path d="M149.5 31h0"></path><rect x="70" y="20" width="79.5" height="22"></rect><text x="109.75" y="35">RANGE</text></g><path d="M149.5 31h10"></path><path d="M159.5 31h10"></path><g class="terminal "><path d="M169.5 31h0"></path><path d="M308.5 31h0"></path><rect x="169.5" y="20" width="139" height="22"></rect><text x="239" y="35">[</text></g><path d="M308.5 31h10"></path><path d="M318.5 31h10"></path><g class="terminal "><path d="M328.5 31h0"></path><path d="M425 31h0"></path><rect x="328.5" y="20" width="96.5" height="22"></rect><text x="376.75" y="35">Numeric</text></g><path d="M425 31h10"></path><path d="M435 31h10"></path><g class="terminal "><path d="M445 31h0"></path><path d="M524.5 31h0"></path><rect x="445" y="20" width="79.5" height="22"></rect><text x="484.75" y="35">,</text></g><path d="M524.5 31h10"></path><path d="M534.5 31h10"></path><g class="terminal "><path d="M544.5 31h0"></path><path d="M641 31h0"></path><rect x="544.5" y="20" width="96.5" height="22"></rect><text x="592.75" y="35">Numeric</text></g><path d="M641 31h10"></path><path d="M651 31h10"></path><g class="terminal "><path d="M661 31h0"></path><path d="M808.5 31h0"></path><rect x="661" y="20" width="147.5" height="22"></rect><text x="734.75" y="35">]</text></g></g><path d="M818.5 31h0"></path></g><path d="M818.5 31h20"></path></g><path d="M 838.5 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Ranges may be ascending or descending and include both boundaries. For example, <code>RANGE[1,-1]</code> is equivalent of <code>ARRAY[1,0,-1]</code>.</p>

<p>Arrays may be used in LOOP control structures, IN operator, to pass collections to CALL parameters, and in other contexts.</p>

<h3>Custom Object Types</h3>
<p>Some Operations and even Expression Functions define their own specific subtypes of data types that they interpret with their own set of rules. Those types are referred to as 'Something-like Objects'.</p>
<p>For example, standard date/time manipulation functions operate with DateTime-like Objects, which are represented by Long Epoch seconds or milliseconds, or String formatted as a ISO8601-alike timestamp.</p>
<p>Another example, some spatial Operations may extend existing Point Record type with custom 'radius' attribute measured in meters, that makes them POI-like Objects (for Points of Interest).</p>

<h2>Script Structure</h2>

<h3>Top-level Structure</h3>
<p>TDL4 script is a sequence of any number of statements, each ending with a mandatory semicolon.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="484" height="110" viewBox="0 0 484 110"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M444 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M424 55h0"></path><g><path d="M60 55h0"></path><path d="M360 55h0"></path><path d="M60 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M80 20h260"></path></g><path d="M340 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M60 55h20"></path><g><path d="M80 55h0"></path><path d="M340 55h0"></path><path d="M80 55h10"></path><g><path d="M90 55h0"></path><path d="M330 55h0"></path><path d="M90 55h20"></path><g><path d="M110 55h0"></path><path d="M310 55h0"></path><g class="non-terminal"><path d="M110 55h0"></path><path d="M212 55h0"></path><rect x="110" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="161" y="59">statement</text></g><path d="M212 55h10"></path><path d="M222 55h10"></path><g class="terminal"><path d="M232 55h0"></path><path d="M310 55h0"></path><rect x="232" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="271" y="59">;</text></g></g><path d="M310 55h20"></path></g><path d="M330 55h10"></path><path d="M90 55a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M90 90h240"></path></g><path d="M330 90a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M340 55h20"></path></g><path d="M360 55h10"></path><g class="terminal"><path d="M370 55h0"></path><path d="M424 55h0"></path><rect x="370" y="44" width="54" height="22" rx="0" ry="0"></rect><text x="397" y="59">EOF</text></g></g><path d="M424 55h20"></path></g><path d="M 444 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Each simple language statement is executed in current execution context, starting with top-level, while compound statements run nested statements in their own nested context. List of language statements is as of follows:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="262" height="476" viewBox="0 0 262 476"><g transform="translate(.5 .5)"><path d="M 20 21 v 20 m 0 -10 h 20.5"></path><g><path d="M40 31h0"></path><path d="M222 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h12"></path><path d="M190 31h12"></path><g class="non-terminal"><path d="M72 31h0"></path><path d="M190 31h0"></path><rect x="72" y="20" width="118" height="22" rx="8" ry="8"></rect><text x="131" y="35">create_stmt</text></g></g><path d="M202 31h20"></path><path d="M40 31a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M60 77h0"></path><path d="M202 77h0"></path><g class="non-terminal"><path d="M60 77h0"></path><path d="M202 77h0"></path><rect x="60" y="66" width="142" height="22" rx="8" ry="8"></rect><text x="131" y="81">transform_stmt</text></g></g><path d="M202 77a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v72a10 10 0 0 0 10 10"></path><g><path d="M60 123h20"></path><path d="M182 123h20"></path><g class="non-terminal"><path d="M80 123h0"></path><path d="M182 123h0"></path><rect x="80" y="112" width="102" height="22" rx="8" ry="8"></rect><text x="131" y="127">copy_stmt</text></g></g><path d="M202 123a10 10 0 0 0 10 -10v-72a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v118a10 10 0 0 0 10 10"></path><g><path d="M60 169h24"></path><path d="M178 169h24"></path><g class="non-terminal"><path d="M84 169h0"></path><path d="M178 169h0"></path><rect x="84" y="158" width="94" height="22" rx="8" ry="8"></rect><text x="131" y="173">let_stmt</text></g></g><path d="M202 169a10 10 0 0 0 10 -10v-118a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v164a10 10 0 0 0 10 10"></path><g><path d="M60 215h20"></path><path d="M182 215h20"></path><g class="non-terminal"><path d="M80 215h0"></path><path d="M182 215h0"></path><rect x="80" y="204" width="102" height="22" rx="8" ry="8"></rect><text x="131" y="219">loop_stmt</text></g></g><path d="M202 215a10 10 0 0 0 10 -10v-164a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v210a10 10 0 0 0 10 10"></path><g><path d="M60 261h28"></path><path d="M174 261h28"></path><g class="non-terminal"><path d="M88 261h0"></path><path d="M174 261h0"></path><rect x="88" y="250" width="86" height="22" rx="8" ry="8"></rect><text x="131" y="265">if_stmt</text></g></g><path d="M202 261a10 10 0 0 0 10 -10v-210a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v256a10 10 0 0 0 10 10"></path><g><path d="M60 307h12"></path><path d="M190 307h12"></path><g class="non-terminal"><path d="M72 307h0"></path><path d="M190 307h0"></path><rect x="72" y="296" width="118" height="22" rx="8" ry="8"></rect><text x="131" y="311">select_stmt</text></g></g><path d="M202 307a10 10 0 0 0 10 -10v-256a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v302a10 10 0 0 0 10 10"></path><g><path d="M60 353h20"></path><path d="M182 353h20"></path><g class="non-terminal"><path d="M80 353h0"></path><path d="M182 353h0"></path><rect x="80" y="342" width="102" height="22" rx="8" ry="8"></rect><text x="131" y="357">call_stmt</text></g></g><path d="M202 353a10 10 0 0 0 10 -10v-302a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v348a10 10 0 0 0 10 10"></path><g><path d="M60 399h8"></path><path d="M194 399h8"></path><g class="non-terminal"><path d="M68 399h0"></path><path d="M194 399h0"></path><rect x="68" y="388" width="126" height="22" rx="8" ry="8"></rect><text x="131" y="403">analyze_stmt</text></g></g><path d="M202 399a10 10 0 0 0 10 -10v-348a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v394a10 10 0 0 0 10 10"></path><g><path d="M60 445h8"></path><path d="M194 445h8"></path><g class="non-terminal"><path d="M68 445h0"></path><path d="M194 445h0"></path><rect x="68" y="434" width="126" height="22" rx="8" ry="8"></rect><text x="131" y="449">options_stmt</text></g></g><path d="M202 445a10 10 0 0 0 10 -10v-394a10 10 0 0 1 10 -10"></path></g><path d="M 222 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Whitespace and tabulation characters are ignored and may be freely used for means of readability. Script may be empty, there is no error.</p>

<h3>Expressions</h3>
<p>Expressions can be evaluated in two distinct contexts. First is 'Loose Expression' that can refer to any script-level entities. Another one is 'Record-level Expression' which can also refer to Record Attributes by their Names.</p>
<table>
	<tr><td>Loose Expression context</td><td>Record-level Expression context</td></tr>
	<tr><td><svg class="railroad-diagram" width="350.5" height="610" viewBox="0 0 350.5 610" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g transform="translate(.5 .5)"><g><path d="M20 21v20m0 -10h20"></path></g><g><path d="M40 31h0"></path><path d="M310.5 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><g><path d="M60 31h10"></path><path d="M280.5 31h10"></path><g><path d="M70 31h0"></path><path d="M280.5 31h0"></path><path d="M70 31h10"></path><g><path d="M80 31h0"></path><path d="M270.5 31h0"></path><path d="M80 31h20"></path><g><path d="M100 31h34"></path><g><path d="M134 31h10"></path><path d="M206.5 31h10"></path><g class="non-terminal "><path d="M144 31h0"></path><path d="M206.5 31h0"></path><rect x="144" y="20" width="62.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="35">is_op</text></g></g><path d="M216.5 31h34"></path></g><path d="M250.5 31h20"></path><path d="M80 31a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M100 69h12.75"></path><g><path d="M112.75 69h10"></path><path d="M227.75 69h10"></path><g class="non-terminal "><path d="M122.75 69h0"></path><path d="M227.75 69h0"></path><rect x="122.75" y="58" width="105" height="22" rx="10" ry="10"></rect><text x="175.25" y="73">between_op</text></g></g><path d="M237.75 69h12.75"></path></g><path d="M250.5 69a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v56a10 10 0 0 0 10 10"></path><g><path d="M100 107h34"></path><g><path d="M134 107h10"></path><path d="M206.5 107h10"></path><g class="non-terminal "><path d="M144 107h0"></path><path d="M206.5 107h0"></path><rect x="144" y="96" width="62.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="111">in_op</text></g></g><path d="M216.5 107h34"></path></g><path d="M250.5 107a10 10 0 0 0 10 -10v-56a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v94a10 10 0 0 0 10 10"></path><g><path d="M100 145h0"></path><g><path d="M100 145h10"></path><path d="M240.5 145h10"></path><g class="non-terminal "><path d="M110 145h0"></path><path d="M240.5 145h0"></path><rect x="110" y="134" width="130.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="149">comparison_op</text></g></g><path d="M250.5 145h0"></path></g><path d="M250.5 145a10 10 0 0 0 10 -10v-94a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v132a10 10 0 0 0 10 10"></path><g><path d="M100 183h21.25"></path><g><path d="M121.25 183h10"></path><path d="M219.25 183h10"></path><g class="non-terminal "><path d="M131.25 183h0"></path><path d="M219.25 183h0"></path><rect x="131.25" y="172" width="88" height="22" rx="10" ry="10"></rect><text x="175.25" y="187">var_name</text></g></g><path d="M229.25 183h21.25"></path></g><path d="M250.5 183a10 10 0 0 0 10 -10v-132a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v170a10 10 0 0 0 10 10"></path><g><path d="M100 221h17"></path><g><path d="M117 221h10"></path><path d="M223.5 221h10"></path><g class="terminal "><path d="M127 221h0"></path><path d="M223.5 221h0"></path><rect x="127" y="210" width="96.5" height="22"></rect><text x="175.25" y="225">Numeric</text></g></g><path d="M233.5 221h17"></path></g><path d="M250.5 221a10 10 0 0 0 10 -10v-170a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v208a10 10 0 0 0 10 10"></path><g><path d="M100 259h21.25"></path><g><path d="M121.25 259h10"></path><path d="M219.25 259h10"></path><g class="terminal "><path d="M131.25 259h0"></path><path d="M219.25 259h0"></path><rect x="131.25" y="248" width="88" height="22"></rect><text x="175.25" y="263">String</text></g></g><path d="M229.25 259h21.25"></path></g><path d="M250.5 259a10 10 0 0 0 10 -10v-208a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v246a10 10 0 0 0 10 10"></path><g><path d="M100 297h29.75"></path><g><path d="M129.75 297h10"></path><path d="M210.75 297h10"></path><g class="terminal "><path d="M139.75 297h0"></path><path d="M210.75 297h0"></path><rect x="139.75" y="286" width="71" height="22"></rect><text x="175.25" y="301">NULL</text></g></g><path d="M220.75 297h29.75"></path></g><path d="M250.5 297a10 10 0 0 0 10 -10v-246a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v284a10 10 0 0 0 10 10"></path><g><path d="M100 335h29.75"></path><g><path d="M129.75 335h10"></path><path d="M210.75 335h10"></path><g class="terminal "><path d="M139.75 335h0"></path><path d="M210.75 335h0"></path><rect x="139.75" y="324" width="71" height="22"></rect><text x="175.25" y="339">TRUE</text></g></g><path d="M220.75 335h29.75"></path></g><path d="M250.5 335a10 10 0 0 0 10 -10v-284a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v322a10 10 0 0 0 10 10"></path><g><path d="M100 373h25.5"></path><g><path d="M125.5 373h10"></path><path d="M215 373h10"></path><g class="terminal "><path d="M135.5 373h0"></path><path d="M215 373h0"></path><rect x="135.5" y="362" width="79.5" height="22"></rect><text x="175.25" y="377">FALSE</text></g></g><path d="M225 373h25.5"></path></g><path d="M250.5 373a10 10 0 0 0 10 -10v-322a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v360a10 10 0 0 0 10 10"></path><g><path d="M100 411h0"></path><g><path d="M100 411h10"></path><path d="M240.5 411h10"></path><g class="non-terminal "><path d="M110 411h0"></path><path d="M240.5 411h0"></path><rect x="110" y="400" width="130.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="415">expression_op</text></g></g><path d="M250.5 411h0"></path></g><path d="M250.5 411a10 10 0 0 0 10 -10v-360a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v398a10 10 0 0 0 10 10"></path><g><path d="M100 449h17"></path><g><path d="M117 449h10"></path><path d="M223.5 449h10"></path><g class="non-terminal "><path d="M127 449h0"></path><path d="M223.5 449h0"></path><rect x="127" y="438" width="96.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="453">digest_op</text></g></g><path d="M233.5 449h17"></path></g><path d="M250.5 449a10 10 0 0 0 10 -10v-398a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v436a10 10 0 0 0 10 10"></path><g><path d="M100 487h25.5"></path><g><path d="M125.5 487h10"></path><path d="M215 487h10"></path><g class="non-terminal "><path d="M135.5 487h0"></path><path d="M215 487h0"></path><rect x="135.5" y="476" width="79.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="491">bool_op</text></g></g><path d="M225 487h25.5"></path></g><path d="M250.5 487a10 10 0 0 0 10 -10v-436a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v474a10 10 0 0 0 10 10"></path><g><path d="M100 525h12.75"></path><g><path d="M112.75 525h10"></path><path d="M227.75 525h10"></path><g class="non-terminal "><path d="M122.75 525h0"></path><path d="M227.75 525h0"></path><rect x="122.75" y="514" width="105" height="22" rx="10" ry="10"></rect><text x="175.25" y="529">default_op</text></g></g><path d="M237.75 525h12.75"></path></g><path d="M250.5 525a10 10 0 0 0 10 -10v-474a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v512a10 10 0 0 0 10 10"></path><g><path d="M100 563h17"></path><g><path d="M117 563h10"></path><path d="M223.5 563h10"></path><g class="non-terminal "><path d="M127 563h0"></path><path d="M223.5 563h0"></path><rect x="127" y="552" width="96.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="567">func_call</text></g></g><path d="M233.5 563h17"></path></g><path d="M250.5 563a10 10 0 0 0 10 -10v-512a10 10 0 0 1 10 -10"></path></g><path d="M270.5 31h10"></path><path d="M80 31a10 10 0 0 0 -10 10v539a10 10 0 0 0 10 10"></path><g><path d="M80 590h190.5"></path></g><path d="M270.5 590a10 10 0 0 0 10 -10v-539a10 10 0 0 0 -10 -10"></path></g></g><path d="M290.5 31h0"></path></g><path d="M290.5 31h20"></path></g><path d="M 310.5 31 h 20 m 0 -10 v 20"></path></g></svg></td><td><svg class="railroad-diagram" width="350.5" height="648" viewBox="0 0 350.5 648" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g transform="translate(.5 .5)"><g><path d="M20 21v20m0 -10h20"></path></g><g><path d="M40 31h0"></path><path d="M310.5 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><g><path d="M60 31h10"></path><path d="M280.5 31h10"></path><g><path d="M70 31h0"></path><path d="M280.5 31h0"></path><path d="M70 31h10"></path><g><path d="M80 31h0"></path><path d="M270.5 31h0"></path><path d="M80 31h20"></path><g><path d="M100 31h34"></path><g><path d="M134 31h10"></path><path d="M206.5 31h10"></path><g class="non-terminal "><path d="M144 31h0"></path><path d="M206.5 31h0"></path><rect x="144" y="20" width="62.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="35">is_op</text></g></g><path d="M216.5 31h34"></path></g><path d="M250.5 31h20"></path><path d="M80 31a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M100 69h12.75"></path><g><path d="M112.75 69h10"></path><path d="M227.75 69h10"></path><g class="non-terminal "><path d="M122.75 69h0"></path><path d="M227.75 69h0"></path><rect x="122.75" y="58" width="105" height="22" rx="10" ry="10"></rect><text x="175.25" y="73">between_op</text></g></g><path d="M237.75 69h12.75"></path></g><path d="M250.5 69a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v56a10 10 0 0 0 10 10"></path><g><path d="M100 107h34"></path><g><path d="M134 107h10"></path><path d="M206.5 107h10"></path><g class="non-terminal "><path d="M144 107h0"></path><path d="M206.5 107h0"></path><rect x="144" y="96" width="62.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="111">in_op</text></g></g><path d="M216.5 107h34"></path></g><path d="M250.5 107a10 10 0 0 0 10 -10v-56a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v94a10 10 0 0 0 10 10"></path><g><path d="M100 145h0"></path><g><path d="M100 145h10"></path><path d="M240.5 145h10"></path><g class="non-terminal "><path d="M110 145h0"></path><path d="M240.5 145h0"></path><rect x="110" y="134" width="130.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="149">comparison_op</text></g></g><path d="M250.5 145h0"></path></g><path d="M250.5 145a10 10 0 0 0 10 -10v-94a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v132a10 10 0 0 0 10 10"></path><g><path d="M100 183h21.25"></path><g><path d="M121.25 183h10"></path><path d="M219.25 183h10"></path><g class="non-terminal "><path d="M131.25 183h0"></path><path d="M219.25 183h0"></path><rect x="131.25" y="172" width="88" height="22" rx="10" ry="10"></rect><text x="175.25" y="187">var_name</text></g></g><path d="M229.25 183h21.25"></path></g><path d="M250.5 183a10 10 0 0 0 10 -10v-132a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v170a10 10 0 0 0 10 10"></path><g><path d="M100 221h17"></path><g><path d="M117 221h10"></path><path d="M223.5 221h10"></path><g class="terminal "><path d="M127 221h0"></path><path d="M223.5 221h0"></path><rect x="127" y="210" width="96.5" height="22"></rect><text x="175.25" y="225">Numeric</text></g></g><path d="M233.5 221h17"></path></g><path d="M250.5 221a10 10 0 0 0 10 -10v-170a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v208a10 10 0 0 0 10 10"></path><g><path d="M100 259h21.25"></path><g><path d="M121.25 259h10"></path><path d="M219.25 259h10"></path><g class="terminal "><path d="M131.25 259h0"></path><path d="M219.25 259h0"></path><rect x="131.25" y="248" width="88" height="22"></rect><text x="175.25" y="263">String</text></g></g><path d="M229.25 259h21.25"></path></g><path d="M250.5 259a10 10 0 0 0 10 -10v-208a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v246a10 10 0 0 0 10 10"></path><g><path d="M100 297h29.75"></path><g><path d="M129.75 297h10"></path><path d="M210.75 297h10"></path><g class="terminal "><path d="M139.75 297h0"></path><path d="M210.75 297h0"></path><rect x="139.75" y="286" width="71" height="22"></rect><text x="175.25" y="301">NULL</text></g></g><path d="M220.75 297h29.75"></path></g><path d="M250.5 297a10 10 0 0 0 10 -10v-246a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v284a10 10 0 0 0 10 10"></path><g><path d="M100 335h29.75"></path><g><path d="M129.75 335h10"></path><path d="M210.75 335h10"></path><g class="terminal "><path d="M139.75 335h0"></path><path d="M210.75 335h0"></path><rect x="139.75" y="324" width="71" height="22"></rect><text x="175.25" y="339">TRUE</text></g></g><path d="M220.75 335h29.75"></path></g><path d="M250.5 335a10 10 0 0 0 10 -10v-284a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v322a10 10 0 0 0 10 10"></path><g><path d="M100 373h25.5"></path><g><path d="M125.5 373h10"></path><path d="M215 373h10"></path><g class="terminal "><path d="M135.5 373h0"></path><path d="M215 373h0"></path><rect x="135.5" y="362" width="79.5" height="22"></rect><text x="175.25" y="377">FALSE</text></g></g><path d="M225 373h25.5"></path></g><path d="M250.5 373a10 10 0 0 0 10 -10v-322a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v360a10 10 0 0 0 10 10"></path><g><path d="M100 411h0"></path><g><path d="M100 411h10"></path><path d="M240.5 411h10"></path><g class="non-terminal "><path d="M110 411h0"></path><path d="M240.5 411h0"></path><rect x="110" y="400" width="130.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="415">expression_op</text></g></g><path d="M250.5 411h0"></path></g><path d="M250.5 411a10 10 0 0 0 10 -10v-360a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v398a10 10 0 0 0 10 10"></path><g><path d="M100 449h17"></path><g><path d="M117 449h10"></path><path d="M223.5 449h10"></path><g class="non-terminal "><path d="M127 449h0"></path><path d="M223.5 449h0"></path><rect x="127" y="438" width="96.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="453">digest_op</text></g></g><path d="M233.5 449h17"></path></g><path d="M250.5 449a10 10 0 0 0 10 -10v-398a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v436a10 10 0 0 0 10 10"></path><g><path d="M100 487h25.5"></path><g><path d="M125.5 487h10"></path><path d="M215 487h10"></path><g class="non-terminal "><path d="M135.5 487h0"></path><path d="M215 487h0"></path><rect x="135.5" y="476" width="79.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="491">bool_op</text></g></g><path d="M225 487h25.5"></path></g><path d="M250.5 487a10 10 0 0 0 10 -10v-436a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v474a10 10 0 0 0 10 10"></path><g><path d="M100 525h12.75"></path><g><path d="M112.75 525h10"></path><path d="M227.75 525h10"></path><g class="non-terminal "><path d="M122.75 525h0"></path><path d="M227.75 525h0"></path><rect x="122.75" y="514" width="105" height="22" rx="10" ry="10"></rect><text x="175.25" y="529">default_op</text></g></g><path d="M237.75 525h12.75"></path></g><path d="M250.5 525a10 10 0 0 0 10 -10v-474a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v512a10 10 0 0 0 10 10"></path><g><path d="M100 563h17"></path><g><path d="M117 563h10"></path><path d="M223.5 563h10"></path><g class="non-terminal "><path d="M127 563h0"></path><path d="M223.5 563h0"></path><rect x="127" y="552" width="96.5" height="22" rx="10" ry="10"></rect><text x="175.25" y="567">func_attr</text></g></g><path d="M233.5 563h17"></path></g><path d="M250.5 563a10 10 0 0 0 10 -10v-512a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v550a10 10 0 0 0 10 10"></path><g><path d="M100 601h38.25"></path><g><path d="M138.25 601h10"></path><path d="M202.25 601h10"></path><g class="non-terminal "><path d="M148.25 601h0"></path><path d="M202.25 601h0"></path><rect x="148.25" y="590" width="54" height="22" rx="10" ry="10"></rect><text x="175.25" y="605">attr</text></g></g><path d="M212.25 601h38.25"></path></g><path d="M250.5 601a10 10 0 0 0 10 -10v-550a10 10 0 0 1 10 -10"></path></g><path d="M270.5 31h10"></path><path d="M80 31a10 10 0 0 0 -10 10v577a10 10 0 0 0 10 10"></path><g><path d="M80 628h190.5"></path></g><path d="M270.5 628a10 10 0 0 0 10 -10v-577a10 10 0 0 0 -10 -10"></path></g></g><path d="M290.5 31h0"></path></g><path d="M290.5 31h20"></path></g><path d="M 310.5 31 h 20 m 0 -10 v 20"></path></g></svg></td></tr>
</table>
<p>Record-level evaluation rules take place only where it makes sense.</p>

<h4>Automatic Evaluation in Strings and Names</h4>
<p>There is automatic expression evaluation performed inside quoted Names and String literals. Any text between curly braces <b>{</b> and <b>}</b> inside quoted Name or String is evaluated as an expression, and result is substituted as a substring in-place.</p>
<p>To turn off automatic evaluation, opening brace should be prepended by a backslash <b>\</b>.</p>

<h4>Expression Operators</h4>
<p>There are three SQL-specific 'peculiar' Operators implemented right by TDL4 interpreter: IN, IS, and BETWEEN.</p>
<table>
	<thead>
	<tr><th>Symbol<br>(Variants)</th><th>Priority</th><th>Associativity</th><th># of Operands</th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>Operand [NOT] IN ARRAY[]<br>Operand [NOT] IN $array_var<br>Operand [NOT] IN array_attr</td><td>35</td><td>Right</td><td>2</td><td>TRUE if left operand is present in the right, casted to Array, FALSE otherwise. Vice versa for NOT variant</td></tr>
	<tr><td>Operand IS [NOT] NULL</td><td>35</td><td>Right</td><td>1</td><td>TRUE if left operand is NULL, FALSE otherwise. Vice versa for NOT variant</td></tr>
	<tr><td><nobr>Operand [NOT] BETWEEN Min AND Max</nobr></td><td>35</td><td>Right</td><td>3</td><td>TRUE if left operand is inclusively between Min and Max operands, casted to Numerics, FALSE otherwise. For NOT variant, TRUE if it is outside the range, excluding boundaries</td></tr>
	</tbody>
</table>
<p>All other Operators that can be used in Expressions are modeled after Java operators, implemented elsewhere in the classpath, and their list is extensible / dependent of distribution.</p>
<p>If an Operator requires operands of concrete data type, they will be directly cast or stringified-then-parsed to that type. If cast or parsing is impossible, Data Cooker throws an error and halts script execution.</p>
<p>Operators with higher priority are evaluated before lower priority operators. In case of same priority, evaluation is left to right except if Operator is right-associative. For expression grouping and changing of priority, parentheses can be used.</p>
<p>Most Operators result in NULL if any of their operands are NULL, but some do handle NULLs in a specific way.</p>
<p>For exact list of available Operators, their Priority, Associativity, and NULL handling, look into automatically generated distro docs.</p>

<h4>Expression Functions</h4>
<p>A function call has the following syntax:</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="902" height="132" viewBox="0 0 902 132" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g transform="translate(.5 .5)"><g><path d="M20 37v20m0 -10h20"></path></g><g><path d="M40 47h0"></path><path d="M862 47h0"></path><path d="M40 47h20"></path><g><path d="M60 47h0"></path><g><path d="M60 47h10"></path><path d="M832 47h10"></path><g class="non-terminal "><path d="M70 47h0"></path><path d="M124 47h0"></path><rect x="70" y="36" width="54" height="22" rx="10" ry="10"></rect><text x="97" y="51">func</text></g><path d="M124 47h10"></path><path d="M134 47h10"></path><g class="terminal "><path d="M144 47h0"></path><path d="M249 47h0"></path><rect x="144" y="36" width="105" height="22"></rect><text x="196.5" y="51">(</text></g><path d="M249 47h10"></path><path d="M259 47h10"></path><g class="non-terminal "><path d="M269 47h0"></path><path d="M374 47h0"></path><rect x="269" y="36" width="105" height="22" rx="10" ry="10"></rect><text x="321.5" y="51">expression</text></g><path d="M374 47h10"></path><g><path d="M384 47h0"></path><path d="M708.5 47h0"></path><path d="M384 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M404 20h284.5"></path></g><path d="M688.5 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M384 47h20"></path><g><path d="M404 47h0"></path><path d="M688.5 47h0"></path><path d="M404 47h10"></path><g><path d="M414 47h0"></path><path d="M678.5 47h0"></path><path d="M414 47h20"></path><g><path d="M434 47h0"></path><g><path d="M434 47h10"></path><path d="M648.5 47h10"></path><g class="terminal "><path d="M444 47h0"></path><path d="M523.5 47h0"></path><rect x="444" y="36" width="79.5" height="22"></rect><text x="483.75" y="51">,</text></g><path d="M523.5 47h10"></path><path d="M533.5 47h10"></path><g class="non-terminal "><path d="M543.5 47h0"></path><path d="M648.5 47h0"></path><rect x="543.5" y="36" width="105" height="22" rx="10" ry="10"></rect><text x="596" y="51">expression</text></g></g><path d="M658.5 47h0"></path></g><path d="M658.5 47h20"></path></g><path d="M678.5 47h10"></path><path d="M414 47a10 10 0 0 0 -10 10v7a10 10 0 0 0 10 10"></path><g><path d="M414 74h264.5"></path></g><path d="M678.5 74a10 10 0 0 0 10 -10v-7a10 10 0 0 0 -10 -10"></path></g><path d="M688.5 47h20"></path></g><path d="M708.5 47h10"></path><g class="terminal "><path d="M718.5 47h0"></path><path d="M832 47h0"></path><rect x="718.5" y="36" width="113.5" height="22"></rect><text x="775.25" y="51">)</text></g></g><path d="M842 47h0"></path></g><path d="M842 47h20"></path><path d="M40 47a10 10 0 0 1 10 10v34a10 10 0 0 0 10 10"></path><g><path d="M60 101h224.75"></path><g><path d="M284.75 101h10"></path><path d="M607.25 101h10"></path><g class="non-terminal "><path d="M294.75 101h0"></path><path d="M348.75 101h0"></path><rect x="294.75" y="90" width="54" height="22" rx="10" ry="10"></rect><text x="321.75" y="105">func</text></g><path d="M348.75 101h10"></path><path d="M358.75 101h10"></path><g class="terminal "><path d="M368.75 101h0"></path><path d="M473.75 101h0"></path><rect x="368.75" y="90" width="105" height="22"></rect><text x="421.25" y="105">(</text></g><path d="M473.75 101h10"></path><path d="M483.75 101h10"></path><g class="terminal "><path d="M493.75 101h0"></path><path d="M607.25 101h0"></path><rect x="493.75" y="90" width="113.5" height="22"></rect><text x="550.5" y="105">)</text></g></g><path d="M617.25 101h224.75"></path></g><path d="M842 101a10 10 0 0 0 10 -10v-34a10 10 0 0 1 10 -10"></path></g><path d="M 862 47 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Functions may have any number of Arguments. Some have a fixed list of strongly typed Arguments, some accept any number of Arguments that are automatically cast to a single type. There are also functions that have no arguments and therefore return some predefined value, or even refer to Object Record as a whole and access its internal data, such as Spatial Object's geometry.</p>
<p>In any case, Arguments are evaluated from left to right.</p>
<p>Record-level Functions can be called only from Record-level Expressions, and are invalid in the Loose Expression context.</p>
<p>Functions are provided in the same way as Operators, by Java implementations from the classpath. For the complete list of Functions, their return and Argument types refer to your distro docs.</p>

<h3>Parameter List Expressions</h3>
<p>Parameter lists are expressions composed of parameters (at least one), separated by commas.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="476" height="110" viewBox="0 0 476 110"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M436 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M416 55h0"></path><g class="non-terminal"><path d="M60 55h0"></path><path d="M130 55h0"></path><rect x="60" y="44" width="70" height="22" rx="8" ry="8"></rect><text x="95" y="59">param</text></g><path d="M130 55h10"></path><g><path d="M140 55h0"></path><path d="M416 55h0"></path><path d="M140 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M160 20h236"></path></g><path d="M396 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M140 55h20"></path><g><path d="M160 55h0"></path><path d="M396 55h0"></path><path d="M160 55h10"></path><g><path d="M170 55h0"></path><path d="M386 55h0"></path><path d="M170 55h20"></path><g><path d="M190 55h0"></path><path d="M366 55h0"></path><g class="terminal"><path d="M190 55h0"></path><path d="M276 55h0"></path><rect x="190" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="233" y="59">,</text></g><path d="M276 55h10"></path><path d="M286 55h10"></path><g class="non-terminal"><path d="M296 55h0"></path><path d="M366 55h0"></path><rect x="296" y="44" width="70" height="22" rx="8" ry="8"></rect><text x="331" y="59">param</text></g></g><path d="M366 55h20"></path></g><path d="M386 55h10"></path><path d="M170 55a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M170 90h216"></path></g><path d="M386 90a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M396 55h20"></path></g></g><path d="M416 55h20"></path></g><path d="M 436 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Each parameter is a name to value (which may be expression or array literal) pair.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="540" height="108" viewBox="0 0 540 108"><g transform="translate(.5 .5)"><path d="M 20 21 v 20 m 0 -10 h 20.5"></path><g><path d="M40 31h0"></path><path d="M500 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><path d="M480 31h0"></path><g class="terminal"><path d="M60 31h0"></path><path d="M122 31h0"></path><rect x="60" y="20" width="62" height="22" rx="0" ry="0"></rect><text x="91" y="35">@</text></g><path d="M122 31h10"></path><path d="M132 31h10"></path><g class="terminal"><path d="M142 31h0"></path><path d="M268 31h0"></path><rect x="142" y="20" width="126" height="22" rx="0" ry="0"></rect><text x="205" y="35">Name</text></g><path d="M268 31h10"></path><path d="M278 31h10"></path><g class="terminal"><path d="M288 31h0"></path><path d="M350 31h0"></path><rect x="288" y="20" width="62" height="22" rx="0" ry="0"></rect><text x="319" y="35">=</text></g><path d="M350 31h10"></path><path d="M360 31h10"></path><g class="non-terminal"><path d="M370 31h0"></path><path d="M480 31h0"></path><rect x="370" y="20" width="110" height="22" rx="8" ry="8"></rect><text x="425" y="35">expression</text></g></g><path d="M480 31h20"></path><path d="M40 31a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M60 77h20"></path><path d="M460 77h20"></path><g class="terminal"><path d="M80 77h0"></path><path d="M142 77h0"></path><rect x="80" y="66" width="62" height="22" rx="0" ry="0"></rect><text x="111" y="81">@</text></g><path d="M142 77h10"></path><path d="M152 77h10"></path><g class="terminal"><path d="M162 77h0"></path><path d="M288 77h0"></path><rect x="162" y="66" width="126" height="22" rx="0" ry="0"></rect><text x="225" y="81">Name</text></g><path d="M288 77h10"></path><path d="M298 77h10"></path><g class="terminal"><path d="M308 77h0"></path><path d="M370 77h0"></path><rect x="308" y="66" width="62" height="22" rx="0" ry="0"></rect><text x="339" y="81">=</text></g><path d="M370 77h10"></path><path d="M380 77h10"></path><g class="non-terminal"><path d="M390 77h0"></path><path d="M460 77h0"></path><rect x="390" y="66" width="70" height="22" rx="8" ry="8"></rect><text x="425" y="81">array</text></g></g><path d="M480 77a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path></g><path d="M 500 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Parameter lists are usually passed to named function-like expressions (TRANSFORM, CALL, and so on).</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="678" height="110" viewBox="0 0 678 110"><g transform="translate(.5 .5)"><path d="M 20 69 v 20 m 0 -10 h 20.5"></path><g><path d="M40 79h0"></path><path d="M638 79h0"></path><path d="M40 79h20"></path><g><path d="M60 79h0"></path><path d="M618 79h0"></path><g class="non-terminal"><path d="M60 79h0"></path><path d="M122 79h0"></path><rect x="60" y="68" width="62" height="22" rx="8" ry="8"></rect><text x="91" y="83">func</text></g><path d="M122 79h10"></path><g><path d="M132 79h0"></path><path d="M618 79h0"></path><path d="M132 79a10 10 0 0 0 10 -10v-39a10 10 0 0 1 10 -10"></path><g><path d="M152 20h446"></path></g><path d="M598 20a10 10 0 0 1 10 10v39a10 10 0 0 0 10 10"></path><path d="M132 79h20"></path><g><path d="M152 79h0"></path><path d="M598 79h0"></path><path d="M152 79h20"></path><g><path d="M172 79h0"></path><path d="M578 79h0"></path><g class="terminal"><path d="M172 79h0"></path><path d="M282 79h0"></path><rect x="172" y="68" width="110" height="22" rx="0" ry="0"></rect><text x="227" y="83">(</text></g><path d="M282 79h10"></path><g><path d="M292 79h0"></path><path d="M450 79h0"></path><path d="M292 79a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M312 44h118"></path></g><path d="M430 44a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M292 79h20"></path><g class="non-terminal"><path d="M312 79h0"></path><path d="M430 79h0"></path><rect x="312" y="68" width="118" height="22" rx="8" ry="8"></rect><text x="371" y="83">params_expr</text></g><path d="M430 79h20"></path></g><path d="M450 79h10"></path><g class="terminal"><path d="M460 79h0"></path><path d="M578 79h0"></path><rect x="460" y="68" width="118" height="22" rx="0" ry="0"></rect><text x="519" y="83">)</text></g></g><path d="M578 79h20"></path></g><path d="M598 79h20"></path></g></g><path d="M618 79h20"></path></g><path d="M 638 79 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Parameter lists are bound to Record-level context and can refer to DS Attributes.</p>

<h2>Data Storage Interface Statements</h2>

<h3>CREATE Statement</h3>
<p>Creates a new DS from data source. Its name must be new and unique.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1226" height="178" viewBox="0 0 1226 178"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M1186 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M1166 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M154 55h0"></path><rect x="60" y="44" width="94" height="22" rx="0" ry="0"></rect><text x="107" y="59">CREATE</text></g><path d="M154 55h10"></path><g><path d="M164 55h0"></path><path d="M266 55h0"></path><path d="M164 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M184 20h62"></path></g><path d="M246 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M164 55h20"></path><g class="terminal"><path d="M184 55h0"></path><path d="M246 55h0"></path><rect x="184" y="44" width="62" height="22" rx="0" ry="0"></rect><text x="215" y="59">DS</text></g><path d="M246 55h20"></path></g><path d="M266 55h10"></path><g class="non-terminal"><path d="M276 55h0"></path><path d="M362 55h0"></path><rect x="276" y="44" width="86" height="22" rx="8" ry="8"></rect><text x="319" y="59">ds_name</text></g><path d="M362 55h10"></path><path d="M372 55h10"></path><g class="non-terminal"><path d="M382 55h0"></path><path d="M484 55h0"></path><rect x="382" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="433" y="59">func_expr</text></g><path d="M484 55h10"></path><path d="M494 55h10"></path><g class="terminal"><path d="M504 55h0"></path><path d="M582 55h0"></path><rect x="504" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="543" y="59">FROM</text></g><path d="M582 55h10"></path><path d="M592 55h10"></path><g class="non-terminal"><path d="M602 55h0"></path><path d="M712 55h0"></path><rect x="602" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="657" y="59">expression</text></g><path d="M712 55h10"></path><g><path d="M722 55h0"></path><path d="M864 55h0"></path><path d="M722 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M742 20h102"></path></g><path d="M844 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M722 55h20"></path><g class="non-terminal"><path d="M742 55h0"></path><path d="M844 55h0"></path><rect x="742" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="793" y="59">partition</text></g><path d="M844 55h20"></path></g><g><path d="M864 55h0"></path><path d="M1166 55h0"></path><path d="M864 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M884 20h262"></path></g><path d="M1146 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M864 55h20"></path><g><path d="M884 55h0"></path><path d="M1146 55h0"></path><path d="M884 55h20"></path><g><path d="M904 55h0"></path><path d="M1126 55h0"></path><g class="terminal"><path d="M904 55h0"></path><path d="M966 55h0"></path><rect x="904" y="44" width="62" height="22" rx="0" ry="0"></rect><text x="935" y="59">BY</text></g><path d="M966 55h10"></path><g><path d="M976 55h0"></path><path d="M1126 55h0"></path><path d="M976 55h20"></path><g><path d="M996 55h0"></path><path d="M1106 55h0"></path><g class="terminal"><path d="M996 55h0"></path><path d="M1106 55h0"></path><rect x="996" y="44" width="110" height="22" rx="0" ry="0"></rect><text x="1051" y="59">HASHCODE</text></g></g><path d="M1106 55h20"></path><path d="M976 55a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M996 101h8"></path><path d="M1098 101h8"></path><g class="terminal"><path d="M1004 101h0"></path><path d="M1098 101h0"></path><rect x="1004" y="90" width="94" height="22" rx="0" ry="0"></rect><text x="1051" y="105">SOURCE</text></g></g><path d="M1106 101a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path><path d="M976 55a10 10 0 0 1 10 10v72a10 10 0 0 0 10 10"></path><g><path d="M996 147h8"></path><path d="M1098 147h8"></path><g class="terminal"><path d="M1004 147h0"></path><path d="M1098 147h0"></path><rect x="1004" y="136" width="94" height="22" rx="0" ry="0"></rect><text x="1051" y="151">RANDOM</text></g></g><path d="M1106 147a10 10 0 0 0 10 -10v-72a10 10 0 0 1 10 -10"></path></g></g><path d="M1126 55h20"></path></g><path d="M1146 55h20"></path></g></g><path d="M1166 55h20"></path></g><path d="M 1186 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Functional expression includes Input Adapter name and its parameter list. List of available Input Adapters depends on the distribution.</p>
<p>FROM expression evaluates to a path String pointing to data source. Each Input Adapter has its own syntax of path, which could be a URI, a query, or something more specific.</p>
<p>Number of partitions is set by PARTITION clause. Its expression evaluates to Java Integer number of partitions. If not set, single partition DS is created.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="368" height="62" viewBox="0 0 368 62"><g transform="translate(.5 .5)"><path d="M 20 21 v 20 m 0 -10 h 20.5"></path><g><path d="M40 31h0"></path><path d="M328 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><path d="M308 31h0"></path><g class="terminal"><path d="M60 31h0"></path><path d="M178 31h0"></path><rect x="60" y="20" width="118" height="22" rx="0" ry="0"></rect><text x="119" y="35">PARTITION</text></g><path d="M178 31h10"></path><path d="M188 31h10"></path><g class="non-terminal"><path d="M198 31h0"></path><path d="M308 31h0"></path><rect x="198" y="20" width="110" height="22" rx="8" ry="8"></rect><text x="253" y="35">expression</text></g></g><path d="M308 31h20"></path></g><path d="M 328 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Initial object keying, and thus, initial partitioning can be changed by BY algorithm clause. Default algorithm is HASHCODE, which sets initial Record Key to Java hashcode of the Record Object itself, so identical objects will be placed into same partitions. SOURCE derives Keys from source file name (or storage-dependent analog, it if's not file-based), so all Records from same source file will go to same partition. RANDOM sets keys to random values, effectively evenly shuffling records between partitions.</p>
<p>In any case, initial key is a Java Integer numeric.</p>

<h3>COPY Statement</h3>
<p>Saves existing DS to storage.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="874" height="86" viewBox="0 0 874 86"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M834 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M814 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M138 55h0"></path><rect x="60" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="99" y="59">COPY</text></g><path d="M138 55h10"></path><g><path d="M148 55h0"></path><path d="M250 55h0"></path><path d="M148 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M168 20h62"></path></g><path d="M230 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M148 55h20"></path><g class="terminal"><path d="M168 55h0"></path><path d="M230 55h0"></path><rect x="168" y="44" width="62" height="22" rx="0" ry="0"></rect><text x="199" y="59">DS</text></g><path d="M230 55h20"></path></g><path d="M250 55h10"></path><g class="non-terminal"><path d="M260 55h0"></path><path d="M346 55h0"></path><rect x="260" y="44" width="86" height="22" rx="8" ry="8"></rect><text x="303" y="59">ds_name</text></g><path d="M346 55h10"></path><g><path d="M356 55h0"></path><path d="M474 55h0"></path><path d="M356 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M376 20h78"></path></g><path d="M454 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M356 55h20"></path><g class="terminal"><path d="M376 55h0"></path><path d="M454 55h0"></path><rect x="376" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="415" y="59">*</text></g><path d="M454 55h20"></path></g><path d="M474 55h10"></path><g class="non-terminal"><path d="M484 55h0"></path><path d="M586 55h0"></path><rect x="484" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="535" y="59">func_expr</text></g><path d="M586 55h10"></path><path d="M596 55h10"></path><g class="terminal"><path d="M606 55h0"></path><path d="M684 55h0"></path><rect x="606" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="645" y="59">INTO</text></g><path d="M684 55h10"></path><path d="M694 55h10"></path><g class="non-terminal"><path d="M704 55h0"></path><path d="M814 55h0"></path><rect x="704" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="759" y="59">expression</text></g></g><path d="M814 55h20"></path></g><path d="M 834 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Likewise, INTO expression evaluates to a path String (usually, a URI) pointing to a data storage location, with a syntax specific to each Output Adapter. List of available Output Adapters depends on the distribution.</p>
<p>If a star is used after DS name, it is treated as a prefix, and all matching DSs will be copied to storage (usually, into subdirectories under specified INTO path for file-based storages). Each partition would usually go to a separate file.</p>

<h2>Data Transformation Statements</h2>

<h3>TRANSFORM Statement</h3>
<p>Invokes a Transform to convert a DS from one type to another. Instead of keyword TRANSFORM, ALTER may be used.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1158" height="110" viewBox="0 0 1158 110"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M1118 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M1098 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M178 55h0"></path><rect x="60" y="44" width="118" height="22" rx="0" ry="0"></rect><text x="119" y="59">TRANSFORM</text></g><path d="M178 55h10"></path><g><path d="M188 55h0"></path><path d="M290 55h0"></path><path d="M188 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M208 20h62"></path></g><path d="M270 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M188 55h20"></path><g class="terminal"><path d="M208 55h0"></path><path d="M270 55h0"></path><rect x="208" y="44" width="62" height="22" rx="0" ry="0"></rect><text x="239" y="59">DS</text></g><path d="M270 55h20"></path></g><path d="M290 55h10"></path><g class="non-terminal"><path d="M300 55h0"></path><path d="M386 55h0"></path><rect x="300" y="44" width="86" height="22" rx="8" ry="8"></rect><text x="343" y="59">ds_name</text></g><path d="M386 55h10"></path><g><path d="M396 55h0"></path><path d="M514 55h0"></path><path d="M396 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M416 20h78"></path></g><path d="M494 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M396 55h20"></path><g class="terminal"><path d="M416 55h0"></path><path d="M494 55h0"></path><rect x="416" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="455" y="59">*</text></g><path d="M494 55h20"></path></g><path d="M514 55h10"></path><g class="non-terminal"><path d="M524 55h0"></path><path d="M626 55h0"></path><rect x="524" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="575" y="59">func_expr</text></g><path d="M626 55h10"></path><g><path d="M636 55h0"></path><path d="M822 55h0"></path><path d="M636 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M656 20h146"></path></g><path d="M802 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M636 55h20"></path><g><path d="M656 55h0"></path><path d="M802 55h0"></path><path d="M656 55h10"></path><g class="non-terminal"><path d="M666 55h0"></path><path d="M792 55h0"></path><rect x="666" y="44" width="126" height="22" rx="8" ry="8"></rect><text x="729" y="59">columns_item</text></g><path d="M792 55h10"></path><path d="M666 55a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M666 90h126"></path></g><path d="M792 90a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M802 55h20"></path></g><g><path d="M822 55h0"></path><path d="M956 55h0"></path><path d="M822 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M842 20h94"></path></g><path d="M936 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M822 55h20"></path><g class="non-terminal"><path d="M842 55h0"></path><path d="M936 55h0"></path><rect x="842" y="44" width="94" height="22" rx="8" ry="8"></rect><text x="889" y="59">key_item</text></g><path d="M936 55h20"></path></g><g><path d="M956 55h0"></path><path d="M1098 55h0"></path><path d="M956 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M976 20h102"></path></g><path d="M1078 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M956 55h20"></path><g class="non-terminal"><path d="M976 55h0"></path><path d="M1078 55h0"></path><rect x="976" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="1027" y="59">partition</text></g><path d="M1078 55h20"></path></g></g><path d="M1098 55h20"></path></g><path d="M 1118 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Is a star is used after DS name, it is treated as a prefix, and all matching DSs will be transformed with same parameters.</p>
<p>Functional expression includes name of Transform and list of its parameters. As transforms are pluggable, exact list depends on a distribution, and thus they're documented separately.</p>
<p>An item of column definitions of a certain type has the following structure:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1254" height="180" viewBox="0 0 1254 180"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M1214 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M1194 55h0"></path><g><path d="M60 55h0"></path><path d="M170 55h0"></path><path d="M60 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M80 20h70"></path></g><path d="M150 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M60 55h20"></path><g class="terminal"><path d="M80 55h0"></path><path d="M150 55h0"></path><rect x="80" y="44" width="70" height="22" rx="0" ry="0"></rect><text x="115" y="59">SET</text></g><path d="M150 55h20"></path></g><path d="M170 55h10"></path><g class="non-terminal"><path d="M180 55h0"></path><path d="M306 55h0"></path><rect x="180" y="44" width="126" height="22" rx="8" ry="8"></rect><text x="243" y="59">type_columns</text></g><path d="M306 55h10"></path><g><path d="M316 55h0"></path><path d="M458 55h0"></path><path d="M316 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M336 20h102"></path></g><path d="M438 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M316 55h20"></path><g class="terminal"><path d="M336 55h0"></path><path d="M438 55h0"></path><rect x="336" y="44" width="102" height="22" rx="0" ry="0"></rect><text x="387" y="59">COLUMNS</text></g><path d="M438 55h20"></path></g><path d="M458 55h10"></path><g class="terminal"><path d="M468 55h0"></path><path d="M578 55h0"></path><rect x="468" y="44" width="110" height="22" rx="0" ry="0"></rect><text x="523" y="59">(</text></g><path d="M578 55h10"></path><path d="M588 55h10"></path><g class="terminal"><path d="M598 55h0"></path><path d="M724 55h0"></path><rect x="598" y="44" width="126" height="22" rx="0" ry="0"></rect><text x="661" y="59">Name</text></g><path d="M724 55h10"></path><g><path d="M734 55h0"></path><path d="M1066 55h0"></path><path d="M734 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M754 20h292"></path></g><path d="M1046 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M734 55h20"></path><g><path d="M754 55h0"></path><path d="M1046 55h0"></path><path d="M754 55h10"></path><g><path d="M764 55h0"></path><path d="M1036 55h0"></path><path d="M764 55h20"></path><g><path d="M784 55h0"></path><path d="M1016 55h0"></path><g class="terminal"><path d="M784 55h0"></path><path d="M870 55h0"></path><rect x="784" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="827" y="59">,</text></g><path d="M870 55h10"></path><path d="M880 55h10"></path><g class="terminal"><path d="M890 55h0"></path><path d="M1016 55h0"></path><rect x="890" y="44" width="126" height="22" rx="0" ry="0"></rect><text x="953" y="59">Name</text></g></g><path d="M1016 55h20"></path></g><path d="M1036 55h10"></path><path d="M764 55a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M764 90h272"></path></g><path d="M1036 90a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M1046 55h20"></path></g><path d="M1066 55h10"></path><g class="terminal"><path d="M1076 55h0"></path><path d="M1194 55h0"></path><rect x="1076" y="44" width="118" height="22" rx="0" ry="0"></rect><text x="1135" y="59">)</text></g></g><path d="M1194 55h20"></path><path d="M40 55a10 10 0 0 1 10 10v74a10 10 0 0 0 10 10"></path><g><path d="M60 149h182"></path><path d="M1012 149h182"></path><g><path d="M242 149h0"></path><path d="M352 149h0"></path><path d="M242 149a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M262 114h70"></path></g><path d="M332 114a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M242 149h20"></path><g class="terminal"><path d="M262 149h0"></path><path d="M332 149h0"></path><rect x="262" y="138" width="70" height="22" rx="0" ry="0"></rect><text x="297" y="153">SET</text></g><path d="M332 149h20"></path></g><path d="M352 149h10"></path><g class="non-terminal"><path d="M362 149h0"></path><path d="M488 149h0"></path><rect x="362" y="138" width="126" height="22" rx="8" ry="8"></rect><text x="425" y="153">type_columns</text></g><path d="M488 149h10"></path><g><path d="M498 149h0"></path><path d="M640 149h0"></path><path d="M498 149a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M518 114h102"></path></g><path d="M620 114a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M498 149h20"></path><g class="terminal"><path d="M518 149h0"></path><path d="M620 149h0"></path><rect x="518" y="138" width="102" height="22" rx="0" ry="0"></rect><text x="569" y="153">COLUMNS</text></g><path d="M620 149h20"></path></g><path d="M640 149h10"></path><g class="terminal"><path d="M650 149h0"></path><path d="M760 149h0"></path><rect x="650" y="138" width="110" height="22" rx="0" ry="0"></rect><text x="705" y="153">(</text></g><path d="M760 149h10"></path><path d="M770 149h10"></path><g class="non-terminal"><path d="M780 149h0"></path><path d="M874 149h0"></path><rect x="780" y="138" width="94" height="22" rx="8" ry="8"></rect><text x="827" y="153">var_name</text></g><path d="M874 149h10"></path><path d="M884 149h10"></path><g class="terminal"><path d="M894 149h0"></path><path d="M1012 149h0"></path><rect x="894" y="138" width="118" height="22" rx="0" ry="0"></rect><text x="953" y="153">)</text></g></g><path d="M1194 149a10 10 0 0 0 10 -10v-74a10 10 0 0 1 10 -10"></path></g><path d="M 1214 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>In case of the COLUMNS list with ($variable) syntax, referenced variable must be of type of Array of Names.</p>
<p>'Type of columns' in this context depend on the DS type.</p>
<table>
	<thead><tr><th>DS Type</th><th>Type of Attributes</th><th>Record Object Level</th></tr></thead>
	<tbody>
	<tr><td>PlainText</td><td>VALUE</td><td>There are no Attributes</td></tr>
	<tr><td>Columnar</td><td>VALUE</td><td>Column names of the record object</td></tr>
	<tr><td>Structured</td><td>VALUE</td><td>Property names of the record object</td></tr>
	<tr><td>Point</td><td>POINT or POI or VALUE</td><td>Attributes of Point object</td></tr>
	<tr><td rowspan="3">Track</td><td>TRACK or SEGMENTEDTRACK or VALUE</td><td>Attributes of Track (level 1 object)</td></tr>
	<tr><td>SEGMENT or TRACKSEGMENT</td><td>Attributes of Segments (level 2 objects)</td></tr>
	<tr><td>POINT or POI</td><td>Attributes of Points (level 3 objects)</td></tr>
	<tr><td>Polygon</td><td>POLYGON or VALUE</td><td>Attributes of Polygon object</td></tr>
	</tbody>
</table>
<p>Key item is a simple expression, referring to existing DS columns:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="320" height="62" viewBox="0 0 320 62"><g transform="translate(.5 .5)"><path d="M 20 21 v 20 m 0 -10 h 20.5"></path><g><path d="M40 31h0"></path><path d="M280 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><path d="M260 31h0"></path><g class="terminal"><path d="M60 31h0"></path><path d="M130 31h0"></path><rect x="60" y="20" width="70" height="22" rx="0" ry="0"></rect><text x="95" y="35">KEY</text></g><path d="M130 31h10"></path><path d="M140 31h10"></path><g class="non-terminal"><path d="M150 31h0"></path><path d="M260 31h0"></path><rect x="150" y="20" width="110" height="22" rx="8" ry="8"></rect><text x="205" y="35">expression</text></g></g><path d="M260 31h20"></path></g><path d="M 280 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>If key is set, DS Records will be reassigned to new partitions according to new Keys. Be aware that raw result of key expression is used to set Record Key, so if it evaluates to a constant, all records will go into one partition.</p>
<p>Key evaluation incidence depends on the Transform. Most evaluate keys before the record is transformed, but there are some that do it after (for example, if source Record is PlainText no Attributes are available before transformation). See Transforms documentation to find out.</p>
<p>If statement includes partition clause, DS will be repartitioned to a desired number of partitions after both transforming and rekeying, even if that number is same as before.</p>

<h2>Data Manipulation Statements</h2>

<h3>SELECT Statement</h3>
<p>Perform an SQL-like query to one or more existing DSs and create a new, resulting DS. Its name, specified in INTO clause, must be new and unique.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1878" height="180" viewBox="0 0 1878 180"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M1838 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M1818 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M154 55h0"></path><rect x="60" y="44" width="94" height="22" rx="0" ry="0"></rect><text x="107" y="59">SELECT</text></g><path d="M154 55h10"></path><g><path d="M164 55h0"></path><path d="M314 55h0"></path><path d="M164 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M184 20h110"></path></g><path d="M294 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M164 55h20"></path><g class="terminal"><path d="M184 55h0"></path><path d="M294 55h0"></path><rect x="184" y="44" width="110" height="22" rx="0" ry="0"></rect><text x="239" y="59">DISTINCT</text></g><path d="M294 55h20"></path></g><g><path d="M314 55h0"></path><path d="M774 55h0"></path><path d="M314 55h20"></path><g><path d="M334 55h171"></path><path d="M583 55h171"></path><g class="terminal"><path d="M505 55h0"></path><path d="M583 55h0"></path><rect x="505" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="544" y="59">*</text></g></g><path d="M754 55h20"></path><path d="M314 55a10 10 0 0 1 10 10v50a10 10 0 0 0 10 10"></path><g><path d="M334 125h0"></path><path d="M754 125h0"></path><g class="non-terminal"><path d="M334 125h0"></path><path d="M436 125h0"></path><rect x="334" y="114" width="102" height="22" rx="8" ry="8"></rect><text x="385" y="129">what_expr</text></g><path d="M436 125h10"></path><g><path d="M446 125h0"></path><path d="M754 125h0"></path><path d="M446 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M466 90h268"></path></g><path d="M734 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M446 125h20"></path><g><path d="M466 125h0"></path><path d="M734 125h0"></path><path d="M466 125h10"></path><g><path d="M476 125h0"></path><path d="M724 125h0"></path><path d="M476 125h20"></path><g><path d="M496 125h0"></path><path d="M704 125h0"></path><g class="terminal"><path d="M496 125h0"></path><path d="M582 125h0"></path><rect x="496" y="114" width="86" height="22" rx="0" ry="0"></rect><text x="539" y="129">,</text></g><path d="M582 125h10"></path><path d="M592 125h10"></path><g class="non-terminal"><path d="M602 125h0"></path><path d="M704 125h0"></path><rect x="602" y="114" width="102" height="22" rx="8" ry="8"></rect><text x="653" y="129">what_expr</text></g></g><path d="M704 125h20"></path></g><path d="M724 125h10"></path><path d="M476 125a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M476 160h248"></path></g><path d="M724 160a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M734 125h20"></path></g></g><path d="M754 125a10 10 0 0 0 10 -10v-50a10 10 0 0 1 10 -10"></path></g><g><path d="M774 55h0"></path><path d="M1226 55h0"></path><path d="M774 55h20"></path><g><path d="M794 55h0"></path><path d="M1206 55h0"></path><g class="terminal"><path d="M794 55h0"></path><path d="M872 55h0"></path><rect x="794" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="833" y="59">INTO</text></g><path d="M872 55h10"></path><path d="M882 55h10"></path><g class="non-terminal"><path d="M892 55h0"></path><path d="M978 55h0"></path><rect x="892" y="44" width="86" height="22" rx="8" ry="8"></rect><text x="935" y="59">ds_name</text></g><path d="M978 55h10"></path><path d="M988 55h10"></path><g class="terminal"><path d="M998 55h0"></path><path d="M1076 55h0"></path><rect x="998" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="1037" y="59">FROM</text></g><path d="M1076 55h10"></path><path d="M1086 55h10"></path><g class="non-terminal"><path d="M1096 55h0"></path><path d="M1206 55h0"></path><rect x="1096" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="1151" y="59">from_scope</text></g></g><path d="M1206 55h20"></path><path d="M774 55a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M794 101h0"></path><path d="M1206 101h0"></path><g class="terminal"><path d="M794 101h0"></path><path d="M872 101h0"></path><rect x="794" y="90" width="78" height="22" rx="0" ry="0"></rect><text x="833" y="105">FROM</text></g><path d="M872 101h10"></path><path d="M882 101h10"></path><g class="non-terminal"><path d="M892 101h0"></path><path d="M1002 101h0"></path><rect x="892" y="90" width="110" height="22" rx="8" ry="8"></rect><text x="947" y="105">from_scope</text></g><path d="M1002 101h10"></path><path d="M1012 101h10"></path><g class="terminal"><path d="M1022 101h0"></path><path d="M1100 101h0"></path><rect x="1022" y="90" width="78" height="22" rx="0" ry="0"></rect><text x="1061" y="105">INTO</text></g><path d="M1100 101h10"></path><path d="M1110 101h10"></path><g class="non-terminal"><path d="M1120 101h0"></path><path d="M1206 101h0"></path><rect x="1120" y="90" width="86" height="22" rx="8" ry="8"></rect><text x="1163" y="105">ds_name</text></g></g><path d="M1206 101a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path></g><g><path d="M1226 55h0"></path><path d="M1522 55h0"></path><path d="M1226 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M1246 20h256"></path></g><path d="M1502 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M1226 55h20"></path><g><path d="M1246 55h0"></path><path d="M1502 55h0"></path><path d="M1246 55h20"></path><g><path d="M1266 55h0"></path><path d="M1482 55h0"></path><g class="terminal"><path d="M1266 55h0"></path><path d="M1352 55h0"></path><rect x="1266" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="1309" y="59">WHERE</text></g><path d="M1352 55h10"></path><path d="M1362 55h10"></path><g class="non-terminal"><path d="M1372 55h0"></path><path d="M1482 55h0"></path><rect x="1372" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="1427" y="59">where_expr</text></g></g><path d="M1482 55h20"></path></g><path d="M1502 55h20"></path></g><g><path d="M1522 55h0"></path><path d="M1818 55h0"></path><path d="M1522 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M1542 20h256"></path></g><path d="M1798 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M1522 55h20"></path><g><path d="M1542 55h0"></path><path d="M1798 55h0"></path><path d="M1542 55h20"></path><g><path d="M1562 55h0"></path><path d="M1778 55h0"></path><g class="terminal"><path d="M1562 55h0"></path><path d="M1648 55h0"></path><rect x="1562" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="1605" y="59">LIMIT</text></g><path d="M1648 55h10"></path><path d="M1658 55h10"></path><g class="non-terminal"><path d="M1668 55h0"></path><path d="M1778 55h0"></path><rect x="1668" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="1723" y="59">limit_expr</text></g></g><path d="M1778 55h20"></path></g><path d="M1798 55h20"></path></g></g><path d="M1818 55h20"></path></g><path d="M 1838 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Query part is a star (with meaning 'select all available attributes') or a list of 'what to select' expressions. Resulting DS attributes are named according to aliases (if specified) or stringified expression (expression text with all whitespace removed):</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="622" height="110" viewBox="0 0 622 110"><g transform="translate(.5 .5)"><path d="M 20 69 v 20 m 0 -10 h 20.5"></path><g><path d="M40 79h0"></path><path d="M582 79h0"></path><path d="M40 79h20"></path><g><path d="M60 79h0"></path><path d="M562 79h0"></path><g class="non-terminal"><path d="M60 79h0"></path><path d="M170 79h0"></path><rect x="60" y="68" width="110" height="22" rx="8" ry="8"></rect><text x="115" y="83">expression</text></g><path d="M170 79h10"></path><g><path d="M180 79h0"></path><path d="M562 79h0"></path><path d="M180 79a10 10 0 0 0 10 -10v-39a10 10 0 0 1 10 -10"></path><g><path d="M200 20h342"></path></g><path d="M542 20a10 10 0 0 1 10 10v39a10 10 0 0 0 10 10"></path><path d="M180 79h20"></path><g><path d="M200 79h0"></path><path d="M542 79h0"></path><path d="M200 79h20"></path><g><path d="M220 79h0"></path><path d="M522 79h0"></path><g class="terminal"><path d="M220 79h0"></path><path d="M282 79h0"></path><rect x="220" y="68" width="62" height="22" rx="0" ry="0"></rect><text x="251" y="83">AS</text></g><path d="M282 79h10"></path><g><path d="M292 79h0"></path><path d="M442 79h0"></path><path d="M292 79a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M312 44h110"></path></g><path d="M422 44a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M292 79h20"></path><g class="non-terminal"><path d="M312 79h0"></path><path d="M422 79h0"></path><rect x="312" y="68" width="110" height="22" rx="8" ry="8"></rect><text x="367" y="83">type_alias</text></g><path d="M422 79h20"></path></g><path d="M442 79h10"></path><g class="non-terminal"><path d="M452 79h0"></path><path d="M522 79h0"></path><rect x="452" y="68" width="70" height="22" rx="8" ry="8"></rect><text x="487" y="83">alias</text></g></g><path d="M522 79h20"></path></g><path d="M542 79h20"></path></g></g><path d="M562 79h20"></path></g><path d="M 582 79 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>If same alias is set for several expressions, rightmost will rewrite result of all preceding (there can't be many attributes with same name in DS object). Aliases are set per column type (same as in TRANSFORM).</p>
<p>SELECT expressions are bound to Record-level context for all DS participating in the SELECT.</p>
<p>For Structured SELECTs, compound property names must be used to access nested properties using dot notation ("top.inner.innermost"), and zero-based array indices or ranges to access array members. For example, "prop.inner[0]" for 1st menber of "prop.inner" array, or "[2].prop" for 3rd topmost array member's property "prop". Ranges may be specified only for innermost properties (no dots allowed afterwards): "prop[*]" or "prop[]" for entire array "prop", "prop[1:]" from 2nd member onwards, "prop[:5]" up to 6th, "prop[2:4]" from 3rd to 5th. Range boundaries may be negative which means 'Nth member from array end'. If right range goes past array size, result will be NULL padded. If boundaries overlap or both go beyond beginning, empty array will be returned.</p>
<p>In case of straight JOINs, fully-qualified compound names for attributes from different DSs must be used in the same dot notation.</p>
<p>Source scope is specified in the FROM clause:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="592" height="248" viewBox="0 0 592 248"><g transform="translate(.5 .5)"><path d="M 20 21 v 20 m 0 -10 h 20.5"></path><g><path d="M40 31h0"></path><path d="M552 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h193"></path><path d="M339 31h193"></path><g class="non-terminal"><path d="M253 31h0"></path><path d="M339 31h0"></path><rect x="253" y="20" width="86" height="22" rx="8" ry="8"></rect><text x="296" y="35">ds_name</text></g></g><path d="M532 31h20"></path><path d="M40 31a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M60 77h4"></path><path d="M528 77h4"></path><g class="non-terminal"><path d="M64 77h0"></path><path d="M150 77h0"></path><rect x="64" y="66" width="86" height="22" rx="8" ry="8"></rect><text x="107" y="81">join_op</text></g><path d="M150 77h10"></path><path d="M160 77h10"></path><g class="non-terminal"><path d="M170 77h0"></path><path d="M256 77h0"></path><rect x="170" y="66" width="86" height="22" rx="8" ry="8"></rect><text x="213" y="81">ds_name</text></g><path d="M256 77h10"></path><path d="M266 77h10"></path><g><path d="M276 77h0"></path><path d="M528 77h0"></path><path d="M276 77h10"></path><g><path d="M286 77h0"></path><path d="M518 77h0"></path><path d="M286 77h20"></path><g><path d="M306 77h0"></path><path d="M498 77h0"></path><g class="terminal"><path d="M306 77h0"></path><path d="M392 77h0"></path><rect x="306" y="66" width="86" height="22" rx="0" ry="0"></rect><text x="349" y="81">,</text></g><path d="M392 77h10"></path><path d="M402 77h10"></path><g class="non-terminal"><path d="M412 77h0"></path><path d="M498 77h0"></path><rect x="412" y="66" width="86" height="22" rx="8" ry="8"></rect><text x="455" y="81">ds_name</text></g></g><path d="M498 77h20"></path></g><path d="M518 77h10"></path><path d="M286 77a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M286 112h232"></path></g><path d="M518 112a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g></g><path d="M532 77a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v96a10 10 0 0 0 10 10"></path><g><path d="M60 147h0"></path><path d="M532 147h0"></path><g class="non-terminal"><path d="M60 147h0"></path><path d="M154 147h0"></path><rect x="60" y="136" width="94" height="22" rx="8" ry="8"></rect><text x="107" y="151">union_op</text></g><path d="M154 147h10"></path><path d="M164 147h10"></path><g class="non-terminal"><path d="M174 147h0"></path><path d="M260 147h0"></path><rect x="174" y="136" width="86" height="22" rx="8" ry="8"></rect><text x="217" y="151">ds_name</text></g><path d="M260 147h10"></path><path d="M270 147h10"></path><g><path d="M280 147h0"></path><path d="M532 147h0"></path><path d="M280 147h10"></path><g><path d="M290 147h0"></path><path d="M522 147h0"></path><path d="M290 147h20"></path><g><path d="M310 147h0"></path><path d="M502 147h0"></path><g class="terminal"><path d="M310 147h0"></path><path d="M396 147h0"></path><rect x="310" y="136" width="86" height="22" rx="0" ry="0"></rect><text x="353" y="151">,</text></g><path d="M396 147h10"></path><path d="M406 147h10"></path><g class="non-terminal"><path d="M416 147h0"></path><path d="M502 147h0"></path><rect x="416" y="136" width="86" height="22" rx="8" ry="8"></rect><text x="459" y="151">ds_name</text></g></g><path d="M502 147h20"></path></g><path d="M522 147h10"></path><path d="M290 147a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M290 182h232"></path></g><path d="M522 182a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g></g><path d="M532 147a10 10 0 0 0 10 -10v-96a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v166a10 10 0 0 0 10 10"></path><g><path d="M60 217h87"></path><path d="M445 217h87"></path><g class="non-terminal"><path d="M147 217h0"></path><path d="M241 217h0"></path><rect x="147" y="206" width="94" height="22" rx="8" ry="8"></rect><text x="194" y="221">union_op</text></g><path d="M241 217h10"></path><path d="M251 217h10"></path><g class="non-terminal"><path d="M261 217h0"></path><path d="M347 217h0"></path><rect x="261" y="206" width="86" height="22" rx="8" ry="8"></rect><text x="304" y="221">ds_name</text></g><path d="M347 217h10"></path><path d="M357 217h10"></path><g class="terminal"><path d="M367 217h0"></path><path d="M445 217h0"></path><rect x="367" y="206" width="78" height="22" rx="0" ry="0"></rect><text x="406" y="221">*</text></g></g><path d="M532 217a10 10 0 0 0 10 -10v-166a10 10 0 0 1 10 -10"></path></g><path d="M 552 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Queries can be performed to a single or many (with UNION) DS of any type, or multiple JOINed KeyValue DSs.</p>
<p>Query to a single DS is equivalent of iteration over all its data and simple evaluation of what-to-select items, then applying constraints.</p>
<p>In the case of a single DS with * query and no other constraints, a 'fast shallow copy' of DS is performed (just a new name to same underlying data is assigned).</p>
<p>UNIONs could unite either all listed DSs, or if a star syntax is used, all DSs with names that have specified prefix. There are several types of UNION operation available:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="390" height="178" viewBox="0 0 390 178"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M350 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M330 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M146 55h0"></path><rect x="60" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="103" y="59">UNION</text></g><path d="M146 55h10"></path><g><path d="M156 55h0"></path><path d="M330 55h0"></path><path d="M156 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M176 20h134"></path></g><path d="M310 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M156 55h20"></path><g><path d="M176 55h0"></path><path d="M310 55h0"></path><path d="M176 55h20"></path><g><path d="M196 55h0"></path><path d="M290 55h0"></path><g class="terminal"><path d="M196 55h0"></path><path d="M290 55h0"></path><rect x="196" y="44" width="94" height="22" rx="0" ry="0"></rect><text x="243" y="59">CONCAT</text></g></g><path d="M290 55h20"></path><path d="M176 55a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M196 101h12"></path><path d="M278 101h12"></path><g class="terminal"><path d="M208 101h0"></path><path d="M278 101h0"></path><rect x="208" y="90" width="70" height="22" rx="0" ry="0"></rect><text x="243" y="105">XOR</text></g></g><path d="M290 101a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path><path d="M176 55a10 10 0 0 1 10 10v72a10 10 0 0 0 10 10"></path><g><path d="M196 147h12"></path><path d="M278 147h12"></path><g class="terminal"><path d="M208 147h0"></path><path d="M278 147h0"></path><rect x="208" y="136" width="70" height="22" rx="0" ry="0"></rect><text x="243" y="151">AND</text></g></g><path d="M290 147a10 10 0 0 0 10 -10v-72a10 10 0 0 1 10 -10"></path></g><path d="M310 55h20"></path></g></g><path d="M330 55h20"></path></g><path d="M 350 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<table>
	<thead><tr><th>UNION Operation</th><th>Result</th></tr></thead>
	<tbody>
		<tr><td>By default, CONCAT or CAT</td><td>Records of all DSs are queried, in order of occurrence</td></tr>
		<tr><td>XOR</td><td>Only records that are unique to their source DSs are queried, other are discarded</td></tr>
		<tr><td>AND</td><td>Only records that are occurred in all participating DSs are queries, other are discarded</td></tr>
	</tbody>
</table>
<p>UNION can be applied to DSs of same type only. Also, for UNION to be successful, all top-level objects of participating DSs must have top-level attributes of same names.</p>
<p>JOINs can be used to form new objects from participating DSs Objects that have same Record keys. There are following JOIN operations available:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="502" height="272" viewBox="0 0 502 272"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M462 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M442 55h0"></path><g><path d="M60 55h0"></path><path d="M354 55h0"></path><path d="M60 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M80 20h254"></path></g><path d="M334 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M60 55h20"></path><g><path d="M80 55h0"></path><path d="M334 55h0"></path><path d="M80 55h20"></path><g><path d="M100 55h64"></path><path d="M250 55h64"></path><g class="terminal"><path d="M164 55h0"></path><path d="M250 55h0"></path><rect x="164" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="207" y="59">INNER</text></g></g><path d="M314 55h20"></path><path d="M80 55a10 10 0 0 1 10 10v50a10 10 0 0 0 10 10"></path><g><path d="M100 125h4"></path><path d="M310 125h4"></path><g class="terminal"><path d="M104 125h0"></path><path d="M182 125h0"></path><rect x="104" y="114" width="78" height="22" rx="0" ry="0"></rect><text x="143" y="129">LEFT</text></g><path d="M182 125h10"></path><g><path d="M192 125h0"></path><path d="M310 125h0"></path><path d="M192 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M212 90h78"></path></g><path d="M290 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M192 125h20"></path><g class="terminal"><path d="M212 125h0"></path><path d="M290 125h0"></path><rect x="212" y="114" width="78" height="22" rx="0" ry="0"></rect><text x="251" y="129">ANTI</text></g><path d="M290 125h20"></path></g></g><path d="M314 125a10 10 0 0 0 10 -10v-50a10 10 0 0 1 10 -10"></path><path d="M80 55a10 10 0 0 1 10 10v120a10 10 0 0 0 10 10"></path><g><path d="M100 195h0"></path><path d="M314 195h0"></path><g class="terminal"><path d="M100 195h0"></path><path d="M186 195h0"></path><rect x="100" y="184" width="86" height="22" rx="0" ry="0"></rect><text x="143" y="199">RIGHT</text></g><path d="M186 195h10"></path><g><path d="M196 195h0"></path><path d="M314 195h0"></path><path d="M196 195a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M216 160h78"></path></g><path d="M294 160a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M196 195h20"></path><g class="terminal"><path d="M216 195h0"></path><path d="M294 195h0"></path><rect x="216" y="184" width="78" height="22" rx="0" ry="0"></rect><text x="255" y="199">ANTI</text></g><path d="M294 195h20"></path></g></g><path d="M314 195a10 10 0 0 0 10 -10v-120a10 10 0 0 1 10 -10"></path><path d="M80 55a10 10 0 0 1 10 10v166a10 10 0 0 0 10 10"></path><g><path d="M100 241h64"></path><path d="M250 241h64"></path><g class="terminal"><path d="M164 241h0"></path><path d="M250 241h0"></path><rect x="164" y="230" width="86" height="22" rx="0" ry="0"></rect><text x="207" y="245">OUTER</text></g></g><path d="M314 241a10 10 0 0 0 10 -10v-166a10 10 0 0 1 10 -10"></path></g><path d="M334 55h20"></path></g><path d="M354 55h10"></path><g class="terminal"><path d="M364 55h0"></path><path d="M442 55h0"></path><rect x="364" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="403" y="59">JOIN</text></g></g><path d="M442 55h20"></path></g><path d="M 462 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Resulting record objects of straight JOINs have internal data from the first meaningful Object occurred in the DS iteration order, while Attributes are read from all JOINed sets, using compound name with dot notation (1st part is set name, then attribute name). For subtracting JOINs, however, only one set is the source of resulting objects, thus only that object Attributes are available, using simple name.</p>
<table>
	<thead><tr><th>JOIN Operation</th><th>Type</th><th>Result Evaluation Rules</th><th>Result Type</th></tr></thead>
	<tbody>
	<tr><td>By default, INNER</td><td>Straight</td><td>Records that have matching keys in all participating DSs are queried, other discarded. Records always have all Attributes from all participating sets</td><td>1st set</td></tr>
		<tr><td>LEFT</td><td>Straight</td><td>DSs are iterated from left to right. Result records always have columns form 1st DS, and from subsequent DSs records with same keys. If there is no record with matching key, NULLs will be used for its attributes</td><td>1st set</td></tr>
		<tr><td>LEFT ANTI</td><td>Subtracting</td><td>DSs are iterated from left to right. Records from 1st DS that have no matching keys in all subsequent DSs will be queried, other discarded</td><td>1st set</td></tr>
		<tr><td>RIGHT</td><td>Straight</td><td>DSs are iterated from right to left. Result records always have columns form last DS, and from preceding DSs records with same keys. If there is no record with matching key, NULLs will be used for its attributes</td><td>Last set</td></tr>
		<tr><td>RIGHT ANTI</td><td>Subtracting</td><td>DSs are iterated from right to left. Records from last DS that have no matching keys in all subsequent DSs will be queried, other discarded</td><td>Last set</td></tr>
		<tr><td>OUTER</td><td>Straight</td><td>DSs are iterated from left to right. Result records always have columns form all DSs records with same keys. If there is no record with matching key, NULLs will be used for its attributes</td><td>1st set</td></tr>
	</tbody>
</table>
<p>There are 3 types constraints available to narrow down the query results: WHERE, DISTINCT, and LIMIT clauses.</p>
<p>WHERE constraint is a single Boolean expression (applicable only to one level of object selected by type alias, if there are many), evaluated before 'what-to-select' expressions and all other constraints for each record. If result is TRUE, record is queried, otherwise discarded.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="390" height="86" viewBox="0 0 390 86"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M350 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M330 55h0"></path><g><path d="M60 55h0"></path><path d="M210 55h0"></path><path d="M60 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M80 20h110"></path></g><path d="M190 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M60 55h20"></path><g class="non-terminal"><path d="M80 55h0"></path><path d="M190 55h0"></path><rect x="80" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="135" y="59">type_alias</text></g><path d="M190 55h20"></path></g><path d="M210 55h10"></path><g class="non-terminal"><path d="M220 55h0"></path><path d="M330 55h0"></path><rect x="220" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="275" y="59">expression</text></g></g><path d="M330 55h20"></path></g><path d="M 350 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>DISTINCT, if specified, is applied after resulting query is evaluated. Of all records that have been evaluated to exactly same key and object, there will be only one left, and any repeats discarded.</p>
<p>LIMIT is applied at the very last, and comes in two flavors, by count and by percentage. Count can be specified in any valid Numeric format, and the resulting DS will have at most the specified number of records, randomly selected. If set by percentage, it must fall into a range from 0 (exclusive) to 100 (inclusive), and result will have randomly trimmed down to set percentage of records. If invalid percentage is specified, that will lead to an error.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="374" height="86" viewBox="0 0 374 86"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M334 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M314 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M162 55h0"></path><rect x="60" y="44" width="102" height="22" rx="0" ry="0"></rect><text x="111" y="59">Numeric</text></g><path d="M162 55h10"></path><g><path d="M172 55h0"></path><path d="M314 55h0"></path><path d="M172 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M192 20h102"></path></g><path d="M294 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M172 55h20"></path><g class="terminal"><path d="M192 55h0"></path><path d="M294 55h0"></path><rect x="192" y="44" width="102" height="22" rx="0" ry="0"></rect><text x="243" y="59">%</text></g><path d="M294 55h20"></path></g></g><path d="M314 55h20"></path></g><path d="M 334 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>To summarize, the order of SELECT evaluation is as of follows:</p>
<ol>
	<li>Check of existence of INTO DS name</li>
	<li>Iteration, JOIN, or UNION over source scope of DSs</li>
	<li>WHERE constraint expression</li>
	<li>'What-to-select' expressions, from left to right</li>
	<li>DISTINCT constraint</li>
	<li>LIMIT constraint</li>
</ol>

<h3>CALL Statement</h3>
<p>Serves to call pluggable Operations, akin to SQL stored procedures (but with a substantial semantic difference). Operations always create new DSs from existing.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="710" height="200" viewBox="0 0 710 200"><g transform="translate(.5 .5)"><path d="M 20 21 v 20 m 0 -10 h 20.5"></path><g><path d="M40 31h0"></path><path d="M670 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><path d="M650 31h0"></path><g class="terminal"><path d="M60 31h0"></path><path d="M138 31h0"></path><rect x="60" y="20" width="78" height="22" rx="0" ry="0"></rect><text x="99" y="35">CALL</text></g><path d="M138 31h10"></path><path d="M148 31h10"></path><g class="non-terminal"><path d="M158 31h0"></path><path d="M260 31h0"></path><rect x="158" y="20" width="102" height="22" rx="8" ry="8"></rect><text x="209" y="35">func_expr</text></g><path d="M260 31h10"></path><g><path d="M270 31h0"></path><path d="M460 31h0"></path><path d="M270 31h20"></path><g><path d="M290 31h0"></path><path d="M440 31h0"></path><g class="non-terminal"><path d="M290 31h0"></path><path d="M440 31h0"></path><rect x="290" y="20" width="150" height="22" rx="8" ry="8"></rect><text x="365" y="35">from_positional</text></g></g><path d="M440 31h20"></path><path d="M270 31a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M290 77h20"></path><path d="M420 77h20"></path><g class="non-terminal"><path d="M310 77h0"></path><path d="M420 77h0"></path><rect x="310" y="66" width="110" height="22" rx="8" ry="8"></rect><text x="365" y="81">from_named</text></g></g><path d="M440 77a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path></g><g><path d="M460 31h0"></path><path d="M650 31h0"></path><path d="M460 31h20"></path><g><path d="M480 31h0"></path><path d="M630 31h0"></path><g class="non-terminal"><path d="M480 31h0"></path><path d="M630 31h0"></path><rect x="480" y="20" width="150" height="22" rx="8" ry="8"></rect><text x="555" y="35">into_positional</text></g></g><path d="M630 31h20"></path><path d="M460 31a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M480 77h20"></path><path d="M610 77h20"></path><g class="non-terminal"><path d="M500 77h0"></path><path d="M610 77h0"></path><rect x="500" y="66" width="110" height="22" rx="8" ry="8"></rect><text x="555" y="81">into_named</text></g></g><path d="M630 77a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path></g></g><path d="M650 31h20"></path><path d="M40 31a10 10 0 0 1 10 10v72a10 10 0 0 0 10 10"></path><g><path d="M60 123h0"></path><path d="M650 123h0"></path><g class="terminal"><path d="M60 123h0"></path><path d="M138 123h0"></path><rect x="60" y="112" width="78" height="22" rx="0" ry="0"></rect><text x="99" y="127">CALL</text></g><path d="M138 123h10"></path><path d="M148 123h10"></path><g class="non-terminal"><path d="M158 123h0"></path><path d="M260 123h0"></path><rect x="158" y="112" width="102" height="22" rx="8" ry="8"></rect><text x="209" y="127">func_expr</text></g><path d="M260 123h10"></path><g><path d="M270 123h0"></path><path d="M460 123h0"></path><path d="M270 123h20"></path><g><path d="M290 123h0"></path><path d="M440 123h0"></path><g class="non-terminal"><path d="M290 123h0"></path><path d="M440 123h0"></path><rect x="290" y="112" width="150" height="22" rx="8" ry="8"></rect><text x="365" y="127">into_positional</text></g></g><path d="M440 123h20"></path><path d="M270 123a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M290 169h20"></path><path d="M420 169h20"></path><g class="non-terminal"><path d="M310 169h0"></path><path d="M420 169h0"></path><rect x="310" y="158" width="110" height="22" rx="8" ry="8"></rect><text x="365" y="173">into_named</text></g></g><path d="M440 169a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path></g><g><path d="M460 123h0"></path><path d="M650 123h0"></path><path d="M460 123h20"></path><g><path d="M480 123h0"></path><path d="M630 123h0"></path><g class="non-terminal"><path d="M480 123h0"></path><path d="M630 123h0"></path><rect x="480" y="112" width="150" height="22" rx="8" ry="8"></rect><text x="555" y="127">from_positional</text></g></g><path d="M630 123h20"></path><path d="M460 123a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M480 169h20"></path><path d="M610 169h20"></path><g class="non-terminal"><path d="M500 169h0"></path><path d="M610 169h0"></path><rect x="500" y="158" width="110" height="22" rx="8" ry="8"></rect><text x="555" y="173">from_named</text></g></g><path d="M630 169a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path></g></g><path d="M650 123a10 10 0 0 0 10 -10v-72a10 10 0 0 1 10 -10"></path></g><path d="M 670 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Functional expression includes name of an Operation and its parameters. Full list of available Operations depends on distribution, thus them and their parameters are documented separately.</p>
<p>Like SELECT, there is source scope of DSs, set by INPUT clause. There are two flavors of source scope, depending on Operation.</p>
<p>Positional INPUT is either a list of DS names, or a prefix, followed by a star. In case of a list, Operation tries to use matching inputs in the specified order. In case of star syntax, order doesn't matter. Some Operations may require an exact number of positional inputs, while some will use all positional inputs to create an equal number of positional outputs. Please refer to Operation documentation for its requirements.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="732" height="180" viewBox="0 0 732 180"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M692 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h87"></path><path d="M585 55h87"></path><g class="terminal"><path d="M147 55h0"></path><path d="M233 55h0"></path><rect x="147" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="190" y="59">INPUT</text></g><path d="M233 55h10"></path><g><path d="M243 55h0"></path><path d="M361 55h0"></path><path d="M243 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M263 20h78"></path></g><path d="M341 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M243 55h20"></path><g class="terminal"><path d="M263 55h0"></path><path d="M341 55h0"></path><rect x="263" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="302" y="59">FROM</text></g><path d="M341 55h20"></path></g><path d="M361 55h10"></path><g class="non-terminal"><path d="M371 55h0"></path><path d="M457 55h0"></path><rect x="371" y="44" width="86" height="22" rx="8" ry="8"></rect><text x="414" y="59">ds_name</text></g><path d="M457 55h10"></path><g><path d="M467 55h0"></path><path d="M585 55h0"></path><path d="M467 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M487 20h78"></path></g><path d="M565 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M467 55h20"></path><g class="terminal"><path d="M487 55h0"></path><path d="M565 55h0"></path><rect x="487" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="526" y="59">*</text></g><path d="M565 55h20"></path></g></g><path d="M672 55h20"></path><path d="M40 55a10 10 0 0 1 10 10v50a10 10 0 0 0 10 10"></path><g><path d="M60 125h0"></path><path d="M672 125h0"></path><g class="terminal"><path d="M60 125h0"></path><path d="M146 125h0"></path><rect x="60" y="114" width="86" height="22" rx="0" ry="0"></rect><text x="103" y="129">INPUT</text></g><path d="M146 125h10"></path><g><path d="M156 125h0"></path><path d="M274 125h0"></path><path d="M156 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M176 90h78"></path></g><path d="M254 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M156 125h20"></path><g class="terminal"><path d="M176 125h0"></path><path d="M254 125h0"></path><rect x="176" y="114" width="78" height="22" rx="0" ry="0"></rect><text x="215" y="129">FROM</text></g><path d="M254 125h20"></path></g><path d="M274 125h10"></path><g class="non-terminal"><path d="M284 125h0"></path><path d="M370 125h0"></path><rect x="284" y="114" width="86" height="22" rx="8" ry="8"></rect><text x="327" y="129">ds_name</text></g><path d="M370 125h10"></path><g><path d="M380 125h0"></path><path d="M672 125h0"></path><path d="M380 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M400 90h252"></path></g><path d="M652 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M380 125h20"></path><g><path d="M400 125h0"></path><path d="M652 125h0"></path><path d="M400 125h10"></path><g><path d="M410 125h0"></path><path d="M642 125h0"></path><path d="M410 125h20"></path><g><path d="M430 125h0"></path><path d="M622 125h0"></path><g class="terminal"><path d="M430 125h0"></path><path d="M516 125h0"></path><rect x="430" y="114" width="86" height="22" rx="0" ry="0"></rect><text x="473" y="129">,</text></g><path d="M516 125h10"></path><path d="M526 125h10"></path><g class="non-terminal"><path d="M536 125h0"></path><path d="M622 125h0"></path><rect x="536" y="114" width="86" height="22" rx="8" ry="8"></rect><text x="579" y="129">ds_name</text></g></g><path d="M622 125h20"></path></g><path d="M642 125h10"></path><path d="M410 125a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M410 160h232"></path></g><path d="M642 160a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M652 125h20"></path></g></g><path d="M672 125a10 10 0 0 0 10 -10v-50a10 10 0 0 1 10 -10"></path></g><path d="M 692 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Named INPUTs have internal aliases, specific to Operations. In that case, each DS has an explicit role for the calling Operation. Some Operations may have listed some named inputs optional, and for the exact meaning of omitted input please see their respective docs.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1078" height="134" viewBox="0 0 1078 134"><g transform="translate(.5 .5)"><path d="M 20 69 v 20 m 0 -10 h 20.5"></path><g><path d="M40 79h0"></path><path d="M1038 79h0"></path><path d="M40 79h20"></path><g><path d="M60 79h0"></path><path d="M1018 79h0"></path><g class="terminal"><path d="M60 79h0"></path><path d="M146 79h0"></path><rect x="60" y="68" width="86" height="22" rx="0" ry="0"></rect><text x="103" y="83">INPUT</text></g><path d="M146 79h10"></path><path d="M156 79h10"></path><g class="non-terminal"><path d="M166 79h0"></path><path d="M260 79h0"></path><rect x="166" y="68" width="94" height="22" rx="8" ry="8"></rect><text x="213" y="83">ds_alias</text></g><path d="M260 79h10"></path><g><path d="M270 79h0"></path><path d="M388 79h0"></path><path d="M270 79a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M290 44h78"></path></g><path d="M368 44a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M270 79h20"></path><g class="terminal"><path d="M290 79h0"></path><path d="M368 79h0"></path><rect x="290" y="68" width="78" height="22" rx="0" ry="0"></rect><text x="329" y="83">FROM</text></g><path d="M368 79h20"></path></g><path d="M388 79h10"></path><g class="non-terminal"><path d="M398 79h0"></path><path d="M484 79h0"></path><rect x="398" y="68" width="86" height="22" rx="8" ry="8"></rect><text x="441" y="83">ds_name</text></g><path d="M484 79h10"></path><g><path d="M494 79h0"></path><path d="M1018 79h0"></path><path d="M494 79a10 10 0 0 0 10 -10v-39a10 10 0 0 1 10 -10"></path><g><path d="M514 20h484"></path></g><path d="M998 20a10 10 0 0 1 10 10v39a10 10 0 0 0 10 10"></path><path d="M494 79h20"></path><g><path d="M514 79h0"></path><path d="M998 79h0"></path><path d="M514 79h10"></path><g><path d="M524 79h0"></path><path d="M988 79h0"></path><path d="M524 79h20"></path><g><path d="M544 79h0"></path><path d="M968 79h0"></path><g class="terminal"><path d="M544 79h0"></path><path d="M630 79h0"></path><rect x="544" y="68" width="86" height="22" rx="0" ry="0"></rect><text x="587" y="83">,</text></g><path d="M630 79h10"></path><path d="M640 79h10"></path><g class="non-terminal"><path d="M650 79h0"></path><path d="M744 79h0"></path><rect x="650" y="68" width="94" height="22" rx="8" ry="8"></rect><text x="697" y="83">ds_alias</text></g><path d="M744 79h10"></path><g><path d="M754 79h0"></path><path d="M872 79h0"></path><path d="M754 79a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M774 44h78"></path></g><path d="M852 44a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M754 79h20"></path><g class="terminal"><path d="M774 79h0"></path><path d="M852 79h0"></path><rect x="774" y="68" width="78" height="22" rx="0" ry="0"></rect><text x="813" y="83">FROM</text></g><path d="M852 79h20"></path></g><path d="M872 79h10"></path><g class="non-terminal"><path d="M882 79h0"></path><path d="M968 79h0"></path><rect x="882" y="68" width="86" height="22" rx="8" ry="8"></rect><text x="925" y="83">ds_name</text></g></g><path d="M968 79h20"></path></g><path d="M988 79h10"></path><path d="M524 79a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M524 114h464"></path></g><path d="M988 114a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M998 79h20"></path></g></g><path d="M1018 79h20"></path></g><path d="M 1038 79 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Quite unlike SELECT, an Operation may produce a number of resulting DSs. There are 3 distinct varieties of them. <b>Filtered</b> outputs have records internally unchanged from input, but selected according to some set of rules. <b>Augmented</b> outputs extend of otherwise change internal structure of records coming from inputs. Finally, there may be outputs consisting of records, <b>generated</b> from input anew. Please refer to Operation docs for each case.</p>
<p>Positional OUTPUT has meaning similar to positional INPUT. Specified star name is used for setting resulting DSs prefix (with suffixes coming from INPUT names), or a literal list of names is used, if they are comma-separated.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="740" height="180" viewBox="0 0 740 180"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M700 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h87"></path><path d="M593 55h87"></path><g class="terminal"><path d="M147 55h0"></path><path d="M241 55h0"></path><rect x="147" y="44" width="94" height="22" rx="0" ry="0"></rect><text x="194" y="59">OUTPUT</text></g><path d="M241 55h10"></path><g><path d="M251 55h0"></path><path d="M369 55h0"></path><path d="M251 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M271 20h78"></path></g><path d="M349 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M251 55h20"></path><g class="terminal"><path d="M271 55h0"></path><path d="M349 55h0"></path><rect x="271" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="310" y="59">INTO</text></g><path d="M349 55h20"></path></g><path d="M369 55h10"></path><g class="non-terminal"><path d="M379 55h0"></path><path d="M465 55h0"></path><rect x="379" y="44" width="86" height="22" rx="8" ry="8"></rect><text x="422" y="59">ds_name</text></g><path d="M465 55h10"></path><g><path d="M475 55h0"></path><path d="M593 55h0"></path><path d="M475 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M495 20h78"></path></g><path d="M573 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M475 55h20"></path><g class="terminal"><path d="M495 55h0"></path><path d="M573 55h0"></path><rect x="495" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="534" y="59">*</text></g><path d="M573 55h20"></path></g></g><path d="M680 55h20"></path><path d="M40 55a10 10 0 0 1 10 10v50a10 10 0 0 0 10 10"></path><g><path d="M60 125h0"></path><path d="M680 125h0"></path><g class="terminal"><path d="M60 125h0"></path><path d="M154 125h0"></path><rect x="60" y="114" width="94" height="22" rx="0" ry="0"></rect><text x="107" y="129">OUTPUT</text></g><path d="M154 125h10"></path><g><path d="M164 125h0"></path><path d="M282 125h0"></path><path d="M164 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M184 90h78"></path></g><path d="M262 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M164 125h20"></path><g class="terminal"><path d="M184 125h0"></path><path d="M262 125h0"></path><rect x="184" y="114" width="78" height="22" rx="0" ry="0"></rect><text x="223" y="129">INTO</text></g><path d="M262 125h20"></path></g><path d="M282 125h10"></path><g class="non-terminal"><path d="M292 125h0"></path><path d="M378 125h0"></path><rect x="292" y="114" width="86" height="22" rx="8" ry="8"></rect><text x="335" y="129">ds_name</text></g><path d="M378 125h10"></path><g><path d="M388 125h0"></path><path d="M680 125h0"></path><path d="M388 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M408 90h252"></path></g><path d="M660 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M388 125h20"></path><g><path d="M408 125h0"></path><path d="M660 125h0"></path><path d="M408 125h10"></path><g><path d="M418 125h0"></path><path d="M650 125h0"></path><path d="M418 125h20"></path><g><path d="M438 125h0"></path><path d="M630 125h0"></path><g class="terminal"><path d="M438 125h0"></path><path d="M524 125h0"></path><rect x="438" y="114" width="86" height="22" rx="0" ry="0"></rect><text x="481" y="129">,</text></g><path d="M524 125h10"></path><path d="M534 125h10"></path><g class="non-terminal"><path d="M544 125h0"></path><path d="M630 125h0"></path><rect x="544" y="114" width="86" height="22" rx="8" ry="8"></rect><text x="587" y="129">ds_name</text></g></g><path d="M630 125h20"></path></g><path d="M650 125h10"></path><path d="M418 125a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M418 160h232"></path></g><path d="M650 160a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M660 125h20"></path></g></g><path d="M680 125a10 10 0 0 0 10 -10v-50a10 10 0 0 1 10 -10"></path></g><path d="M 700 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Named OUTPUTs are explicitly different, and for each of Operation OUTPUT alias, resulting DS generally is of a specified structure. Some operations may have optional named OUTPUTs.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1086" height="134" viewBox="0 0 1086 134"><g transform="translate(.5 .5)"><path d="M 20 69 v 20 m 0 -10 h 20.5"></path><g><path d="M40 79h0"></path><path d="M1046 79h0"></path><path d="M40 79h20"></path><g><path d="M60 79h0"></path><path d="M1026 79h0"></path><g class="terminal"><path d="M60 79h0"></path><path d="M154 79h0"></path><rect x="60" y="68" width="94" height="22" rx="0" ry="0"></rect><text x="107" y="83">OUTPUT</text></g><path d="M154 79h10"></path><path d="M164 79h10"></path><g class="non-terminal"><path d="M174 79h0"></path><path d="M268 79h0"></path><rect x="174" y="68" width="94" height="22" rx="8" ry="8"></rect><text x="221" y="83">ds_alias</text></g><path d="M268 79h10"></path><g><path d="M278 79h0"></path><path d="M396 79h0"></path><path d="M278 79a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M298 44h78"></path></g><path d="M376 44a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M278 79h20"></path><g class="terminal"><path d="M298 79h0"></path><path d="M376 79h0"></path><rect x="298" y="68" width="78" height="22" rx="0" ry="0"></rect><text x="337" y="83">INTO</text></g><path d="M376 79h20"></path></g><path d="M396 79h10"></path><g class="non-terminal"><path d="M406 79h0"></path><path d="M492 79h0"></path><rect x="406" y="68" width="86" height="22" rx="8" ry="8"></rect><text x="449" y="83">ds_name</text></g><path d="M492 79h10"></path><g><path d="M502 79h0"></path><path d="M1026 79h0"></path><path d="M502 79a10 10 0 0 0 10 -10v-39a10 10 0 0 1 10 -10"></path><g><path d="M522 20h484"></path></g><path d="M1006 20a10 10 0 0 1 10 10v39a10 10 0 0 0 10 10"></path><path d="M502 79h20"></path><g><path d="M522 79h0"></path><path d="M1006 79h0"></path><path d="M522 79h10"></path><g><path d="M532 79h0"></path><path d="M996 79h0"></path><path d="M532 79h20"></path><g><path d="M552 79h0"></path><path d="M976 79h0"></path><g class="terminal"><path d="M552 79h0"></path><path d="M638 79h0"></path><rect x="552" y="68" width="86" height="22" rx="0" ry="0"></rect><text x="595" y="83">,</text></g><path d="M638 79h10"></path><path d="M648 79h10"></path><g class="non-terminal"><path d="M658 79h0"></path><path d="M752 79h0"></path><rect x="658" y="68" width="94" height="22" rx="8" ry="8"></rect><text x="705" y="83">ds_alias</text></g><path d="M752 79h10"></path><g><path d="M762 79h0"></path><path d="M880 79h0"></path><path d="M762 79a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M782 44h78"></path></g><path d="M860 44a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M762 79h20"></path><g class="terminal"><path d="M782 79h0"></path><path d="M860 79h0"></path><rect x="782" y="68" width="78" height="22" rx="0" ry="0"></rect><text x="821" y="83">INTO</text></g><path d="M860 79h20"></path></g><path d="M880 79h10"></path><g class="non-terminal"><path d="M890 79h0"></path><path d="M976 79h0"></path><rect x="890" y="68" width="86" height="22" rx="8" ry="8"></rect><text x="933" y="83">ds_name</text></g></g><path d="M976 79h20"></path></g><path d="M996 79h10"></path><path d="M532 79a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M532 114h464"></path></g><path d="M996 114a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M1006 79h20"></path></g></g><path d="M1026 79h20"></path></g><path d="M 1046 79 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>An Operation may have positional INPUTs and named OUTPUTs, or vice versa.</p>

<h3>ANALYZE Statement</h3>
<p>Performs calculation of basic statistics about the specified DS (or multiple DSs, found by prefix in the star syntax).</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="862" height="86" viewBox="0 0 862 86"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M822 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M802 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M162 55h0"></path><rect x="60" y="44" width="102" height="22" rx="0" ry="0"></rect><text x="111" y="59">ANALYZE</text></g><path d="M162 55h10"></path><g><path d="M172 55h0"></path><path d="M274 55h0"></path><path d="M172 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M192 20h62"></path></g><path d="M254 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M172 55h20"></path><g class="terminal"><path d="M192 55h0"></path><path d="M254 55h0"></path><rect x="192" y="44" width="62" height="22" rx="0" ry="0"></rect><text x="223" y="59">DS</text></g><path d="M254 55h20"></path></g><path d="M274 55h10"></path><g class="non-terminal"><path d="M284 55h0"></path><path d="M370 55h0"></path><rect x="284" y="44" width="86" height="22" rx="8" ry="8"></rect><text x="327" y="59">ds_name</text></g><path d="M370 55h10"></path><g><path d="M380 55h0"></path><path d="M498 55h0"></path><path d="M380 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M400 20h78"></path></g><path d="M478 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M380 55h20"></path><g class="terminal"><path d="M400 55h0"></path><path d="M478 55h0"></path><rect x="400" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="439" y="59">*</text></g><path d="M478 55h20"></path></g><g><path d="M498 55h0"></path><path d="M802 55h0"></path><path d="M498 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M518 20h264"></path></g><path d="M782 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M498 55h20"></path><g><path d="M518 55h0"></path><path d="M782 55h0"></path><path d="M518 55h20"></path><g><path d="M538 55h0"></path><path d="M762 55h0"></path><g class="terminal"><path d="M538 55h0"></path><path d="M608 55h0"></path><rect x="538" y="44" width="70" height="22" rx="0" ry="0"></rect><text x="573" y="59">KEY</text></g><path d="M608 55h10"></path><path d="M618 55h10"></path><g class="non-terminal"><path d="M628 55h0"></path><path d="M762 55h0"></path><rect x="628" y="44" width="134" height="22" rx="8" ry="8"></rect><text x="695" y="59">property_name</text></g></g><path d="M762 55h20"></path></g><path d="M782 55h20"></path></g></g><path d="M802 55h20"></path></g><path d="M 822 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>This statement uses a single selected Attribute as a 'counting key' for statistics. If not set, record's own key always is used automatically. After the 'counting key' is decided, all objects of the DS are iterated, and the following stats are calculated:</p>
<table>
	<thead><tr><th>Statistical indicator</th><th>Meaning</th></tr></thead>
	<tbody>
		<tr><td>_streamName</td><td>DS name</td></tr>
		<tr><td>_streamType</td><td>DS type</td></tr>
		<tr><td>_counterColumn</td><td>Property name set in KEY clause, or NULL if inapplicable</td></tr>
		<tr><td>_totalCount</td><td>Count of objects in the DS, like COUNT * in SQL</td></tr>
		<tr><td>_uniqueCounters</td><td>Number of unique 'counting key' values</td></tr>
		<tr><td>_counterAverage</td><td>Average number of objects per each of unique 'counting key' value</td></tr>
		<tr><td>_counterMedian</td><td>Median number of objects per each of unique 'counting key' value</td></tr>
	</tbody>
	</table>
<p>They are appended to special Columnar DS named '_metrics' as a new record. Its records keys are always names of analyzed DSs.</p>
<p>Because each DS may be TRANSFORMed multiple times in their life cycle, and because ANALYZE may be called another time for a DS (i.e. with different 'counting key'), each successive invocation of ANALYZE for same DS adds new record to '_metrics' DS instead of replacing it.</p>

<h2>Compound Control Flow Statements</h2>
<p>Compond statements have nested statements (including other compound statements) inside their clauses that execute under various conditions in a separate execution context.</p>

<h3>LET Statement</h3>
<p>Defines (or undefines) a new script Variable in the current execution context.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="508" height="154" viewBox="0 0 508 154"><g transform="translate(.5 .5)"><path d="M 20 21 v 20 m 0 -10 h 20.5"></path><g><path d="M40 31h0"></path><path d="M468 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h4"></path><path d="M444 31h4"></path><g class="terminal"><path d="M64 31h0"></path><path d="M134 31h0"></path><rect x="64" y="20" width="70" height="22" rx="0" ry="0"></rect><text x="99" y="35">LET</text></g><path d="M134 31h10"></path><path d="M144 31h10"></path><g class="non-terminal"><path d="M154 31h0"></path><path d="M248 31h0"></path><rect x="154" y="20" width="94" height="22" rx="8" ry="8"></rect><text x="201" y="35">var_name</text></g><path d="M248 31h10"></path><path d="M258 31h10"></path><g class="terminal"><path d="M268 31h0"></path><path d="M330 31h0"></path><rect x="268" y="20" width="62" height="22" rx="0" ry="0"></rect><text x="299" y="35">=</text></g><path d="M330 31h10"></path><path d="M340 31h10"></path><g class="non-terminal"><path d="M350 31h0"></path><path d="M444 31h0"></path><rect x="350" y="20" width="94" height="22" rx="8" ry="8"></rect><text x="397" y="35">let_expr</text></g></g><path d="M448 31h20"></path><path d="M40 31a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M60 77h16"></path><path d="M432 77h16"></path><g class="terminal"><path d="M76 77h0"></path><path d="M146 77h0"></path><rect x="76" y="66" width="70" height="22" rx="0" ry="0"></rect><text x="111" y="81">LET</text></g><path d="M146 77h10"></path><path d="M156 77h10"></path><g class="non-terminal"><path d="M166 77h0"></path><path d="M260 77h0"></path><rect x="166" y="66" width="94" height="22" rx="8" ry="8"></rect><text x="213" y="81">var_name</text></g><path d="M260 77h10"></path><path d="M270 77h10"></path><g class="terminal"><path d="M280 77h0"></path><path d="M342 77h0"></path><rect x="280" y="66" width="62" height="22" rx="0" ry="0"></rect><text x="311" y="81">=</text></g><path d="M342 77h10"></path><path d="M352 77h10"></path><g class="non-terminal"><path d="M362 77h0"></path><path d="M432 77h0"></path><rect x="362" y="66" width="70" height="22" rx="8" ry="8"></rect><text x="397" y="81">array</text></g></g><path d="M448 77a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v72a10 10 0 0 0 10 10"></path><g><path d="M60 123h0"></path><path d="M448 123h0"></path><g class="terminal"><path d="M60 123h0"></path><path d="M130 123h0"></path><rect x="60" y="112" width="70" height="22" rx="0" ry="0"></rect><text x="95" y="127">LET</text></g><path d="M130 123h10"></path><path d="M140 123h10"></path><g class="non-terminal"><path d="M150 123h0"></path><path d="M244 123h0"></path><rect x="150" y="112" width="94" height="22" rx="8" ry="8"></rect><text x="197" y="127">var_name</text></g><path d="M244 123h10"></path><path d="M254 123h10"></path><g class="terminal"><path d="M264 123h0"></path><path d="M326 123h0"></path><rect x="264" y="112" width="62" height="22" rx="0" ry="0"></rect><text x="295" y="127">=</text></g><path d="M326 123h10"></path><path d="M336 123h10"></path><g class="non-terminal"><path d="M346 123h0"></path><path d="M448 123h0"></path><rect x="346" y="112" width="102" height="22" rx="8" ry="8"></rect><text x="397" y="127">sub_query</text></g></g><path d="M448 123a10 10 0 0 0 10 -10v-72a10 10 0 0 1 10 -10"></path></g><path d="M 468 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Simple expression of a Variable is same as of a parameter expression, as well as simple Array definition. If expression result is NULL, Variable is removed from the context.</p>
<p>Arrays may be returned as results from the limited SELECT query:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1292" height="86" viewBox="0 0 1292 86"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M1252 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M1232 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M154 55h0"></path><rect x="60" y="44" width="94" height="22" rx="0" ry="0"></rect><text x="107" y="59">SELECT</text></g><path d="M154 55h10"></path><g><path d="M164 55h0"></path><path d="M314 55h0"></path><path d="M164 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M184 20h110"></path></g><path d="M294 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M164 55h20"></path><g class="terminal"><path d="M184 55h0"></path><path d="M294 55h0"></path><rect x="184" y="44" width="110" height="22" rx="0" ry="0"></rect><text x="239" y="59">DISTINCT</text></g><path d="M294 55h20"></path></g><path d="M314 55h10"></path><g class="non-terminal"><path d="M324 55h0"></path><path d="M426 55h0"></path><rect x="324" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="375" y="59">what_expr</text></g><path d="M426 55h10"></path><path d="M436 55h10"></path><g class="terminal"><path d="M446 55h0"></path><path d="M524 55h0"></path><rect x="446" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="485" y="59">FROM</text></g><path d="M524 55h10"></path><path d="M534 55h10"></path><g class="non-terminal"><path d="M544 55h0"></path><path d="M630 55h0"></path><rect x="544" y="44" width="86" height="22" rx="8" ry="8"></rect><text x="587" y="59">ds_name</text></g><path d="M630 55h10"></path><g><path d="M640 55h0"></path><path d="M936 55h0"></path><path d="M640 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M660 20h256"></path></g><path d="M916 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M640 55h20"></path><g><path d="M660 55h0"></path><path d="M916 55h0"></path><path d="M660 55h20"></path><g><path d="M680 55h0"></path><path d="M896 55h0"></path><g class="terminal"><path d="M680 55h0"></path><path d="M766 55h0"></path><rect x="680" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="723" y="59">WHERE</text></g><path d="M766 55h10"></path><path d="M776 55h10"></path><g class="non-terminal"><path d="M786 55h0"></path><path d="M896 55h0"></path><rect x="786" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="841" y="59">where_expr</text></g></g><path d="M896 55h20"></path></g><path d="M916 55h20"></path></g><g><path d="M936 55h0"></path><path d="M1232 55h0"></path><path d="M936 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M956 20h256"></path></g><path d="M1212 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M936 55h20"></path><g><path d="M956 55h0"></path><path d="M1212 55h0"></path><path d="M956 55h20"></path><g><path d="M976 55h0"></path><path d="M1192 55h0"></path><g class="terminal"><path d="M976 55h0"></path><path d="M1062 55h0"></path><rect x="976" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="1019" y="59">LIMIT</text></g><path d="M1062 55h10"></path><path d="M1072 55h10"></path><g class="non-terminal"><path d="M1082 55h0"></path><path d="M1192 55h0"></path><rect x="1082" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="1137" y="59">limit_expr</text></g></g><path d="M1192 55h20"></path></g><path d="M1212 55h20"></path></g></g><path d="M1232 55h20"></path></g><path d="M 1252 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>There are a few differences from a regular SELECT query. First, only one DS must be queried (no JOINs nor UNIONs are allowed). Second, only one expression in the what-to-select list is allowed. Non-Numeric results will be stringified, because arrays don't support data types other than Numerics and Strings. Query constraints do work as expected.</p>

<h3>IF Statement</h3>
<p>Performs control flow branching. Evaluates a Boolean expression, and executes statements nested in THEN clause for TRUE. Otherwise, executes statements in ELSE clause, if it is present, or just does nothing.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="998" height="86" viewBox="0 0 998 86"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M958 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M938 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M122 55h0"></path><rect x="60" y="44" width="62" height="22" rx="0" ry="0"></rect><text x="91" y="59">IF</text></g><path d="M122 55h10"></path><path d="M132 55h10"></path><g class="non-terminal"><path d="M142 55h0"></path><path d="M236 55h0"></path><rect x="142" y="44" width="94" height="22" rx="8" ry="8"></rect><text x="189" y="59">let_expr</text></g><path d="M236 55h10"></path><path d="M246 55h10"></path><g class="terminal"><path d="M256 55h0"></path><path d="M334 55h0"></path><rect x="256" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="295" y="59">THEN</text></g><path d="M334 55h10"></path><path d="M344 55h10"></path><g class="non-terminal"><path d="M354 55h0"></path><path d="M456 55h0"></path><rect x="354" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="405" y="59">then_item</text></g><path d="M456 55h10"></path><g><path d="M466 55h0"></path><path d="M746 55h0"></path><path d="M466 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M486 20h240"></path></g><path d="M726 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M466 55h20"></path><g><path d="M486 55h0"></path><path d="M726 55h0"></path><path d="M486 55h20"></path><g><path d="M506 55h0"></path><path d="M706 55h0"></path><g class="terminal"><path d="M506 55h0"></path><path d="M584 55h0"></path><rect x="506" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="545" y="59">ELSE</text></g><path d="M584 55h10"></path><path d="M594 55h10"></path><g class="non-terminal"><path d="M604 55h0"></path><path d="M706 55h0"></path><rect x="604" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="655" y="59">else_item</text></g></g><path d="M706 55h20"></path></g><path d="M726 55h20"></path></g><path d="M746 55h10"></path><g class="terminal"><path d="M756 55h0"></path><path d="M826 55h0"></path><rect x="756" y="44" width="70" height="22" rx="0" ry="0"></rect><text x="791" y="59">END</text></g><path d="M826 55h10"></path><g><path d="M836 55h0"></path><path d="M938 55h0"></path><path d="M836 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M856 20h62"></path></g><path d="M918 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M836 55h20"></path><g class="terminal"><path d="M856 55h0"></path><path d="M918 55h0"></path><rect x="856" y="44" width="62" height="22" rx="0" ry="0"></rect><text x="887" y="59">IF</text></g><path d="M918 55h20"></path></g></g><path d="M938 55h20"></path></g><path d="M 958 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Nested statements in either branches can be any number of TDL4 statements (even none):</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="420" height="110" viewBox="0 0 420 110"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M380 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M360 55h0"></path><g><path d="M60 55h0"></path><path d="M360 55h0"></path><path d="M60 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M80 20h260"></path></g><path d="M340 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M60 55h20"></path><g><path d="M80 55h0"></path><path d="M340 55h0"></path><path d="M80 55h10"></path><g><path d="M90 55h0"></path><path d="M330 55h0"></path><path d="M90 55h20"></path><g><path d="M110 55h0"></path><path d="M310 55h0"></path><g class="non-terminal"><path d="M110 55h0"></path><path d="M212 55h0"></path><rect x="110" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="161" y="59">statement</text></g><path d="M212 55h10"></path><path d="M222 55h10"></path><g class="terminal"><path d="M232 55h0"></path><path d="M310 55h0"></path><rect x="232" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="271" y="59">;</text></g></g><path d="M310 55h20"></path></g><path d="M330 55h10"></path><path d="M90 55a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M90 90h240"></path></g><path d="M330 90a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M340 55h20"></path></g></g><path d="M360 55h20"></path></g><path d="M 380 55 h 20 m 0 -10 v 20"></path></g></svg></div>

<h3>LOOP Statement</h3>
<p>Executes statements nested in BEGN clause as many times as number values in the array, each time setting loop Variable to next value. If expression evaluates to NULL or array is empty, and ELSE clause is present, its nested statements will be executed once instead.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1254" height="156" viewBox="0 0 1254 156"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M1214 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h12"></path><path d="M1182 55h12"></path><g class="terminal"><path d="M72 55h0"></path><path d="M150 55h0"></path><rect x="72" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="111" y="59">LOOP</text></g><path d="M150 55h10"></path><path d="M160 55h10"></path><g class="non-terminal"><path d="M170 55h0"></path><path d="M264 55h0"></path><rect x="170" y="44" width="94" height="22" rx="8" ry="8"></rect><text x="217" y="59">var_name</text></g><path d="M264 55h10"></path><g><path d="M274 55h0"></path><path d="M376 55h0"></path><path d="M274 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M294 20h62"></path></g><path d="M356 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M274 55h20"></path><g class="terminal"><path d="M294 55h0"></path><path d="M356 55h0"></path><rect x="294" y="44" width="62" height="22" rx="0" ry="0"></rect><text x="325" y="59">IN</text></g><path d="M356 55h20"></path></g><path d="M376 55h10"></path><g class="non-terminal"><path d="M386 55h0"></path><path d="M456 55h0"></path><rect x="386" y="44" width="70" height="22" rx="8" ry="8"></rect><text x="421" y="59">array</text></g><path d="M456 55h10"></path><path d="M466 55h10"></path><g class="terminal"><path d="M476 55h0"></path><path d="M562 55h0"></path><rect x="476" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="519" y="59">BEGIN</text></g><path d="M562 55h10"></path><path d="M572 55h10"></path><g class="non-terminal"><path d="M582 55h0"></path><path d="M684 55h0"></path><rect x="582" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="633" y="59">then_item</text></g><path d="M684 55h10"></path><g><path d="M694 55h0"></path><path d="M974 55h0"></path><path d="M694 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M714 20h240"></path></g><path d="M954 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M694 55h20"></path><g><path d="M714 55h0"></path><path d="M954 55h0"></path><path d="M714 55h20"></path><g><path d="M734 55h0"></path><path d="M934 55h0"></path><g class="terminal"><path d="M734 55h0"></path><path d="M812 55h0"></path><rect x="734" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="773" y="59">ELSE</text></g><path d="M812 55h10"></path><path d="M822 55h10"></path><g class="non-terminal"><path d="M832 55h0"></path><path d="M934 55h0"></path><rect x="832" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="883" y="59">else_item</text></g></g><path d="M934 55h20"></path></g><path d="M954 55h20"></path></g><path d="M974 55h10"></path><g class="terminal"><path d="M984 55h0"></path><path d="M1054 55h0"></path><rect x="984" y="44" width="70" height="22" rx="0" ry="0"></rect><text x="1019" y="59">END</text></g><path d="M1054 55h10"></path><g><path d="M1064 55h0"></path><path d="M1182 55h0"></path><path d="M1064 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M1084 20h78"></path></g><path d="M1162 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M1064 55h20"></path><g class="terminal"><path d="M1084 55h0"></path><path d="M1162 55h0"></path><rect x="1084" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="1123" y="59">LOOP</text></g><path d="M1162 55h20"></path></g></g><path d="M1194 55h20"></path><path d="M40 55a10 10 0 0 1 10 10v50a10 10 0 0 0 10 10"></path><g><path d="M60 125h0"></path><path d="M1194 125h0"></path><g class="terminal"><path d="M60 125h0"></path><path d="M138 125h0"></path><rect x="60" y="114" width="78" height="22" rx="0" ry="0"></rect><text x="99" y="129">LOOP</text></g><path d="M138 125h10"></path><path d="M148 125h10"></path><g class="non-terminal"><path d="M158 125h0"></path><path d="M252 125h0"></path><rect x="158" y="114" width="94" height="22" rx="8" ry="8"></rect><text x="205" y="129">var_name</text></g><path d="M252 125h10"></path><g><path d="M262 125h0"></path><path d="M364 125h0"></path><path d="M262 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M282 90h62"></path></g><path d="M344 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M262 125h20"></path><g class="terminal"><path d="M282 125h0"></path><path d="M344 125h0"></path><rect x="282" y="114" width="62" height="22" rx="0" ry="0"></rect><text x="313" y="129">IN</text></g><path d="M344 125h20"></path></g><path d="M364 125h10"></path><g class="non-terminal"><path d="M374 125h0"></path><path d="M468 125h0"></path><rect x="374" y="114" width="94" height="22" rx="8" ry="8"></rect><text x="421" y="129">var_name</text></g><path d="M468 125h10"></path><path d="M478 125h10"></path><g class="terminal"><path d="M488 125h0"></path><path d="M574 125h0"></path><rect x="488" y="114" width="86" height="22" rx="0" ry="0"></rect><text x="531" y="129">BEGIN</text></g><path d="M574 125h10"></path><path d="M584 125h10"></path><g class="non-terminal"><path d="M594 125h0"></path><path d="M696 125h0"></path><rect x="594" y="114" width="102" height="22" rx="8" ry="8"></rect><text x="645" y="129">then_item</text></g><path d="M696 125h10"></path><g><path d="M706 125h0"></path><path d="M986 125h0"></path><path d="M706 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M726 90h240"></path></g><path d="M966 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M706 125h20"></path><g><path d="M726 125h0"></path><path d="M966 125h0"></path><path d="M726 125h20"></path><g><path d="M746 125h0"></path><path d="M946 125h0"></path><g class="terminal"><path d="M746 125h0"></path><path d="M824 125h0"></path><rect x="746" y="114" width="78" height="22" rx="0" ry="0"></rect><text x="785" y="129">ELSE</text></g><path d="M824 125h10"></path><path d="M834 125h10"></path><g class="non-terminal"><path d="M844 125h0"></path><path d="M946 125h0"></path><rect x="844" y="114" width="102" height="22" rx="8" ry="8"></rect><text x="895" y="129">else_item</text></g></g><path d="M946 125h20"></path></g><path d="M966 125h20"></path></g><path d="M986 125h10"></path><g class="terminal"><path d="M996 125h0"></path><path d="M1066 125h0"></path><rect x="996" y="114" width="70" height="22" rx="0" ry="0"></rect><text x="1031" y="129">END</text></g><path d="M1066 125h10"></path><g><path d="M1076 125h0"></path><path d="M1194 125h0"></path><path d="M1076 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M1096 90h78"></path></g><path d="M1174 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M1076 125h20"></path><g class="terminal"><path d="M1096 125h0"></path><path d="M1174 125h0"></path><rect x="1096" y="114" width="78" height="22" rx="0" ry="0"></rect><text x="1135" y="129">LOOP</text></g><path d="M1174 125h20"></path></g></g><path d="M1194 125a10 10 0 0 0 10 -10v-50a10 10 0 0 1 10 -10"></path></g><path d="M 1214 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>If there was an existing Variable with same name as loop Variable in the outer context, it will be restored to its prevoius value, because LOOP creates a new nested context.</p>

<h2>Settings Statements</h2>

<h3>OPTIONS Statement</h3>
<p>Sets internal Data Cooker parameters to specified values.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="360" height="62" viewBox="0 0 360 62"><g transform="translate(.5 .5)"><path d="M 20 21 v 20 m 0 -10 h 20.5"></path><g><path d="M40 31h0"></path><path d="M320 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><path d="M300 31h0"></path><g class="terminal"><path d="M60 31h0"></path><path d="M162 31h0"></path><rect x="60" y="20" width="102" height="22" rx="0" ry="0"></rect><text x="111" y="35">OPTIONS</text></g><path d="M162 31h10"></path><path d="M172 31h10"></path><g class="non-terminal"><path d="M182 31h0"></path><path d="M300 31h0"></path><rect x="182" y="20" width="118" height="22" rx="8" ry="8"></rect><text x="241" y="35">params_expr</text></g></g><path d="M300 31h20"></path></g><path d="M 320 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Unlike all other statements, Data Cooker pulls all OPTIONS to topmost execution context and executes them once, before evaluating all other script contents. They are completely ignored thereafter, in the normal script execution flow.</p>
<p>Parameters, that may be set by OPTIONS, is dependent on Data Cooker distribution and version, so please see a dedicated doc in the distribution for exact definitions.</p>

</body></html>