<!doctype html>
<html lang="en">
<head>
	<title>TDL4 Specification</title>
<style>
* {
	font-family: Calibri, Arial, sans-serif;
}

body {
	max-width: 1000px;
	margin: auto;
}

p {
	margin: 1em auto;
}

table {
	border: #9cc2e5 1px solid;
	border-collapse: collapse;
	width: 100%;
	margin: 1em auto;
	min-width: 500px;
}

thead {
	border-bottom: #9cc2e5 3px solid;
}

td, th {
	padding-left: 2px;
	padding-right: 2px;
	border: #9cc2e5 1px solid;
	text-align: left;
	vertical-align: top;
}

h1, h2, h3, h4 {
	color: #3e7ebb;
	margin: 1em auto 0.3em;
}

div.hor-scroll {
	width : 100%;
	overflow-x: auto;
}

a {
	color: #3e7ebb;
}

a.toc {
	font-size: x-small;
	text-decoration: none;
	vertical-align: super;
}

svg {
    flex: 1;
}

svg.railroad-diagram path {
    stroke-width: 1.25;
    stroke: #9cc2e5;
    fill: rgba(0, 0, 0, 0);
}

svg.railroad-diagram text {
    text-anchor: middle;
    fill: #404040;
}

svg.railroad-diagram g.terminal text {
    font-weight: bold;
}

svg.railroad-diagram g.non-terminal rect {
    stroke-width: 1;
    stroke: #9cc2e5;
    fill: rgba(255, 255, 255, 1);
}

svg.railroad-diagram g.terminal rect {
	stroke-width: 1;
    stroke: #9cc2e5;
    fill: rgba(255, 255, 255, 1);
}
</style>
</head>

<body>
<h1>Transform Definition Language</h1>
<p>Version 4 release 4.4, January 2025</p>

<h2 id="TOC">Table of Contents</h2>
<p>
<a href="#General">General Description</a><br>
<a href="#DS">DS</a><br>
	··· <a href="#DSPart">DS Partitioning</a><br>
	··· <a href="#DSLife">DS Life Cycle</a><br>
··· ··· <a href="#Create">Create DS</a><br>
··· ··· <a href="#Transform">Transform DS</a><br>
··· ··· <a href="#Store">Store DS</a><br>
<a href="#Type">Type System</a><br>
··· <a href="#DSTypes">DS Types</a><br>
··· ··· <a href="#PlainText">PlainText</a><br>
··· ··· <a href="#Structured">Structured</a><br>
··· ··· <a href="#Passthru">Passthru</a><br>
··· ··· <a href="#Columnar">Columnar</a><br>
··· ··· <a href="#Spatial">Spatial DS Types</a><br>
··· ··· ··· <a href="#Point">Point</a><br>
··· ··· ··· <a href="#Track">Track</a><br>
··· ··· ··· <a href="#Polygon">Polygon</a><br>
··· <a href="#Attribute">Attribute, Variable, and Parameter Types</a><br>
··· ··· <a href="#Names">Names</a><br>
··· ··· <a href="#String">String Literals</a><br>
··· ··· <a href="#Numerics">Numerics </a><br>
··· ··· <a href="#Boolean">Boolean Type</a><br>
··· ··· <a href="#NULL">NULL</a><br>
··· ··· <a href="#Arrays">Arrays</a><br>
··· <a href="#Custom">Custom Object Types</a><br>
<a href="#Script">Script Structure</a><br>
··· <a href="#Top">Top-level Structure</a><br>
··· <a href="#Expressions">Expressions</a><br>
··· ··· <a href="#Automatic">Automatic Evaluation in Strings and Names</a><br>
··· ··· <a href="#ExpressionOperators">Expression Operators</a><br>
··· ··· <a href="#ExpressionFunctions">Expression Functions</a><br>
··· <a href="#Parameter">Parameter List Expressions</a><br>
<a href="#DataStorage">Data Storage Interface Statements</a><br>
··· <a href="#CREATEDS">CREATE DS Statement</a><br>
··· <a href="#COPY">COPY DS Statement</a><br>
<a href="#DataTransformation">Data Transformation Statements</a><br>
··· <a href="#TRANSFORMDS">TRANSFORM DS Statement</a><br>
<a href="#DataManipulation">Data Manipulation Statements</a><br>
··· <a href="#SELECT">SELECT Statement</a><br>
··· <a href="#CALL">CALL Statement</a><br>
··· <a href="#ANALYZE">ANALYZE Statement</a><br>
···	··· <a href="#PARTITION">Per-partition</a><br>
<a href="#Compound">Compound Control Flow Statements</a><br>
··· <a href="#LET">LET Statement</a><br>
··· <a href="#IF">IF Statement</a><br>
··· <a href="#LOOP">LOOP Statement</a><br>
··· <a href="#CREATEPROC">CREATE PROCEDURE Statement</a><br>
··· <a href="#DROPPROC">DROP PROCEDURE Statement</a><br>
<a href="#Settings">Settings Statements</a><br>
··· <a href="#OPTIONS">OPTIONS Statement</a><br>
</p>

<h2 id="General">General Description <a class="toc" href="#TOC">↑</a></h2>
<p>Transform Definition Language version 4 (TDL4) is a domain-specific language designed to describe ETL processes to perform with Data Cooker ETL tool. The strongest emphasis is on the Transformation phase.</p>
<p>Syntax of TDL4 is inspired by and based on SQL, but has substantial semantic differences due to Data Cooker's differences from traditional RDBMS. Instead of SQL tables that consist of column-based rows, Data Cooker operates with strongly typed collections of Record Objects called 'DS' (for Data Sets / Data Streams). Also, Transformation phase of ETL does not imply analytic workloads or complex data manipulation that traditional SQL facilities usually provide.</p>
<p>As an SQL dialect, TDL4 is mainly declarative but also has substantial means of flow control, and even procedural elements.</p>
<p>Another difference from SQL engines is that Data Cooker doesn't require global data catalog nor information schema. A rudimentary partial schema is defined ad hoc by language statements only if required by current context. It doesn't imply control over data types, nor integrity, neither consistency, neither enforces data constraints.</p>
<p>TDL4 allows high level manipulation over DSs as a whole, and intentionally omits features like aggregation, window functions, and anything that reduces several records of given DS to a single value. Only record-level expression evaluations for record attributes are provided by SELECT and similar statements. Those Expression Operators and Functions are implemented as Java classes and thus are extensible.</p>
<p>At the same time, Data Cooker's language interpreter also does provide built-in support for pluggable 'Operations' and 'Transforms' to allow more complex manipulations with DS written in Java. By implementing an Operation interface, developers are allowed to seamlessly integrate custom logic into ETL processes, including generation of new DS and changing data inside of them as they like. With Transforms, it is possible to change type of DS Record Objects.</p>
<p>Another level of extensibility is provided by 'Storage Adapters' layer of plug-ins that covers Extract and Load phases of ETL processing.</p>
<p>TDL4 does have specific type system, customized for DS that contain not only relatively flat Records, but also complex Spatial Objects with embedded geometry data, because Data Cooker's heritage begins from a geo-informatic processing toolchain.</p>

<h2 id="DS">DS <a class="toc" href="#TOC">↑</a></h2>
<p>In terms of Data Cooker, a DS (short for Data Stream and/or Data Set) is a basic entity of every ETL process.</p>
<p>DS is a typed collection of Objects, that may have or not complex type-dependent internal structure, and/or a set of simple Attributes, accessible from the ETL process by Names. Each Object together with a Key (which may be opaque value or even another Object) form an elementary unit of processing, the Record.</p>

<h3 id="DSPart">DS Partitioning <a class="toc" href="#TOC">↑</a></h3>
<p>DSs are partitioned — split into chunks called Partitions, to balance the load of Spark executors because they process a single Partition at a time. Number of Partitions in most cases must be set manually, but if not, it'll be defined by Input Adapter using intrinsic properties of data source and execution environment.</p>
<p>Records are assigned to Partitions by hash codes of their Keys. Correct definition of Keys is crucial to avoid 'data skew' (a situation when a small number of Partitions contain most of the records while all others are empty).</p>
<p>In most cases, Data Cooker allows consumption of a DS either as a whole or as a subset of Partitions (from single part to all). If that subset is specified, new DS is transparently created from the parent one on the fly. For efficient processing on Partition basis, Keys must be stable and have a uniform distribution across entire DS.</p>

<h3 id="DSLife">DS Life Cycle <a class="toc" href="#TOC">↑</a></h3>
<p>According to definition of ETL, DSs can be created (once), transformed (many times), and stored (several times).</p>
<p>In Data Cooker, a DS can be created by several means from the external source of data or from other existing DSs.</p>

<h4 id="Create">Create DS <a class="toc" href="#TOC">↑</a></h4>
<p><b>Create method #1.</b> Input Adapters extract data from the data source, which could be some object or file-based storage, a traditional database, or something else. Each Input Adapter supports creation of a single type of DS, but may support different data sources.</p>
<p>Initial Key of newly created Record is set by Input Adapter, then DS is partitioned using those initial keys. Rules for a concrete Input Adapter are documented by its developer.</p>
<p><b>Method #2.</b> A DS can be derived from one or many existing by performing an SQL-like SELECT query. Type and partitioning of a derived DS is inherited from parent DSs. See SELECT section of this manual for details.</p>
<p><b>Method #3</b> to create a DS is to call an Operation that generates new DS from existing ones using its own rules. There are some common patterns described below in the CALL section, but exact rules are documented by the developer of the Operation.</p>

<h4 id="Transform">Transform DS <a class="toc" href="#TOC">↑</a></h4>
<p>After DS is created, it may be <b>transformed</b> by Transforms, changing its Record type and/or Key, as well as number of Partitions. Number of objects can also change if one source object corresponds to many resulting ones and vice versa. There can be performed as many consecutive Transforms on a given DS as needed. As Transforms are pluggable, transformation rules are documented by developer.</p>
<p>If Record Keys are changed by applying a Transform, affected Records may be assigned to other Partitions, if needed.</p>

<h4 id="Store">Store DS <a class="toc" href="#TOC">↑</a></h4>
<p>Final step of DS's life cycle is <b>storage</b> to some external data store, performed by Output Adapter. An Output Adapter may store different types of DSs into different formats. Rules, as usual, are documented by developer.</p>

<h2 id="Type">Type System <a class="toc" href="#TOC">↑</a></h2>
<p>Differing from SQL, TDL4 data types are defined first on the level of DS as a whole for each Record Object, and then by level of Record Attributes and language constructs.</p>

<h3 id="DSTypes">DS Types <a class="toc" href="#TOC">↑</a></h3>
<p>Record Objects may have or not an internal structure, and if Record Object type does allow Attributes, each Attribute type is dynamically coalesced to match the context of expression that references it, if possible.</p>
<p>Supported types are:</p>
<ul>
	<li>General purpose:
<ul>
	<li><b>PlainText</b> — unstructured data. Each object is just array of bytes, treated in most cases as plain text in system encoding (most likely, UTF8). Does not have Attributes.</li>
	<li><b>Structured</b> data records map arbitrary property names to their respective values, or an array of values, where any property may be a map or array itself (even the topmost object). Treat this data type as generic JSON data. Record Attributes expose all properties for reading, but only top-level ones for writing.</li>
	<li><b>Passthru</b> is a special type that marks DS's type as 'unchanged during the transformation'.</li>
</ul>
	</li>
	<li>Column-based data:
		<ul>
<li><b>Columnar</b> — each object is a flat record that consists from a fixed number of directly named 'columns', fully accessible via Attributes.</li>
		</ul>
	</li>
	<li>Spatial / Geometric data:
<ul>
	<li><b>Point</b> — each object represents a Point on a map with optional radius, and a set of arbitrarily named properties accessible via Attributes.</li>
	<li><b>Track</b> — each object is a collection of regular Points (with 3rd-level Attributes), organized into Segments. Track and Segments also may have their own arbitrarily named properties (accessible via top-level and 2nd-level Attributes).</li>
	<li><b>Polygon</b> — each object represents a Polygon on a map, but without direct access to its vertices. Polygon may have holes. It may have a set of arbitrarily named properties too accessible via Attributes.</li>
</ul>
	</li>
</ul>

<h4 id="PlainText">PlainText <a class="toc" href="#TOC">↑</a></h4>
<p>After loading a DS from unstructured text source, each line is represented as text in the system encoding (usually, UTF8), or byte array. Before performing meaningful transformations on the data contained in that set, it should be converted to another, structured type.</p>
<p>Vice versa, before saving structured DSs to text-based file formats, it should be converted to PlainText.</p>

<h4 id="Structured">Structured <a class="toc" href="#TOC">↑</a></h4>
<p>Each object of a Structured DS is backed by a JSON representation, so it can be as arbitrary as it fits within JSON limitations. Namely, String, Numeric, Boolean, an NULL properties are supported, as well as homogenous arrays (with every member of same type). Top level object may be an array itself.</p>
<p>Each top-level property is an Attribute itself (read-write), and nested properties' Attribute names are compound (read only). They may include array index or range part too.</p>

<h4 id="Passthru">Passthru <a class="toc" href="#TOC">↑</a></h4>
<p>This type is not a data type per se, but just a marker reported from API calls to plugin Transforms that means it doesn't change data type in the set.</p>

<h4 id="Columnar">Columnar <a class="toc" href="#TOC">↑</a></h4>
<p>Each object of DS of that type is a record consisting of uniquely named columns, enumerated in the specified order. After enumerated, they can be accessed via Attributes of same name.</p>
<p>Data in the column doesn't have an explicit type, nor it has any metadata except name. Columns, omitted from the record, have automatically assigned NULL values.</p>

<h4 id="Spatial">Spatial DS Types <a class="toc" href="#TOC">↑</a></h4>
<p>Because Data Cooker inherited preceding project legacy which was a geo-informatics project, TDL4 natively supports geometry-specific Spatial data types implemented as extensions to JTS Topology Suite and GeoJSON.</p>

<h4 id="Point">Point <a class="toc" href="#TOC">↑</a></h4>
<p>Objects of that type are abstractions of Points a map with an optional set of arbitrary Attributes.</p>
<p>Being an extension of JTS Point, each object has mandatory internal attributes of geographic 'latitude' and 'longitude'.</p>

<h4 id="Track">Track <a class="toc" href="#TOC">↑</a></h4>
<p>Object of a Track is an abstraction of a route traveled by some physical object over the real-world map. It consists of Points, grouped together by an appointed 'tracking' Attribute, and sorted by another 'timestamp' Attribute, optionally cut into segments by 'segmentation' Attribute. If segmentation Attribute is not defined, there still be a single segment that includes all points of a track.</p>
<p>Each level of nested objects (Track, Segments, Points) may have an arbitrary number of other named Attributes.</p>

<h4 id="Polygon">Polygon <a class="toc" href="#TOC">↑</a></h4>
<p>A region on a map, defined as a collection of a single external border outline and any number of internal cut-out outlines, with an arbitrary number of other named attributes.</p>
<p>There is no direct access to vertices of Polygon outlines, but there is an automatically computed Centroid Point, with radius set to its most distant border vertex.</p>

<h3 id="Attribute">Attribute, Variable, and Parameter Types <a class="toc" href="#TOC">↑</a></h3>
<p>Outside DSs, there are also script-level Variables, and Expression- / Pluggable Entity-level Parameters, that may have their own types, more or less similar to SQL: Names, String, Numeric, Boolean, NULL, and Arrays.</p>
<p>Simple literals are defined like this:</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="236.5" height="214" viewBox="0 0 236.5 214" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g transform="translate(.5 .5)"><g><path d="M20 21v20m0 -10h20"></path></g><g><path d="M40 31h0"></path><path d="M196.5 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h4.25"></path><g><path d="M64.25 31h10"></path><path d="M162.25 31h10"></path><g class="terminal "><path d="M74.25 31h0"></path><path d="M162.25 31h0"></path><rect x="74.25" y="20" width="88" height="22"></rect><text x="118.25" y="35">String</text></g></g><path d="M172.25 31h4.25"></path></g><path d="M176.5 31h20"></path><path d="M40 31a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M60 69h0"></path><g><path d="M60 69h10"></path><path d="M166.5 69h10"></path><g class="terminal "><path d="M70 69h0"></path><path d="M166.5 69h0"></path><rect x="70" y="58" width="96.5" height="22"></rect><text x="118.25" y="73">Numeric</text></g></g><path d="M176.5 69h0"></path></g><path d="M176.5 69a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v56a10 10 0 0 0 10 10"></path><g><path d="M60 107h12.75"></path><g><path d="M72.75 107h10"></path><path d="M153.75 107h10"></path><g class="terminal "><path d="M82.75 107h0"></path><path d="M153.75 107h0"></path><rect x="82.75" y="96" width="71" height="22"></rect><text x="118.25" y="111">TRUE</text></g></g><path d="M163.75 107h12.75"></path></g><path d="M176.5 107a10 10 0 0 0 10 -10v-56a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v94a10 10 0 0 0 10 10"></path><g><path d="M60 145h8.5"></path><g><path d="M68.5 145h10"></path><path d="M158 145h10"></path><g class="terminal "><path d="M78.5 145h0"></path><path d="M158 145h0"></path><rect x="78.5" y="134" width="79.5" height="22"></rect><text x="118.25" y="149">FALSE</text></g></g><path d="M168 145h8.5"></path></g><path d="M176.5 145a10 10 0 0 0 10 -10v-94a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v132a10 10 0 0 0 10 10"></path><g><path d="M60 183h12.75"></path><g><path d="M72.75 183h10"></path><path d="M153.75 183h10"></path><g class="terminal "><path d="M82.75 183h0"></path><path d="M153.75 183h0"></path><rect x="82.75" y="172" width="71" height="22"></rect><text x="118.25" y="187">NULL</text></g></g><path d="M163.75 183h12.75"></path></g><path d="M176.5 183a10 10 0 0 0 10 -10v-132a10 10 0 0 1 10 -10"></path></g><path d="M 196.5 31 h 20 m 0 -10 v 20"></path></g></svg></div>

<h4 id="Names">Names <a class="toc" href="#TOC">↑</a></h4>
<p>Names are used to define and identify any entities that have to be referred to in the script, i.e. DSs, Attributes, Parameters, Variables, and so on.</p>
<p>Canonical representation of a Name is a string of Latin alphabet letters, numbers (any position except first), and underscores, or a string of any valid Unicode characters enclosed in double quotes. If name should contain a character of double quote itself, it must be doubled. If name clashes with a TDL4 keyword, it must be quoted.</p>
<p><b>ALL Names are case-sensitive.</b></p>
<p>Quoted representation of names provides automatic expression evaluation (see later in a dedicated paragraph).</p>
<p>Names could be joined by a dot to create compound names, used in SELECTs with JOINs.</p>
<p>Names of Variables are always explicitly identified by preceding 'dollar sign' <b>$</b> sigil. Names of Parameters are likewise preceded by 'commercial at' <b>@</b> sigil.</p>

<h4 id="String">String Literals <a class="toc" href="#TOC">↑</a></h4>
<p>String literals are fragments of arbitrary Unicode text enclosed in apostrophes. If a String should contain an apostrophe, it must be doubled.</p>
<p>String literals are always automatically evaluated (see later).</p>

<h4 id="Numerics">Numerics <a class="toc" href="#TOC">↑</a></h4>
<p>There are different representations of immediate Numeric values allowed:</p>
<ul>
	<li>Equivalent of Java Double: <b>[s]99[.99][E[s]99][D]</b> or <b>[s].99[E[s]99][D]</b>.</li>
	<li>Equivalent of Java Long: <b>[s]99[L]</b>.</li>
	<li>'Unsigned Long' for bit-masking operators: <b>0xHH</b>.</li>
	<li>Equivalent of Java Integer: <b>[s]99</b>.</li>
</ul>
<p><b>99</b> here means a sequence of decimal numbers, <b>HH</b> for hexadecimal numbers, <b>s</b> is sign sigil (+ or -). Parts in square braces are optional, symbols <b>E</b>, <b>L</b>, <b>.</b> (dot) and <b>0x</b> are used as is.</p>

<h4 id="Boolean">Boolean Type <a class="toc" href="#TOC">↑</a></h4>
<p>Literal <b>TRUE</b> is used for Boolean truth and literal <b>FALSE</b> for Boolean falseness.</p>

<h4 id="NULL">NULL <a class="toc" href="#TOC">↑</a></h4>
<p>Like in SQL, <b>NULL</b> is used for non-value.</p>
<p>Most of the expressions that include NULL evaluate to NULL, except ones that use truth table similar to OR operator, and some other specific cases (sse in the dedicated topic). As in SQL, no NULL is equal to another NULL.</p>
<p>A Variable or parameter that is not defined in the current context evaluates to NULL as well.</p>

<h4 id="Arrays">Arrays <a class="toc" href="#TOC">↑</a></h4>
<p>TDL supports loosely-typed Arrays. Arrays may be used in LOOP control structures, IN operator, to pass collections to Pluggable Entities as Parameters, and in other contexts.</p>
<p>Virtually anything can be collected into Arrays by Pluggable Entities such as Functions, but literal array constructors supports only simple literals. Constructor syntax is just a list of values separated by comma, enclosed in square brackets (for example, <b>... WHERE "month" IN ['Nov', 'Dec', 11, 12]</b>). Optional keyword ARRAY may be used before the opening bracket (for example, <b>LOOP $i ARRAY['a', 'b', 'c'] BEGIN ...</b>). Arrays may be empty (just <b>[]</b>).</p>
<p>Arrays of Names are supported <b>only</b> in context of Pluggable Entity Parameters (<b>CALL something(@affect_columns=["first","third","fourth"]) ...</b>), and throw an error otherwise. Names cannot be mixed with other literals.</p>
<p>For Arrays that consist of Numeric values over some continuous range, there is a special constructor syntax as well.</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="1059.5" height="256" viewBox="0 0 1059.5 256" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g transform="translate(.5 .5)"><g><path d="M20 37v20m0 -10h20"></path></g><g><path d="M40 47h0"></path><path d="M1019.5 47h0"></path><path d="M40 47h20"></path><g><path d="M60 47h241.75"></path><g><path d="M301.75 47h10"></path><path d="M747.75 47h10"></path><g><path d="M311.75 47h0"></path><path d="M431.25 47h0"></path><path d="M311.75 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M331.75 20h79.5"></path></g><path d="M411.25 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M311.75 47h20"></path><g class="terminal "><path d="M331.75 47h0"></path><path d="M411.25 47h0"></path><rect x="331.75" y="36" width="79.5" height="22"></rect><text x="371.5" y="51">ARRAY</text></g><path d="M411.25 47h20"></path></g><path d="M431.25 47h10"></path><g class="terminal "><path d="M441.25 47h0"></path><path d="M580.25 47h0"></path><rect x="441.25" y="36" width="139" height="22"></rect><text x="510.75" y="51">[</text></g><path d="M580.25 47h10"></path><path d="M590.25 47h10"></path><g class="terminal "><path d="M600.25 47h0"></path><path d="M747.75 47h0"></path><rect x="600.25" y="36" width="147.5" height="22"></rect><text x="674" y="51">]</text></g></g><path d="M757.75 47h241.75"></path></g><path d="M999.5 47h20"></path><path d="M40 47a10 10 0 0 1 10 10v34a10 10 0 0 0 10 10"></path><g><path d="M60 101h42.5"></path><g><path d="M102.5 101h10"></path><path d="M947 101h10"></path><g><path d="M112.5 101h0"></path><path d="M232 101h0"></path><path d="M112.5 101a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M132.5 74h79.5"></path></g><path d="M212 74a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M112.5 101h20"></path><g class="terminal "><path d="M132.5 101h0"></path><path d="M212 101h0"></path><rect x="132.5" y="90" width="79.5" height="22"></rect><text x="172.25" y="105">ARRAY</text></g><path d="M212 101h20"></path></g><path d="M232 101h10"></path><g class="terminal "><path d="M242 101h0"></path><path d="M381 101h0"></path><rect x="242" y="90" width="139" height="22"></rect><text x="311.5" y="105">[</text></g><path d="M381 101h10"></path><path d="M391 101h10"></path><g class="non-terminal "><path d="M401 101h0"></path><path d="M480.5 101h0"></path><rect x="401" y="90" width="79.5" height="22" rx="10" ry="10"></rect><text x="440.75" y="105">literal</text></g><path d="M480.5 101h10"></path><g><path d="M490.5 101h0"></path><path d="M789.5 101h0"></path><path d="M490.5 101a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M510.5 74h259"></path></g><path d="M769.5 74a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M490.5 101h20"></path><g><path d="M510.5 101h0"></path><path d="M769.5 101h0"></path><path d="M510.5 101h10"></path><g><path d="M520.5 101h0"></path><path d="M759.5 101h0"></path><path d="M520.5 101h20"></path><g><path d="M540.5 101h0"></path><g><path d="M540.5 101h10"></path><path d="M729.5 101h10"></path><g class="terminal "><path d="M550.5 101h0"></path><path d="M630 101h0"></path><rect x="550.5" y="90" width="79.5" height="22"></rect><text x="590.25" y="105">,</text></g><path d="M630 101h10"></path><path d="M640 101h10"></path><g class="non-terminal "><path d="M650 101h0"></path><path d="M729.5 101h0"></path><rect x="650" y="90" width="79.5" height="22" rx="10" ry="10"></rect><text x="689.75" y="105">literal</text></g></g><path d="M739.5 101h0"></path></g><path d="M739.5 101h20"></path></g><path d="M759.5 101h10"></path><path d="M520.5 101a10 10 0 0 0 -10 10v7a10 10 0 0 0 10 10"></path><g><path d="M520.5 128h239"></path></g><path d="M759.5 128a10 10 0 0 0 10 -10v-7a10 10 0 0 0 -10 -10"></path></g><path d="M769.5 101h20"></path></g><path d="M789.5 101h10"></path><g class="terminal "><path d="M799.5 101h0"></path><path d="M947 101h0"></path><rect x="799.5" y="90" width="147.5" height="22"></rect><text x="873.25" y="105">]</text></g></g><path d="M957 101h42.5"></path></g><path d="M999.5 101a10 10 0 0 0 10 -10v-34a10 10 0 0 1 10 -10"></path><path d="M40 47a10 10 0 0 1 10 10v104a10 10 0 0 0 10 10"></path><g><path d="M60 171h0"></path><g><path d="M60 171h10"></path><path d="M989.5 171h10"></path><g><path d="M70 171h0"></path><path d="M189.5 171h0"></path><path d="M70 171a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M90 144h79.5"></path></g><path d="M169.5 144a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M70 171h20"></path><g class="terminal "><path d="M90 171h0"></path><path d="M169.5 171h0"></path><rect x="90" y="160" width="79.5" height="22"></rect><text x="129.75" y="175">ARRAY</text></g><path d="M169.5 171h20"></path></g><path d="M189.5 171h10"></path><g class="terminal "><path d="M199.5 171h0"></path><path d="M338.5 171h0"></path><rect x="199.5" y="160" width="139" height="22"></rect><text x="269" y="175">[</text></g><path d="M338.5 171h10"></path><path d="M348.5 171h10"></path><g class="terminal "><path d="M358.5 171h0"></path><path d="M480.5 171h0"></path><rect x="358.5" y="160" width="122" height="22"></rect><text x="419.5" y="175">Name</text></g><path d="M480.5 171h10"></path><g><path d="M490.5 171h0"></path><path d="M832 171h0"></path><path d="M490.5 171a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M510.5 144h301.5"></path></g><path d="M812 144a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M490.5 171h20"></path><g><path d="M510.5 171h0"></path><path d="M812 171h0"></path><path d="M510.5 171h10"></path><g><path d="M520.5 171h0"></path><path d="M802 171h0"></path><path d="M520.5 171h20"></path><g><path d="M540.5 171h0"></path><g><path d="M540.5 171h10"></path><path d="M772 171h10"></path><g class="terminal "><path d="M550.5 171h0"></path><path d="M630 171h0"></path><rect x="550.5" y="160" width="79.5" height="22"></rect><text x="590.25" y="175">,</text></g><path d="M630 171h10"></path><path d="M640 171h10"></path><g class="terminal "><path d="M650 171h0"></path><path d="M772 171h0"></path><rect x="650" y="160" width="122" height="22"></rect><text x="711" y="175">Name</text></g></g><path d="M782 171h0"></path></g><path d="M782 171h20"></path></g><path d="M802 171h10"></path><path d="M520.5 171a10 10 0 0 0 -10 10v7a10 10 0 0 0 10 10"></path><g><path d="M520.5 198h281.5"></path></g><path d="M802 198a10 10 0 0 0 10 -10v-7a10 10 0 0 0 -10 -10"></path></g><path d="M812 171h20"></path></g><path d="M832 171h10"></path><g class="terminal "><path d="M842 171h0"></path><path d="M989.5 171h0"></path><rect x="842" y="160" width="147.5" height="22"></rect><text x="915.75" y="175">]</text></g></g><path d="M999.5 171h0"></path></g><path d="M999.5 171a10 10 0 0 0 10 -10v-104a10 10 0 0 1 10 -10"></path><path d="M40 47a10 10 0 0 1 10 10v158a10 10 0 0 0 10 10"></path><g><path d="M60 225h90.5"></path><g><path d="M150.5 225h10"></path><path d="M899 225h10"></path><g class="terminal "><path d="M160.5 225h0"></path><path d="M240 225h0"></path><rect x="160.5" y="214" width="79.5" height="22"></rect><text x="200.25" y="229">RANGE</text></g><path d="M240 225h10"></path><path d="M250 225h10"></path><g class="terminal "><path d="M260 225h0"></path><path d="M399 225h0"></path><rect x="260" y="214" width="139" height="22"></rect><text x="329.5" y="229">[</text></g><path d="M399 225h10"></path><path d="M409 225h10"></path><g class="terminal "><path d="M419 225h0"></path><path d="M515.5 225h0"></path><rect x="419" y="214" width="96.5" height="22"></rect><text x="467.25" y="229">Numeric</text></g><path d="M515.5 225h10"></path><path d="M525.5 225h10"></path><g class="terminal "><path d="M535.5 225h0"></path><path d="M615 225h0"></path><rect x="535.5" y="214" width="79.5" height="22"></rect><text x="575.25" y="229">,</text></g><path d="M615 225h10"></path><path d="M625 225h10"></path><g class="terminal "><path d="M635 225h0"></path><path d="M731.5 225h0"></path><rect x="635" y="214" width="96.5" height="22"></rect><text x="683.25" y="229">Numeric</text></g><path d="M731.5 225h10"></path><path d="M741.5 225h10"></path><g class="terminal "><path d="M751.5 225h0"></path><path d="M899 225h0"></path><rect x="751.5" y="214" width="147.5" height="22"></rect><text x="825.25" y="229">]</text></g></g><path d="M909 225h90.5"></path></g><path d="M999.5 225a10 10 0 0 0 10 -10v-158a10 10 0 0 1 10 -10"></path></g><path d="M 1019.5 47 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Ranges may be ascending or descending and always include both boundaries. For example, <b>RANGE[1,-1]</b> is equivalent of <b>ARRAY[1,0,-1]</b>. If both boundaries of Range have type of Integer, then all values in the Range will be Integer. If any is Long, then all will be Long (and Doubles are converted to Long).</p>

<h3 id="Custom">Custom Object Types <a class="toc" href="#TOC">↑</a></h3>
<p>Some Operations and even Expression Functions define their own specific subtypes of data types that they interpret with their own set of rules. Those types are referred to as 'Something-like Objects'.</p>
<p>For example, standard date/time manipulation functions operate with DateTime-like Objects, which are represented by Long Epoch seconds or milliseconds, or String formatted as a ISO8601-alike timestamp.</p>
<p>Another example, some spatial Operations may extend existing Point Record type with custom 'radius' attribute measured in meters, that makes them POI-like Objects (for Points of Interest).</p>

<h2 id="Script">Script Structure <a class="toc" href="#TOC">↑</a></h2>

<h3 id="Top">Top-level Structure <a class="toc" href="#TOC">↑</a></h3>
<p>TDL4 script is a sequence of any number of statements, each ending with a mandatory semicolon.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="484" height="110" viewBox="0 0 484 110"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M444 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M424 55h0"></path><g><path d="M60 55h0"></path><path d="M360 55h0"></path><path d="M60 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M80 20h260"></path></g><path d="M340 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M60 55h20"></path><g><path d="M80 55h0"></path><path d="M340 55h0"></path><path d="M80 55h10"></path><g><path d="M90 55h0"></path><path d="M330 55h0"></path><path d="M90 55h20"></path><g><path d="M110 55h0"></path><path d="M310 55h0"></path><g class="non-terminal"><path d="M110 55h0"></path><path d="M212 55h0"></path><rect x="110" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="161" y="59">statement</text></g><path d="M212 55h10"></path><path d="M222 55h10"></path><g class="terminal"><path d="M232 55h0"></path><path d="M310 55h0"></path><rect x="232" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="271" y="59">;</text></g></g><path d="M310 55h20"></path></g><path d="M330 55h10"></path><path d="M90 55a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M90 90h240"></path></g><path d="M330 90a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M340 55h20"></path></g><path d="M360 55h10"></path><g class="terminal"><path d="M370 55h0"></path><path d="M424 55h0"></path><rect x="370" y="44" width="54" height="22" rx="0" ry="0"></rect><text x="397" y="59">EOF</text></g></g><path d="M424 55h20"></path></g><path d="M 444 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Each simple language statement is executed in current execution context, starting with top-level, while compound statements run nested statements in their own nested context. List of language statements is as of follows:</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="279" height="480" viewBox="0 0 279 480" id="statement" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 21v20m0 -10h20"></path></g><g><path d="M40 31h0"></path><path d="M239 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h12.75"></path><g><path d="M72.75 31h10"></path><path d="M196.25 31h10"></path><g class="non-terminal "><path d="M82.75 31h0"></path><path d="M196.25 31h0"></path><rect x="82.75" y="20" width="113.5" height="22" rx="10" ry="10"></rect><text x="139.5" y="35">create_stmt</text></g></g><path d="M206.25 31h12.75"></path></g><path d="M219 31h20"></path><path d="M40 31a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M60 69h0"></path><g><path d="M60 69h10"></path><path d="M209 69h10"></path><g class="non-terminal "><path d="M70 69h0"></path><path d="M209 69h0"></path><rect x="70" y="58" width="139" height="22" rx="10" ry="10"></rect><text x="139.5" y="73">transform_stmt</text></g></g><path d="M219 69h0"></path></g><path d="M219 69a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v56a10 10 0 0 0 10 10"></path><g><path d="M60 107h21.25"></path><g><path d="M81.25 107h10"></path><path d="M187.75 107h10"></path><g class="non-terminal "><path d="M91.25 107h0"></path><path d="M187.75 107h0"></path><rect x="91.25" y="96" width="96.5" height="22" rx="10" ry="10"></rect><text x="139.5" y="111">copy_stmt</text></g></g><path d="M197.75 107h21.25"></path></g><path d="M219 107a10 10 0 0 0 10 -10v-56a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v94a10 10 0 0 0 10 10"></path><g><path d="M60 145h25.5"></path><g><path d="M85.5 145h10"></path><path d="M183.5 145h10"></path><g class="non-terminal "><path d="M95.5 145h0"></path><path d="M183.5 145h0"></path><rect x="95.5" y="134" width="88" height="22" rx="10" ry="10"></rect><text x="139.5" y="149">let_stmt</text></g></g><path d="M193.5 145h25.5"></path></g><path d="M219 145a10 10 0 0 0 10 -10v-94a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v132a10 10 0 0 0 10 10"></path><g><path d="M60 183h21.25"></path><g><path d="M81.25 183h10"></path><path d="M187.75 183h10"></path><g class="non-terminal "><path d="M91.25 183h0"></path><path d="M187.75 183h0"></path><rect x="91.25" y="172" width="96.5" height="22" rx="10" ry="10"></rect><text x="139.5" y="187">loop_stmt</text></g></g><path d="M197.75 183h21.25"></path></g><path d="M219 183a10 10 0 0 0 10 -10v-132a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v170a10 10 0 0 0 10 10"></path><g><path d="M60 221h29.75"></path><g><path d="M89.75 221h10"></path><path d="M179.25 221h10"></path><g class="non-terminal "><path d="M99.75 221h0"></path><path d="M179.25 221h0"></path><rect x="99.75" y="210" width="79.5" height="22" rx="10" ry="10"></rect><text x="139.5" y="225">if_stmt</text></g></g><path d="M189.25 221h29.75"></path></g><path d="M219 221a10 10 0 0 0 10 -10v-170a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v208a10 10 0 0 0 10 10"></path><g><path d="M60 259h12.75"></path><g><path d="M72.75 259h10"></path><path d="M196.25 259h10"></path><g class="non-terminal "><path d="M82.75 259h0"></path><path d="M196.25 259h0"></path><rect x="82.75" y="248" width="113.5" height="22" rx="10" ry="10"></rect><text x="139.5" y="263">select_stmt</text></g></g><path d="M206.25 259h12.75"></path></g><path d="M219 259a10 10 0 0 0 10 -10v-208a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v246a10 10 0 0 0 10 10"></path><g><path d="M60 297h21.25"></path><g><path d="M81.25 297h10"></path><path d="M187.75 297h10"></path><g class="non-terminal "><path d="M91.25 297h0"></path><path d="M187.75 297h0"></path><rect x="91.25" y="286" width="96.5" height="22" rx="10" ry="10"></rect><text x="139.5" y="301">call_stmt</text></g></g><path d="M197.75 297h21.25"></path></g><path d="M219 297a10 10 0 0 0 10 -10v-246a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v284a10 10 0 0 0 10 10"></path><g><path d="M60 335h8.5"></path><g><path d="M68.5 335h10"></path><path d="M200.5 335h10"></path><g class="non-terminal "><path d="M78.5 335h0"></path><path d="M200.5 335h0"></path><rect x="78.5" y="324" width="122" height="22" rx="10" ry="10"></rect><text x="139.5" y="339">analyze_stmt</text></g></g><path d="M210.5 335h8.5"></path></g><path d="M219 335a10 10 0 0 0 10 -10v-284a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v322a10 10 0 0 0 10 10"></path><g><path d="M60 373h8.5"></path><g><path d="M68.5 373h10"></path><path d="M200.5 373h10"></path><g class="non-terminal "><path d="M78.5 373h0"></path><path d="M200.5 373h0"></path><rect x="78.5" y="362" width="122" height="22" rx="10" ry="10"></rect><text x="139.5" y="377">options_stmt</text></g></g><path d="M210.5 373h8.5"></path></g><path d="M219 373a10 10 0 0 0 10 -10v-322a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v360a10 10 0 0 0 10 10"></path><g><path d="M60 411h12.75"></path><g><path d="M72.75 411h10"></path><path d="M196.25 411h10"></path><g class="non-terminal "><path d="M82.75 411h0"></path><path d="M196.25 411h0"></path><rect x="82.75" y="400" width="113.5" height="22" rx="10" ry="10"></rect><text x="139.5" y="415">create_proc</text></g></g><path d="M206.25 411h12.75"></path></g><path d="M219 411a10 10 0 0 0 10 -10v-360a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v398a10 10 0 0 0 10 10"></path><g><path d="M60 449h21.25"></path><g><path d="M81.25 449h10"></path><path d="M187.75 449h10"></path><g class="non-terminal "><path d="M91.25 449h0"></path><path d="M187.75 449h0"></path><rect x="91.25" y="438" width="96.5" height="22" rx="10" ry="10"></rect><text x="139.5" y="453">drop_proc</text></g></g><path d="M197.75 449h21.25"></path></g><path d="M219 449a10 10 0 0 0 10 -10v-398a10 10 0 0 1 10 -10"></path></g><path d="M 239 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Whitespace and tabulation characters are ignored and may be freely used for means of readability. Script may be empty, there is no error.</p>

<h3 id="Expressions">Expressions <a class="toc" href="#TOC">↑</a></h3>
<p>Expressions can be evaluated in two distinct contexts. First is 'Loose Expression' that can refer to any script-level entities. Another one is 'Record-level Expression' which can also refer to Record Attributes by their Names.</p>
<div class="hor-scroll"><table>
	<thead><tr><th>Loose Expression context</th><th>Record-level Expression context</th></tr></thead>
	<tbody>
	<tr><td><svg class="railroad-diagram" width="325" height="382" viewBox="0 0 325 382" id="expression" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 21v20m0 -10h20"></path></g><g><path d="M40 31h0"></path><path d="M285 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><g><path d="M60 31h10"></path><path d="M255 31h10"></path><g><path d="M70 31h0"></path><path d="M255 31h0"></path><path d="M70 31h10"></path><g><path d="M80 31h0"></path><path d="M245 31h0"></path><path d="M80 31h20"></path><g><path d="M100 31h21.25"></path><g><path d="M121.25 31h10"></path><path d="M193.75 31h10"></path><g class="non-terminal "><path d="M131.25 31h0"></path><path d="M193.75 31h0"></path><rect x="131.25" y="20" width="62.5" height="22" rx="10" ry="10"></rect><text x="162.5" y="35">is_op</text></g></g><path d="M203.75 31h21.25"></path></g><path d="M225 31h20"></path><path d="M80 31a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M100 69h0"></path><g><path d="M100 69h10"></path><path d="M215 69h10"></path><g class="non-terminal "><path d="M110 69h0"></path><path d="M215 69h0"></path><rect x="110" y="58" width="105" height="22" rx="10" ry="10"></rect><text x="162.5" y="73">between_op</text></g></g><path d="M225 69h0"></path></g><path d="M225 69a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v56a10 10 0 0 0 10 10"></path><g><path d="M100 107h21.25"></path><g><path d="M121.25 107h10"></path><path d="M193.75 107h10"></path><g class="non-terminal "><path d="M131.25 107h0"></path><path d="M193.75 107h0"></path><rect x="131.25" y="96" width="62.5" height="22" rx="10" ry="10"></rect><text x="162.5" y="111">in_op</text></g></g><path d="M203.75 107h21.25"></path></g><path d="M225 107a10 10 0 0 0 10 -10v-56a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v94a10 10 0 0 0 10 10"></path><g><path d="M100 145h21.25"></path><g><path d="M121.25 145h10"></path><path d="M193.75 145h10"></path><g class="non-terminal "><path d="M131.25 145h0"></path><path d="M193.75 145h0"></path><rect x="131.25" y="134" width="62.5" height="22" rx="10" ry="10"></rect><text x="162.5" y="149">kw_op</text></g></g><path d="M203.75 145h21.25"></path></g><path d="M225 145a10 10 0 0 0 10 -10v-94a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v132a10 10 0 0 0 10 10"></path><g><path d="M100 183h17"></path><g><path d="M117 183h10"></path><path d="M198 183h10"></path><g class="non-terminal "><path d="M127 183h0"></path><path d="M198 183h0"></path><rect x="127" y="172" width="71" height="22" rx="10" ry="10"></rect><text x="162.5" y="187">sym_op</text></g></g><path d="M208 183h17"></path></g><path d="M225 183a10 10 0 0 0 10 -10v-132a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v170a10 10 0 0 0 10 10"></path><g><path d="M100 221h8.5"></path><g><path d="M108.5 221h10"></path><path d="M206.5 221h10"></path><g class="non-terminal "><path d="M118.5 221h0"></path><path d="M206.5 221h0"></path><rect x="118.5" y="210" width="88" height="22" rx="10" ry="10"></rect><text x="162.5" y="225">var_name</text></g></g><path d="M216.5 221h8.5"></path></g><path d="M225 221a10 10 0 0 0 10 -10v-170a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v208a10 10 0 0 0 10 10"></path><g><path d="M100 259h12.75"></path><g><path d="M112.75 259h10"></path><path d="M202.25 259h10"></path><g class="non-terminal "><path d="M122.75 259h0"></path><path d="M202.25 259h0"></path><rect x="122.75" y="248" width="79.5" height="22" rx="10" ry="10"></rect><text x="162.5" y="263">literal</text></g></g><path d="M212.25 259h12.75"></path></g><path d="M225 259a10 10 0 0 0 10 -10v-208a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v246a10 10 0 0 0 10 10"></path><g><path d="M100 297h4.25"></path><g><path d="M104.25 297h10"></path><path d="M210.75 297h10"></path><g class="non-terminal "><path d="M114.25 297h0"></path><path d="M210.75 297h0"></path><rect x="114.25" y="286" width="96.5" height="22" rx="10" ry="10"></rect><text x="162.5" y="301">func_call</text></g></g><path d="M220.75 297h4.25"></path></g><path d="M225 297a10 10 0 0 0 10 -10v-246a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v284a10 10 0 0 0 10 10"></path><g><path d="M100 335h21.25"></path><g><path d="M121.25 335h10"></path><path d="M193.75 335h10"></path><g class="non-terminal "><path d="M131.25 335h0"></path><path d="M193.75 335h0"></path><rect x="131.25" y="324" width="62.5" height="22" rx="10" ry="10"></rect><text x="162.5" y="339">array</text></g></g><path d="M203.75 335h21.25"></path></g><path d="M225 335a10 10 0 0 0 10 -10v-284a10 10 0 0 1 10 -10"></path></g><path d="M245 31h10"></path><path d="M80 31a10 10 0 0 0 -10 10v311a10 10 0 0 0 10 10"></path><g><path d="M80 362h165"></path></g><path d="M245 362a10 10 0 0 0 10 -10v-311a10 10 0 0 0 -10 -10"></path></g></g><path d="M265 31h0"></path></g><path d="M265 31h20"></path></g><path d="M 285 31 h 20 m 0 -10 v 20"></path></g></svg></td><td><svg class="railroad-diagram" width="325" height="420" viewBox="0 0 325 420" id="attr_expr" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g transform="translate(.5 .5)"><g><path d="M20 21v20m0 -10h20"></path></g><g><path d="M40 31h0"></path><path d="M285 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><g><path d="M60 31h10"></path><path d="M255 31h10"></path><g><path d="M70 31h0"></path><path d="M255 31h0"></path><path d="M70 31h10"></path><g><path d="M80 31h0"></path><path d="M245 31h0"></path><path d="M80 31h20"></path><g><path d="M100 31h21.25"></path><g><path d="M121.25 31h10"></path><path d="M193.75 31h10"></path><g class="non-terminal "><path d="M131.25 31h0"></path><path d="M193.75 31h0"></path><rect x="131.25" y="20" width="62.5" height="22" rx="10" ry="10"></rect><text x="162.5" y="35">is_op</text></g></g><path d="M203.75 31h21.25"></path></g><path d="M225 31h20"></path><path d="M80 31a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M100 69h0"></path><g><path d="M100 69h10"></path><path d="M215 69h10"></path><g class="non-terminal "><path d="M110 69h0"></path><path d="M215 69h0"></path><rect x="110" y="58" width="105" height="22" rx="10" ry="10"></rect><text x="162.5" y="73">between_op</text></g></g><path d="M225 69h0"></path></g><path d="M225 69a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v56a10 10 0 0 0 10 10"></path><g><path d="M100 107h21.25"></path><g><path d="M121.25 107h10"></path><path d="M193.75 107h10"></path><g class="non-terminal "><path d="M131.25 107h0"></path><path d="M193.75 107h0"></path><rect x="131.25" y="96" width="62.5" height="22" rx="10" ry="10"></rect><text x="162.5" y="111">in_op</text></g></g><path d="M203.75 107h21.25"></path></g><path d="M225 107a10 10 0 0 0 10 -10v-56a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v94a10 10 0 0 0 10 10"></path><g><path d="M100 145h21.25"></path><g><path d="M121.25 145h10"></path><path d="M193.75 145h10"></path><g class="non-terminal "><path d="M131.25 145h0"></path><path d="M193.75 145h0"></path><rect x="131.25" y="134" width="62.5" height="22" rx="10" ry="10"></rect><text x="162.5" y="149">kw_op</text></g></g><path d="M203.75 145h21.25"></path></g><path d="M225 145a10 10 0 0 0 10 -10v-94a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v132a10 10 0 0 0 10 10"></path><g><path d="M100 183h17"></path><g><path d="M117 183h10"></path><path d="M198 183h10"></path><g class="non-terminal "><path d="M127 183h0"></path><path d="M198 183h0"></path><rect x="127" y="172" width="71" height="22" rx="10" ry="10"></rect><text x="162.5" y="187">sym_op</text></g></g><path d="M208 183h17"></path></g><path d="M225 183a10 10 0 0 0 10 -10v-132a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v170a10 10 0 0 0 10 10"></path><g><path d="M100 221h8.5"></path><g><path d="M108.5 221h10"></path><path d="M206.5 221h10"></path><g class="non-terminal "><path d="M118.5 221h0"></path><path d="M206.5 221h0"></path><rect x="118.5" y="210" width="88" height="22" rx="10" ry="10"></rect><text x="162.5" y="225">var_name</text></g></g><path d="M216.5 221h8.5"></path></g><path d="M225 221a10 10 0 0 0 10 -10v-170a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v208a10 10 0 0 0 10 10"></path><g><path d="M100 259h12.75"></path><g><path d="M112.75 259h10"></path><path d="M202.25 259h10"></path><g class="non-terminal "><path d="M122.75 259h0"></path><path d="M202.25 259h0"></path><rect x="122.75" y="248" width="79.5" height="22" rx="10" ry="10"></rect><text x="162.5" y="263">literal</text></g></g><path d="M212.25 259h12.75"></path></g><path d="M225 259a10 10 0 0 0 10 -10v-208a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v246a10 10 0 0 0 10 10"></path><g><path d="M100 297h4.25"></path><g><path d="M104.25 297h10"></path><path d="M210.75 297h10"></path><g class="non-terminal "><path d="M114.25 297h0"></path><path d="M210.75 297h0"></path><rect x="114.25" y="286" width="96.5" height="22" rx="10" ry="10"></rect><text x="162.5" y="301">func_attr</text></g></g><path d="M220.75 297h4.25"></path></g><path d="M225 297a10 10 0 0 0 10 -10v-246a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v284a10 10 0 0 0 10 10"></path><g><path d="M100 335h21.25"></path><g><path d="M121.25 335h10"></path><path d="M193.75 335h10"></path><g class="non-terminal "><path d="M131.25 335h0"></path><path d="M193.75 335h0"></path><rect x="131.25" y="324" width="62.5" height="22" rx="10" ry="10"></rect><text x="162.5" y="339">array</text></g></g><path d="M203.75 335h21.25"></path></g><path d="M225 335a10 10 0 0 0 10 -10v-284a10 10 0 0 1 10 -10"></path><path d="M80 31a10 10 0 0 1 10 10v322a10 10 0 0 0 10 10"></path><g><path d="M100 373h25.5"></path><g><path d="M125.5 373h10"></path><path d="M189.5 373h10"></path><g class="non-terminal "><path d="M135.5 373h0"></path><path d="M189.5 373h0"></path><rect x="135.5" y="362" width="54" height="22" rx="10" ry="10"></rect><text x="162.5" y="377">attr</text></g></g><path d="M199.5 373h25.5"></path></g><path d="M225 373a10 10 0 0 0 10 -10v-322a10 10 0 0 1 10 -10"></path></g><path d="M245 31h10"></path><path d="M80 31a10 10 0 0 0 -10 10v349a10 10 0 0 0 10 10"></path><g><path d="M80 400h165"></path></g><path d="M245 400a10 10 0 0 0 10 -10v-349a10 10 0 0 0 -10 -10"></path></g></g><path d="M265 31h0"></path></g><path d="M265 31h20"></path></g><path d="M 285 31 h 20 m 0 -10 v 20"></path></g></svg></td></tr>
	</tbody>
</table></div>
<p>Record-level evaluation rules take place only where it makes sense (SELECT, WHERE, KEY clauses contexts).</p>

<h4 id="Automatic">Automatic Evaluation in Strings and Names <a class="toc" href="#TOC">↑</a></h4>
<p>There is automatic expression evaluation performed inside quoted Names and String literals. Any text between curly braces <b>{</b> and <b>}</b> inside quoted Name or String is evaluated as an expression, and result is substituted as a substring in-place.</p>
<p>To turn off automatic evaluation, braces should be prepended by a backslash <b>\</b>.</p>
<p>Please note that quoted entities evaluation happen in the context of parse time of language Operator, not the call time. As such, quoted entities won't re-evaluate themselves in SELECT clauses on per-Record basis. Use Expression Functions there instead.</p>

<h4 id="ExpressionOperators">Expression Operators <a class="toc" href="#TOC">↑</a></h4>
<p>There are three SQL-specific 'peculiar' Operators implemented right by TDL4 interpreter: IN, IS, and BETWEEN.</p>
<div class="hor-scroll"><table>
	<thead>
	<tr><th>Symbol<br>(Variants)</th><th>Priority</th><th>Associativity</th><th># of Operands</th><th>Description</th></tr>
	</thead>
	<tbody>
	<tr><td>Operand [NOT] IN ARRAY[]<br>Operand [NOT] IN $array_var<br>Operand [NOT] IN array_attr</td><td>35</td><td>Right</td><td>2</td><td>TRUE if left operand is present in the right, cast to Array, FALSE otherwise. Vice versa for NOT variant</td></tr>
	<tr><td>Operand IS [NOT] NULL</td><td>35</td><td>Right</td><td>1</td><td>TRUE if left operand is NULL, FALSE otherwise. Vice versa for NOT variant</td></tr>
	<tr><td><nobr>Operand [NOT] BETWEEN Min AND Max</nobr></td><td>35</td><td>Right</td><td>3</td><td>TRUE if left operand is inclusively between Min and Max operands, cast to Numerics, FALSE otherwise. For NOT variant, TRUE if it is outside the range, excluding boundaries</td></tr>
	</tbody>
</table></div>
<p>All other Operators that can be used in Expressions are modeled after Java operators (down to symbolic representation), and/or implemented elsewhere in the classpath (and thus have a keyword-like name), and their list is extensible / dependent of distribution.</p>
<p>If an Operator requires operands of concrete data type, they will be directly cast or stringified-then-parsed to that type. If cast or parsing is impossible, Data Cooker throws an error and halts script execution.</p>
<p>Operators with higher priority are evaluated before lower priority operators. In case of same priority, evaluation is left to right except if Operator is right-associative or unary. For subexpression grouping and changing of evaluation order, parentheses can be used.</p>
<p>Most Operators result in NULL if any of their operands are NULL, but some do handle NULLs in a specific way.</p>
<p>For the exact list of available Operators, their Priority, Associativity, and NULL handling, look into automatically generated distro docs.</p>

<h4 id="ExpressionFunctions">Expression Functions <a class="toc" href="#TOC">↑</a></h4>
<p>A function call has the following syntax:</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="902" height="132" viewBox="0 0 902 132" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 37v20m0 -10h20"></path></g><g><path d="M40 47h0"></path><path d="M862 47h0"></path><path d="M40 47h20"></path><g><path d="M60 47h0"></path><g><path d="M60 47h10"></path><path d="M832 47h10"></path><g class="non-terminal "><path d="M70 47h0"></path><path d="M124 47h0"></path><rect x="70" y="36" width="54" height="22" rx="10" ry="10"></rect><text x="97" y="51">func</text></g><path d="M124 47h10"></path><path d="M134 47h10"></path><g class="terminal "><path d="M144 47h0"></path><path d="M249 47h0"></path><rect x="144" y="36" width="105" height="22"></rect><text x="196.5" y="51">(</text></g><path d="M249 47h10"></path><path d="M259 47h10"></path><g class="non-terminal "><path d="M269 47h0"></path><path d="M374 47h0"></path><rect x="269" y="36" width="105" height="22" rx="10" ry="10"></rect><text x="321.5" y="51">expression</text></g><path d="M374 47h10"></path><g><path d="M384 47h0"></path><path d="M708.5 47h0"></path><path d="M384 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M404 20h284.5"></path></g><path d="M688.5 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M384 47h20"></path><g><path d="M404 47h0"></path><path d="M688.5 47h0"></path><path d="M404 47h10"></path><g><path d="M414 47h0"></path><path d="M678.5 47h0"></path><path d="M414 47h20"></path><g><path d="M434 47h0"></path><g><path d="M434 47h10"></path><path d="M648.5 47h10"></path><g class="terminal "><path d="M444 47h0"></path><path d="M523.5 47h0"></path><rect x="444" y="36" width="79.5" height="22"></rect><text x="483.75" y="51">,</text></g><path d="M523.5 47h10"></path><path d="M533.5 47h10"></path><g class="non-terminal "><path d="M543.5 47h0"></path><path d="M648.5 47h0"></path><rect x="543.5" y="36" width="105" height="22" rx="10" ry="10"></rect><text x="596" y="51">expression</text></g></g><path d="M658.5 47h0"></path></g><path d="M658.5 47h20"></path></g><path d="M678.5 47h10"></path><path d="M414 47a10 10 0 0 0 -10 10v7a10 10 0 0 0 10 10"></path><g><path d="M414 74h264.5"></path></g><path d="M678.5 74a10 10 0 0 0 10 -10v-7a10 10 0 0 0 -10 -10"></path></g><path d="M688.5 47h20"></path></g><path d="M708.5 47h10"></path><g class="terminal "><path d="M718.5 47h0"></path><path d="M832 47h0"></path><rect x="718.5" y="36" width="113.5" height="22"></rect><text x="775.25" y="51">)</text></g></g><path d="M842 47h0"></path></g><path d="M842 47h20"></path><path d="M40 47a10 10 0 0 1 10 10v34a10 10 0 0 0 10 10"></path><g><path d="M60 101h224.75"></path><g><path d="M284.75 101h10"></path><path d="M607.25 101h10"></path><g class="non-terminal "><path d="M294.75 101h0"></path><path d="M348.75 101h0"></path><rect x="294.75" y="90" width="54" height="22" rx="10" ry="10"></rect><text x="321.75" y="105">func</text></g><path d="M348.75 101h10"></path><path d="M358.75 101h10"></path><g class="terminal "><path d="M368.75 101h0"></path><path d="M473.75 101h0"></path><rect x="368.75" y="90" width="105" height="22"></rect><text x="421.25" y="105">(</text></g><path d="M473.75 101h10"></path><path d="M483.75 101h10"></path><g class="terminal "><path d="M493.75 101h0"></path><path d="M607.25 101h0"></path><rect x="493.75" y="90" width="113.5" height="22"></rect><text x="550.5" y="105">)</text></g></g><path d="M617.25 101h224.75"></path></g><path d="M842 101a10 10 0 0 0 10 -10v-34a10 10 0 0 1 10 -10"></path></g><path d="M 862 47 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Functions may have any number of strictly positional Arguments (1<sup>st</sup>, 2<sup>nd</sup>, 3<sup>rd</sup>, and so on). Some have a fixed list of strongly typed Arguments, some accept any number of Arguments that are automatically cast to a single type. There are also functions that have no arguments and therefore return some predefined value, or even refer to Object Record as a whole and access its internal data, such as Spatial Object's geometry.</p>
<p>In any case, Arguments are evaluated from left to right.</p>
<p>Record-level Functions can be called only from Record-level Attribute Expressions, and are invalid in the Loose Expression context. Calling them outside SELECT, WHERE, or KEY clauses will throw an error.</p>
<p>Functions are provided in the same way as Operators, by Java implementations from the classpath. For the complete list of Functions, their return and Argument types refer to your distro docs.</p>

<h3 id="Parameter">Parameter List Expressions <a class="toc" href="#TOC">↑</a></h3>
<p>Parameter lists are expressions composed of parameters (at least one), separated by commas.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="476" height="110" viewBox="0 0 476 110"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M436 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M416 55h0"></path><g class="non-terminal"><path d="M60 55h0"></path><path d="M130 55h0"></path><rect x="60" y="44" width="70" height="22" rx="8" ry="8"></rect><text x="95" y="59">param</text></g><path d="M130 55h10"></path><g><path d="M140 55h0"></path><path d="M416 55h0"></path><path d="M140 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M160 20h236"></path></g><path d="M396 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M140 55h20"></path><g><path d="M160 55h0"></path><path d="M396 55h0"></path><path d="M160 55h10"></path><g><path d="M170 55h0"></path><path d="M386 55h0"></path><path d="M170 55h20"></path><g><path d="M190 55h0"></path><path d="M366 55h0"></path><g class="terminal"><path d="M190 55h0"></path><path d="M276 55h0"></path><rect x="190" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="233" y="59">,</text></g><path d="M276 55h10"></path><path d="M286 55h10"></path><g class="non-terminal"><path d="M296 55h0"></path><path d="M366 55h0"></path><rect x="296" y="44" width="70" height="22" rx="8" ry="8"></rect><text x="331" y="59">param</text></g></g><path d="M366 55h20"></path></g><path d="M386 55h10"></path><path d="M170 55a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M170 90h216"></path></g><path d="M386 90a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M396 55h20"></path></g></g><path d="M416 55h20"></path></g><path d="M 436 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Each parameter is a name to value (which may be expression or array literal) pair.</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="526.5" height="62" viewBox="0 0 526.5 62" id="param" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 21v20m0 -10h20"></path></g><g><path d="M40 31h0"></path><path d="M486.5 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><g><path d="M60 31h10"></path><path d="M456.5 31h10"></path><g class="terminal "><path d="M70 31h0"></path><path d="M124 31h0"></path><rect x="70" y="20" width="54" height="22"></rect><text x="97" y="35">@</text></g><path d="M124 31h10"></path><path d="M134 31h10"></path><g class="terminal "><path d="M144 31h0"></path><path d="M266 31h0"></path><rect x="144" y="20" width="122" height="22"></rect><text x="205" y="35">Name</text></g><path d="M266 31h10"></path><path d="M276 31h10"></path><g class="terminal "><path d="M286 31h0"></path><path d="M340 31h0"></path><rect x="286" y="20" width="54" height="22"></rect><text x="313" y="35">=</text></g><path d="M340 31h10"></path><path d="M350 31h10"></path><g class="non-terminal "><path d="M360 31h0"></path><path d="M456.5 31h0"></path><rect x="360" y="20" width="96.5" height="22" rx="10" ry="10"></rect><text x="408.25" y="35">attr_expr</text></g></g><path d="M466.5 31h0"></path></g><path d="M466.5 31h20"></path></g><path d="M 486.5 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Parameter lists are usually passed to named function-like expressions (TRANSFORM, CALL, and so on).</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="678" height="110" viewBox="0 0 678 110"><g transform="translate(.5 .5)"><path d="M 20 69 v 20 m 0 -10 h 20.5"></path><g><path d="M40 79h0"></path><path d="M638 79h0"></path><path d="M40 79h20"></path><g><path d="M60 79h0"></path><path d="M618 79h0"></path><g class="non-terminal"><path d="M60 79h0"></path><path d="M122 79h0"></path><rect x="60" y="68" width="62" height="22" rx="8" ry="8"></rect><text x="91" y="83">func</text></g><path d="M122 79h10"></path><g><path d="M132 79h0"></path><path d="M618 79h0"></path><path d="M132 79a10 10 0 0 0 10 -10v-39a10 10 0 0 1 10 -10"></path><g><path d="M152 20h446"></path></g><path d="M598 20a10 10 0 0 1 10 10v39a10 10 0 0 0 10 10"></path><path d="M132 79h20"></path><g><path d="M152 79h0"></path><path d="M598 79h0"></path><path d="M152 79h20"></path><g><path d="M172 79h0"></path><path d="M578 79h0"></path><g class="terminal"><path d="M172 79h0"></path><path d="M282 79h0"></path><rect x="172" y="68" width="110" height="22" rx="0" ry="0"></rect><text x="227" y="83">(</text></g><path d="M282 79h10"></path><g><path d="M292 79h0"></path><path d="M450 79h0"></path><path d="M292 79a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M312 44h118"></path></g><path d="M430 44a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M292 79h20"></path><g class="non-terminal"><path d="M312 79h0"></path><path d="M430 79h0"></path><rect x="312" y="68" width="118" height="22" rx="8" ry="8"></rect><text x="371" y="83">params_expr</text></g><path d="M430 79h20"></path></g><path d="M450 79h10"></path><g class="terminal"><path d="M460 79h0"></path><path d="M578 79h0"></path><rect x="460" y="68" width="118" height="22" rx="0" ry="0"></rect><text x="519" y="83">)</text></g></g><path d="M578 79h20"></path></g><path d="M598 79h20"></path></g></g><path d="M618 79h20"></path></g><path d="M 638 79 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Parameter lists are bound to Record-level context and can refer to DS Attributes.</p>

<h2 id="DataStorage">Data Storage Interface Statements <a class="toc" href="#TOC">↑</a></h2>

<h3 id="CREATEDS">CREATE DS Statement <a class="toc" href="#TOC">↑</a></h3>
<p>Creates a new DS from data source. Its name must be new and unique.</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="1431.5" height="154" viewBox="0 0 1431.5 154" id="create_stmt" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 37v20m0 -10h20"></path></g><g><path d="M40 47h0"></path><path d="M1391.5 47h0"></path><path d="M40 47h20"></path><g><path d="M60 47h0"></path><g><path d="M60 47h10"></path><path d="M1361.5 47h10"></path><g class="terminal "><path d="M70 47h0"></path><path d="M158 47h0"></path><rect x="70" y="36" width="88" height="22"></rect><text x="114" y="51">CREATE</text></g><path d="M158 47h10"></path><g><path d="M168 47h0"></path><path d="M262 47h0"></path><path d="M168 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M188 20h54"></path></g><path d="M242 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M168 47h20"></path><g class="terminal "><path d="M188 47h0"></path><path d="M242 47h0"></path><rect x="188" y="36" width="54" height="22"></rect><text x="215" y="51">DS</text></g><path d="M242 47h20"></path></g><path d="M262 47h10"></path><g class="non-terminal "><path d="M272 47h0"></path><path d="M351.5 47h0"></path><rect x="272" y="36" width="79.5" height="22" rx="10" ry="10"></rect><text x="311.75" y="51">ds_name</text></g><path d="M351.5 47h10"></path><path d="M361.5 47h10"></path><g class="non-terminal "><path d="M371.5 47h0"></path><path d="M468 47h0"></path><rect x="371.5" y="36" width="96.5" height="22" rx="10" ry="10"></rect><text x="419.75" y="51">func_expr</text></g><path d="M468 47h10"></path><path d="M478 47h10"></path><g class="terminal "><path d="M488 47h0"></path><path d="M559 47h0"></path><rect x="488" y="36" width="71" height="22"></rect><text x="523.5" y="51">FROM</text></g><path d="M559 47h10"></path><path d="M569 47h10"></path><g class="non-terminal "><path d="M579 47h0"></path><path d="M684 47h0"></path><rect x="579" y="36" width="105" height="22" rx="10" ry="10"></rect><text x="631.5" y="51">expression</text></g><path d="M684 47h10"></path><g><path d="M694 47h0"></path><path d="M1032.5 47h0"></path><path d="M694 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M714 20h298.5"></path></g><path d="M1012.5 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M694 47h20"></path><g><path d="M714 47h0"></path><path d="M1012.5 47h0"></path><path d="M714 47h20"></path><g><path d="M734 47h0"></path><g><path d="M734 47h10"></path><path d="M982.5 47h10"></path><g class="terminal "><path d="M744 47h0"></path><path d="M857.5 47h0"></path><rect x="744" y="36" width="113.5" height="22"></rect><text x="800.75" y="51">PARTITION</text></g><path d="M857.5 47h10"></path><path d="M867.5 47h10"></path><g class="non-terminal "><path d="M877.5 47h0"></path><path d="M982.5 47h0"></path><rect x="877.5" y="36" width="105" height="22" rx="10" ry="10"></rect><text x="930" y="51">expression</text></g></g><path d="M992.5 47h0"></path></g><path d="M992.5 47h20"></path></g><path d="M1012.5 47h20"></path></g><g><path d="M1032.5 47h0"></path><path d="M1361.5 47h0"></path><path d="M1032.5 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M1052.5 20h289"></path></g><path d="M1341.5 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M1032.5 47h20"></path><g><path d="M1052.5 47h0"></path><path d="M1341.5 47h0"></path><path d="M1052.5 47h20"></path><g><path d="M1072.5 47h0"></path><g><path d="M1072.5 47h10"></path><path d="M1311.5 47h10"></path><g class="terminal "><path d="M1082.5 47h0"></path><path d="M1136.5 47h0"></path><rect x="1082.5" y="36" width="54" height="22"></rect><text x="1109.5" y="51">BY</text></g><path d="M1136.5 47h10"></path><g><path d="M1146.5 47h0"></path><path d="M1311.5 47h0"></path><path d="M1146.5 47h20"></path><g><path d="M1166.5 47h0"></path><g><path d="M1166.5 47h10"></path><path d="M1281.5 47h10"></path><g class="terminal "><path d="M1176.5 47h0"></path><path d="M1281.5 47h0"></path><rect x="1176.5" y="36" width="105" height="22"></rect><text x="1229" y="51">HASHCODE</text></g></g><path d="M1291.5 47h0"></path></g><path d="M1291.5 47h20"></path><path d="M1146.5 47a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M1166.5 85h8.5"></path><g><path d="M1175 85h10"></path><path d="M1273 85h10"></path><g class="terminal "><path d="M1185 85h0"></path><path d="M1273 85h0"></path><rect x="1185" y="74" width="88" height="22"></rect><text x="1229" y="89">SOURCE</text></g></g><path d="M1283 85h8.5"></path></g><path d="M1291.5 85a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path><path d="M1146.5 47a10 10 0 0 1 10 10v56a10 10 0 0 0 10 10"></path><g><path d="M1166.5 123h8.5"></path><g><path d="M1175 123h10"></path><path d="M1273 123h10"></path><g class="terminal "><path d="M1185 123h0"></path><path d="M1273 123h0"></path><rect x="1185" y="112" width="88" height="22"></rect><text x="1229" y="127">RANDOM</text></g></g><path d="M1283 123h8.5"></path></g><path d="M1291.5 123a10 10 0 0 0 10 -10v-56a10 10 0 0 1 10 -10"></path></g></g><path d="M1321.5 47h0"></path></g><path d="M1321.5 47h20"></path></g><path d="M1341.5 47h20"></path></g></g><path d="M1371.5 47h0"></path></g><path d="M1371.5 47h20"></path></g><path d="M 1391.5 47 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Functional expression includes Input Adapter name and its parameter list. List of available Input Adapters depends on the distribution.</p>
<p>FROM expression evaluates to a path String pointing to data source. Each Input Adapter has its own syntax of path, which could be a URI, a query, or something more specific.</p>
<p>Number of partitions is set by PARTITION clause. Its expression evaluates to Java Integer number of partitions. If not set, single partition DS is created.</p>
<p>Initial object keying, and thus, initial partitioning can be changed by the BY algorithm clause. Default algorithm is HASHCODE, which sets initial Record Key to Java hashcode of the Record Object itself, so identical objects will be placed into same partitions. SOURCE derives Keys from source file name (or storage-dependent analog, it if's not file-based), so all Records from same source file will go to same partition. RANDOM sets keys to random values, effectively evenly shuffling records between partitions.</p>
<p>In any case, initial key is a Java Integer numeric.</p>

<h3 id="COPY">COPY DS Statement <a class="toc" href="#TOC">↑</a></h3>
<p>Saves existing DS to storage.</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="856.5" height="78" viewBox="0 0 856.5 78" id="copy_stmt" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 37v20m0 -10h20"></path></g><g><path d="M40 47h0"></path><path d="M816.5 47h0"></path><path d="M40 47h20"></path><g><path d="M60 47h0"></path><g><path d="M60 47h10"></path><path d="M786.5 47h10"></path><g class="terminal "><path d="M70 47h0"></path><path d="M141 47h0"></path><rect x="70" y="36" width="71" height="22"></rect><text x="105.5" y="51">COPY</text></g><path d="M141 47h10"></path><g><path d="M151 47h0"></path><path d="M245 47h0"></path><path d="M151 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M171 20h54"></path></g><path d="M225 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M151 47h20"></path><g class="terminal "><path d="M171 47h0"></path><path d="M225 47h0"></path><rect x="171" y="36" width="54" height="22"></rect><text x="198" y="51">DS</text></g><path d="M225 47h20"></path></g><path d="M245 47h10"></path><g class="non-terminal "><path d="M255 47h0"></path><path d="M343 47h0"></path><rect x="255" y="36" width="88" height="22" rx="10" ry="10"></rect><text x="299" y="51">ds_parts</text></g><path d="M343 47h10"></path><g><path d="M353 47h0"></path><path d="M464 47h0"></path><path d="M353 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M373 20h71"></path></g><path d="M444 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M353 47h20"></path><g class="terminal "><path d="M373 47h0"></path><path d="M444 47h0"></path><rect x="373" y="36" width="71" height="22"></rect><text x="408.5" y="51">*</text></g><path d="M444 47h20"></path></g><path d="M464 47h10"></path><g class="non-terminal "><path d="M474 47h0"></path><path d="M570.5 47h0"></path><rect x="474" y="36" width="96.5" height="22" rx="10" ry="10"></rect><text x="522.25" y="51">func_expr</text></g><path d="M570.5 47h10"></path><path d="M580.5 47h10"></path><g class="terminal "><path d="M590.5 47h0"></path><path d="M661.5 47h0"></path><rect x="590.5" y="36" width="71" height="22"></rect><text x="626" y="51">INTO</text></g><path d="M661.5 47h10"></path><path d="M671.5 47h10"></path><g class="non-terminal "><path d="M681.5 47h0"></path><path d="M786.5 47h0"></path><rect x="681.5" y="36" width="105" height="22" rx="10" ry="10"></rect><text x="734" y="51">expression</text></g></g><path d="M796.5 47h0"></path></g><path d="M796.5 47h20"></path></g><path d="M 816.5 47 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Likewise, INTO expression evaluates to a path String (usually, a URI) pointing to a data storage location, with a syntax specific to each Output Adapter. List of available Output Adapters depends on the distribution.</p>
<p>If a star is used after DS name, it is treated as a prefix, and all matching DSs will be copied to storage (usually, into subdirectories under specified INTO path for file-based storages). Each partition would usually go to a separate file.</p>
<p>This Statement supports per-Partition processing.</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="610.5" height="78" viewBox="0 0 610.5 78" id="ds_parts" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 37v20m0 -10h20"></path></g><g><path d="M40 47h0"></path><path d="M570.5 47h0"></path><path d="M40 47h20"></path><g><path d="M60 47h0"></path><g><path d="M60 47h10"></path><path d="M540.5 47h10"></path><g class="terminal "><path d="M70 47h0"></path><path d="M192 47h0"></path><rect x="70" y="36" width="122" height="22"></rect><text x="131" y="51">ds_name</text></g><path d="M192 47h10"></path><g><path d="M202 47h0"></path><path d="M540.5 47h0"></path><path d="M202 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M222 20h298.5"></path></g><path d="M520.5 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M202 47h20"></path><g><path d="M222 47h0"></path><path d="M520.5 47h0"></path><path d="M222 47h20"></path><g><path d="M242 47h0"></path><g><path d="M242 47h10"></path><path d="M490.5 47h10"></path><g class="terminal "><path d="M252 47h0"></path><path d="M365.5 47h0"></path><rect x="252" y="36" width="113.5" height="22"></rect><text x="308.75" y="51">PARTITION</text></g><path d="M365.5 47h10"></path><path d="M375.5 47h10"></path><g class="non-terminal "><path d="M385.5 47h0"></path><path d="M490.5 47h0"></path><rect x="385.5" y="36" width="105" height="22" rx="10" ry="10"></rect><text x="438" y="51">expression</text></g></g><path d="M500.5 47h0"></path></g><path d="M500.5 47h20"></path></g><path d="M520.5 47h20"></path></g></g><path d="M550.5 47h0"></path></g><path d="M550.5 47h20"></path></g><path d="M 570.5 47 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>If needed, DS name could have additional PARTITION specifier, which has an expression that evaluates to a single Integer Partition number, or to Integer ARRAY or RANGE of Partitions to address. If star-syntax is used, all prefixed DSs must have addressed partitions.</p>

<h2 id="DataTransformation">Data Transformation Statements <a class="toc" href="#TOC">↑</a></h2>

<h3 id="TRANSFORMDS">TRANSFORM DS Statement <a class="toc" href="#TOC">↑</a></h3>
<p>Invokes a Transform to convert a DS from one type to another. Instead of keyword TRANSFORM, ALTER may be used.</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="1363" height="110" viewBox="0 0 1363 110" id="transform_stmt" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 53v20m0 -10h20"></path></g><g><path d="M40 63h0"></path><path d="M1323 63h0"></path><path d="M40 63h20"></path><g><path d="M60 63h0"></path><g><path d="M60 63h10"></path><path d="M1293 63h10"></path><g class="terminal "><path d="M70 63h0"></path><path d="M183.5 63h0"></path><rect x="70" y="52" width="113.5" height="22"></rect><text x="126.75" y="67">TRANSFORM</text></g><path d="M183.5 63h10"></path><g><path d="M193.5 63h0"></path><path d="M287.5 63h0"></path><path d="M193.5 63a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M213.5 36h54"></path></g><path d="M267.5 36a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M193.5 63h20"></path><g class="terminal "><path d="M213.5 63h0"></path><path d="M267.5 63h0"></path><rect x="213.5" y="52" width="54" height="22"></rect><text x="240.5" y="67">DS</text></g><path d="M267.5 63h20"></path></g><path d="M287.5 63h10"></path><g class="non-terminal "><path d="M297.5 63h0"></path><path d="M377 63h0"></path><rect x="297.5" y="52" width="79.5" height="22" rx="10" ry="10"></rect><text x="337.25" y="67">ds_name</text></g><path d="M377 63h10"></path><g><path d="M387 63h0"></path><path d="M498 63h0"></path><path d="M387 63a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M407 36h71"></path></g><path d="M478 36a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M387 63h20"></path><g class="terminal "><path d="M407 63h0"></path><path d="M478 63h0"></path><rect x="407" y="52" width="71" height="22"></rect><text x="442.5" y="67">*</text></g><path d="M478 63h20"></path></g><path d="M498 63h10"></path><g class="non-terminal "><path d="M508 63h0"></path><path d="M604.5 63h0"></path><rect x="508" y="52" width="96.5" height="22" rx="10" ry="10"></rect><text x="556.25" y="67">func_expr</text></g><path d="M604.5 63h10"></path><g><path d="M614.5 63h0"></path><path d="M796.5 63h0"></path><path d="M614.5 63a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M634.5 36h142"></path></g><path d="M776.5 36a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M614.5 63h20"></path><g><path d="M634.5 63h0"></path><path d="M776.5 63h0"></path><path d="M634.5 63h10"></path><g class="non-terminal "><path d="M644.5 63h0"></path><path d="M766.5 63h0"></path><rect x="644.5" y="52" width="122" height="22" rx="10" ry="10"></rect><text x="705.5" y="67">columns_item</text></g><path d="M766.5 63h10"></path><path d="M644.5 63a10 10 0 0 0 -10 10v7a10 10 0 0 0 10 10"></path><g><path d="M644.5 90h122"></path></g><path d="M766.5 90a10 10 0 0 0 10 -10v-7a10 10 0 0 0 -10 -10"></path></g><path d="M776.5 63h20"></path></g><g><path d="M796.5 63h0"></path><path d="M924.5 63h0"></path><path d="M796.5 63a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M816.5 36h88"></path></g><path d="M904.5 36a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M796.5 63h20"></path><g class="non-terminal "><path d="M816.5 63h0"></path><path d="M904.5 63h0"></path><rect x="816.5" y="52" width="88" height="22" rx="10" ry="10"></rect><text x="860.5" y="67">key_item</text></g><path d="M904.5 63h20"></path></g><g><path d="M924.5 63h0"></path><path d="M1293 63h0"></path><path d="M924.5 63a10 10 0 0 0 10 -10v-23a10 10 0 0 1 10 -10"></path><g><path d="M944.5 20h328.5"></path></g><path d="M1273 20a10 10 0 0 1 10 10v23a10 10 0 0 0 10 10"></path><path d="M924.5 63h20"></path><g><path d="M944.5 63h0"></path><path d="M1273 63h0"></path><path d="M944.5 63h20"></path><g><path d="M964.5 63h0"></path><g><path d="M964.5 63h10"></path><path d="M1243 63h10"></path><g class="terminal "><path d="M974.5 63h0"></path><path d="M1088 63h0"></path><rect x="974.5" y="52" width="113.5" height="22"></rect><text x="1031.25" y="67">PARTITION</text></g><path d="M1088 63h10"></path><g><path d="M1098 63h0"></path><path d="M1243 63h0"></path><path d="M1098 63a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M1118 36h105"></path></g><path d="M1223 36a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M1098 63h20"></path><g class="non-terminal "><path d="M1118 63h0"></path><path d="M1223 63h0"></path><rect x="1118" y="52" width="105" height="22" rx="10" ry="10"></rect><text x="1170.5" y="67">expression</text></g><path d="M1223 63h20"></path></g></g><path d="M1253 63h0"></path></g><path d="M1253 63h20"></path></g><path d="M1273 63h20"></path></g></g><path d="M1303 63h0"></path></g><path d="M1303 63h20"></path></g><path d="M 1323 63 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Is a star is used after DS name, it is treated as a prefix, and all matching DSs will be transformed with same parameters.</p>
<p>Functional expression includes name of Transform and list of its parameters. As transforms are pluggable, exact list depends on a distribution, and thus they're documented separately.</p>
<p>An item of column definitions of a certain type has the following structure:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1254" height="180" viewBox="0 0 1254 180"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M1214 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M1194 55h0"></path><g><path d="M60 55h0"></path><path d="M170 55h0"></path><path d="M60 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M80 20h70"></path></g><path d="M150 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M60 55h20"></path><g class="terminal"><path d="M80 55h0"></path><path d="M150 55h0"></path><rect x="80" y="44" width="70" height="22" rx="0" ry="0"></rect><text x="115" y="59">SET</text></g><path d="M150 55h20"></path></g><path d="M170 55h10"></path><g class="non-terminal"><path d="M180 55h0"></path><path d="M306 55h0"></path><rect x="180" y="44" width="126" height="22" rx="8" ry="8"></rect><text x="243" y="59">type_columns</text></g><path d="M306 55h10"></path><g><path d="M316 55h0"></path><path d="M458 55h0"></path><path d="M316 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M336 20h102"></path></g><path d="M438 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M316 55h20"></path><g class="terminal"><path d="M336 55h0"></path><path d="M438 55h0"></path><rect x="336" y="44" width="102" height="22" rx="0" ry="0"></rect><text x="387" y="59">COLUMNS</text></g><path d="M438 55h20"></path></g><path d="M458 55h10"></path><g class="terminal"><path d="M468 55h0"></path><path d="M578 55h0"></path><rect x="468" y="44" width="110" height="22" rx="0" ry="0"></rect><text x="523" y="59">(</text></g><path d="M578 55h10"></path><path d="M588 55h10"></path><g class="terminal"><path d="M598 55h0"></path><path d="M724 55h0"></path><rect x="598" y="44" width="126" height="22" rx="0" ry="0"></rect><text x="661" y="59">Name</text></g><path d="M724 55h10"></path><g><path d="M734 55h0"></path><path d="M1066 55h0"></path><path d="M734 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M754 20h292"></path></g><path d="M1046 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M734 55h20"></path><g><path d="M754 55h0"></path><path d="M1046 55h0"></path><path d="M754 55h10"></path><g><path d="M764 55h0"></path><path d="M1036 55h0"></path><path d="M764 55h20"></path><g><path d="M784 55h0"></path><path d="M1016 55h0"></path><g class="terminal"><path d="M784 55h0"></path><path d="M870 55h0"></path><rect x="784" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="827" y="59">,</text></g><path d="M870 55h10"></path><path d="M880 55h10"></path><g class="terminal"><path d="M890 55h0"></path><path d="M1016 55h0"></path><rect x="890" y="44" width="126" height="22" rx="0" ry="0"></rect><text x="953" y="59">Name</text></g></g><path d="M1016 55h20"></path></g><path d="M1036 55h10"></path><path d="M764 55a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M764 90h272"></path></g><path d="M1036 90a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M1046 55h20"></path></g><path d="M1066 55h10"></path><g class="terminal"><path d="M1076 55h0"></path><path d="M1194 55h0"></path><rect x="1076" y="44" width="118" height="22" rx="0" ry="0"></rect><text x="1135" y="59">)</text></g></g><path d="M1194 55h20"></path><path d="M40 55a10 10 0 0 1 10 10v74a10 10 0 0 0 10 10"></path><g><path d="M60 149h182"></path><path d="M1012 149h182"></path><g><path d="M242 149h0"></path><path d="M352 149h0"></path><path d="M242 149a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M262 114h70"></path></g><path d="M332 114a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M242 149h20"></path><g class="terminal"><path d="M262 149h0"></path><path d="M332 149h0"></path><rect x="262" y="138" width="70" height="22" rx="0" ry="0"></rect><text x="297" y="153">SET</text></g><path d="M332 149h20"></path></g><path d="M352 149h10"></path><g class="non-terminal"><path d="M362 149h0"></path><path d="M488 149h0"></path><rect x="362" y="138" width="126" height="22" rx="8" ry="8"></rect><text x="425" y="153">type_columns</text></g><path d="M488 149h10"></path><g><path d="M498 149h0"></path><path d="M640 149h0"></path><path d="M498 149a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M518 114h102"></path></g><path d="M620 114a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M498 149h20"></path><g class="terminal"><path d="M518 149h0"></path><path d="M620 149h0"></path><rect x="518" y="138" width="102" height="22" rx="0" ry="0"></rect><text x="569" y="153">COLUMNS</text></g><path d="M620 149h20"></path></g><path d="M640 149h10"></path><g class="terminal"><path d="M650 149h0"></path><path d="M760 149h0"></path><rect x="650" y="138" width="110" height="22" rx="0" ry="0"></rect><text x="705" y="153">(</text></g><path d="M760 149h10"></path><path d="M770 149h10"></path><g class="non-terminal"><path d="M780 149h0"></path><path d="M874 149h0"></path><rect x="780" y="138" width="94" height="22" rx="8" ry="8"></rect><text x="827" y="153">var_name</text></g><path d="M874 149h10"></path><path d="M884 149h10"></path><g class="terminal"><path d="M894 149h0"></path><path d="M1012 149h0"></path><rect x="894" y="138" width="118" height="22" rx="0" ry="0"></rect><text x="953" y="153">)</text></g></g><path d="M1194 149a10 10 0 0 0 10 -10v-74a10 10 0 0 1 10 -10"></path></g><path d="M 1214 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>In case of the COLUMNS list with ($variable) syntax, referenced variable must be of type of Array of Names.</p>
<p>'Type of columns' in this context depend on the DS type.</p>
<div class="hor-scroll"><table>
	<thead><tr><th>DS Type</th><th>Type of Attributes</th><th>Record Object Level</th></tr></thead>
	<tbody>
	<tr><td>PlainText</td><td>VALUE</td><td>There are no Attributes</td></tr>
	<tr><td>Columnar</td><td>VALUE</td><td>Column names of the record object</td></tr>
	<tr><td>Structured</td><td>VALUE</td><td>Property names of the record object</td></tr>
	<tr><td>Point</td><td>POINT or POI or VALUE</td><td>Attributes of Point object</td></tr>
	<tr><td rowspan="3">Track</td><td>TRACK or SEGMENTEDTRACK or VALUE</td><td>Attributes of Track (level 1 object)</td></tr>
	<tr><td>SEGMENT or TRACKSEGMENT</td><td>Attributes of Segments (level 2 objects)</td></tr>
	<tr><td>POINT or POI</td><td>Attributes of Points (level 3 objects)</td></tr>
	<tr><td>Polygon</td><td>POLYGON or VALUE</td><td>Attributes of Polygon object</td></tr>
	</tbody>
</table></div>
<p>Key item is a Record-level expression, referring to existing DS attributes:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="320" height="62" viewBox="0 0 320 62"><g transform="translate(.5 .5)"><path d="M 20 21 v 20 m 0 -10 h 20.5"></path><g><path d="M40 31h0"></path><path d="M280 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><path d="M260 31h0"></path><g class="terminal"><path d="M60 31h0"></path><path d="M130 31h0"></path><rect x="60" y="20" width="70" height="22" rx="0" ry="0"></rect><text x="95" y="35">KEY</text></g><path d="M130 31h10"></path><path d="M140 31h10"></path><g class="non-terminal"><path d="M150 31h0"></path><path d="M260 31h0"></path><rect x="150" y="20" width="110" height="22" rx="8" ry="8"></rect><text x="205" y="35">attr_expr</text></g></g><path d="M260 31h20"></path></g><path d="M 280 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>If KEY expression is specified, each DS Record will be assigned with newly calculated Key.</p>
<p>Key evaluation incidence depends on the Transform. Most evaluate keys before the record is transformed, but there are some that do it after (for example, if source Record is PlainText no Attributes are available before transformation). See Transforms documentation to find out.</p>
<p>If there is a PARTITION clause, Records will then be redistributed between new partitions according to their new Keys (according to number of PARTITION expression evaluated to Integer). Be aware that raw result of KEY expression is used to set Record Key, so if it evaluates to a constant, all records will go into one partition. If there is no PARTITION, only Keys will be changed, but no redistribution is performed.</p>
<p>To keep existing number of partitions, just omit PARTITION expression, leaving only a keyword.</p>
<p>If statement includes PARTITION clause without KEY, DS will be repartitioned to a desired number of partitions after transforming, but using HASHCODE partitioning over existing Keys.</p>

<h2 id="DataManipulation">Data Manipulation Statements <a class="toc" href="#TOC">↑</a></h2>

<h3 id="SELECT">SELECT Statement <a class="toc" href="#TOC">↑</a></h3>
<p>Perform an SQL-like query to one or more existing DSs and create a new, resulting DS. Its name, specified in INTO clause, must be new and unique.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1878" height="180" viewBox="0 0 1878 180"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M1838 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M1818 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M154 55h0"></path><rect x="60" y="44" width="94" height="22" rx="0" ry="0"></rect><text x="107" y="59">SELECT</text></g><path d="M154 55h10"></path><g><path d="M164 55h0"></path><path d="M314 55h0"></path><path d="M164 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M184 20h110"></path></g><path d="M294 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M164 55h20"></path><g class="terminal"><path d="M184 55h0"></path><path d="M294 55h0"></path><rect x="184" y="44" width="110" height="22" rx="0" ry="0"></rect><text x="239" y="59">DISTINCT</text></g><path d="M294 55h20"></path></g><g><path d="M314 55h0"></path><path d="M774 55h0"></path><path d="M314 55h20"></path><g><path d="M334 55h171"></path><path d="M583 55h171"></path><g class="terminal"><path d="M505 55h0"></path><path d="M583 55h0"></path><rect x="505" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="544" y="59">*</text></g></g><path d="M754 55h20"></path><path d="M314 55a10 10 0 0 1 10 10v50a10 10 0 0 0 10 10"></path><g><path d="M334 125h0"></path><path d="M754 125h0"></path><g class="non-terminal"><path d="M334 125h0"></path><path d="M436 125h0"></path><rect x="334" y="114" width="102" height="22" rx="8" ry="8"></rect><text x="385" y="129">what_expr</text></g><path d="M436 125h10"></path><g><path d="M446 125h0"></path><path d="M754 125h0"></path><path d="M446 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M466 90h268"></path></g><path d="M734 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M446 125h20"></path><g><path d="M466 125h0"></path><path d="M734 125h0"></path><path d="M466 125h10"></path><g><path d="M476 125h0"></path><path d="M724 125h0"></path><path d="M476 125h20"></path><g><path d="M496 125h0"></path><path d="M704 125h0"></path><g class="terminal"><path d="M496 125h0"></path><path d="M582 125h0"></path><rect x="496" y="114" width="86" height="22" rx="0" ry="0"></rect><text x="539" y="129">,</text></g><path d="M582 125h10"></path><path d="M592 125h10"></path><g class="non-terminal"><path d="M602 125h0"></path><path d="M704 125h0"></path><rect x="602" y="114" width="102" height="22" rx="8" ry="8"></rect><text x="653" y="129">what_expr</text></g></g><path d="M704 125h20"></path></g><path d="M724 125h10"></path><path d="M476 125a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M476 160h248"></path></g><path d="M724 160a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M734 125h20"></path></g></g><path d="M754 125a10 10 0 0 0 10 -10v-50a10 10 0 0 1 10 -10"></path></g><g><path d="M774 55h0"></path><path d="M1226 55h0"></path><path d="M774 55h20"></path><g><path d="M794 55h0"></path><path d="M1206 55h0"></path><g class="terminal"><path d="M794 55h0"></path><path d="M872 55h0"></path><rect x="794" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="833" y="59">INTO</text></g><path d="M872 55h10"></path><path d="M882 55h10"></path><g class="non-terminal"><path d="M892 55h0"></path><path d="M978 55h0"></path><rect x="892" y="44" width="86" height="22" rx="8" ry="8"></rect><text x="935" y="59">ds_name</text></g><path d="M978 55h10"></path><path d="M988 55h10"></path><g class="terminal"><path d="M998 55h0"></path><path d="M1076 55h0"></path><rect x="998" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="1037" y="59">FROM</text></g><path d="M1076 55h10"></path><path d="M1086 55h10"></path><g class="non-terminal"><path d="M1096 55h0"></path><path d="M1206 55h0"></path><rect x="1096" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="1151" y="59">from_scope</text></g></g><path d="M1206 55h20"></path><path d="M774 55a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M794 101h0"></path><path d="M1206 101h0"></path><g class="terminal"><path d="M794 101h0"></path><path d="M872 101h0"></path><rect x="794" y="90" width="78" height="22" rx="0" ry="0"></rect><text x="833" y="105">FROM</text></g><path d="M872 101h10"></path><path d="M882 101h10"></path><g class="non-terminal"><path d="M892 101h0"></path><path d="M1002 101h0"></path><rect x="892" y="90" width="110" height="22" rx="8" ry="8"></rect><text x="947" y="105">from_scope</text></g><path d="M1002 101h10"></path><path d="M1012 101h10"></path><g class="terminal"><path d="M1022 101h0"></path><path d="M1100 101h0"></path><rect x="1022" y="90" width="78" height="22" rx="0" ry="0"></rect><text x="1061" y="105">INTO</text></g><path d="M1100 101h10"></path><path d="M1110 101h10"></path><g class="non-terminal"><path d="M1120 101h0"></path><path d="M1206 101h0"></path><rect x="1120" y="90" width="86" height="22" rx="8" ry="8"></rect><text x="1163" y="105">ds_name</text></g></g><path d="M1206 101a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path></g><g><path d="M1226 55h0"></path><path d="M1522 55h0"></path><path d="M1226 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M1246 20h256"></path></g><path d="M1502 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M1226 55h20"></path><g><path d="M1246 55h0"></path><path d="M1502 55h0"></path><path d="M1246 55h20"></path><g><path d="M1266 55h0"></path><path d="M1482 55h0"></path><g class="terminal"><path d="M1266 55h0"></path><path d="M1352 55h0"></path><rect x="1266" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="1309" y="59">WHERE</text></g><path d="M1352 55h10"></path><path d="M1362 55h10"></path><g class="non-terminal"><path d="M1372 55h0"></path><path d="M1482 55h0"></path><rect x="1372" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="1427" y="59">where_expr</text></g></g><path d="M1482 55h20"></path></g><path d="M1502 55h20"></path></g><g><path d="M1522 55h0"></path><path d="M1818 55h0"></path><path d="M1522 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M1542 20h256"></path></g><path d="M1798 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M1522 55h20"></path><g><path d="M1542 55h0"></path><path d="M1798 55h0"></path><path d="M1542 55h20"></path><g><path d="M1562 55h0"></path><path d="M1778 55h0"></path><g class="terminal"><path d="M1562 55h0"></path><path d="M1648 55h0"></path><rect x="1562" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="1605" y="59">LIMIT</text></g><path d="M1648 55h10"></path><path d="M1658 55h10"></path><g class="non-terminal"><path d="M1668 55h0"></path><path d="M1778 55h0"></path><rect x="1668" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="1723" y="59">limit_expr</text></g></g><path d="M1778 55h20"></path></g><path d="M1798 55h20"></path></g></g><path d="M1818 55h20"></path></g><path d="M 1838 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Query part is a star (with meaning 'select all available attributes') or a list of 'what to select' expressions. Resulting DS attributes are named according to aliases (if specified) or stringified expression (expression text with all whitespace removed):</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="622" height="110" viewBox="0 0 622 110"><g transform="translate(.5 .5)"><path d="M 20 69 v 20 m 0 -10 h 20.5"></path><g><path d="M40 79h0"></path><path d="M582 79h0"></path><path d="M40 79h20"></path><g><path d="M60 79h0"></path><path d="M562 79h0"></path><g class="non-terminal"><path d="M60 79h0"></path><path d="M170 79h0"></path><rect x="60" y="68" width="110" height="22" rx="8" ry="8"></rect><text x="115" y="83">expression</text></g><path d="M170 79h10"></path><g><path d="M180 79h0"></path><path d="M562 79h0"></path><path d="M180 79a10 10 0 0 0 10 -10v-39a10 10 0 0 1 10 -10"></path><g><path d="M200 20h342"></path></g><path d="M542 20a10 10 0 0 1 10 10v39a10 10 0 0 0 10 10"></path><path d="M180 79h20"></path><g><path d="M200 79h0"></path><path d="M542 79h0"></path><path d="M200 79h20"></path><g><path d="M220 79h0"></path><path d="M522 79h0"></path><g class="terminal"><path d="M220 79h0"></path><path d="M282 79h0"></path><rect x="220" y="68" width="62" height="22" rx="0" ry="0"></rect><text x="251" y="83">AS</text></g><path d="M282 79h10"></path><g><path d="M292 79h0"></path><path d="M442 79h0"></path><path d="M292 79a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M312 44h110"></path></g><path d="M422 44a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M292 79h20"></path><g class="non-terminal"><path d="M312 79h0"></path><path d="M422 79h0"></path><rect x="312" y="68" width="110" height="22" rx="8" ry="8"></rect><text x="367" y="83">type_alias</text></g><path d="M422 79h20"></path></g><path d="M442 79h10"></path><g class="non-terminal"><path d="M452 79h0"></path><path d="M522 79h0"></path><rect x="452" y="68" width="70" height="22" rx="8" ry="8"></rect><text x="487" y="83">alias</text></g></g><path d="M522 79h20"></path></g><path d="M542 79h20"></path></g></g><path d="M562 79h20"></path></g><path d="M 582 79 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>If same alias is set for several expressions, rightmost will rewrite result of all preceding (there can't be many attributes with same name in DS object). Aliases are set per column type (same as in TRANSFORM).</p>
<p>SELECT expressions are bound to Record-level context for all DS participating in the SELECT.</p>
<p>For Structured SELECTs, compound property names must be used to access nested properties using dot notation ("top.inner.innermost"), and zero-based array indices or ranges to access array members. For example, "prop.inner[0]" for 1st menber of "prop.inner" array, or "[2].prop" for 3rd topmost array member's property "prop". Ranges may be specified only for innermost properties (no dots allowed afterward): "prop[*]" or "prop[]" for entire array "prop", "prop[1:]" from 2nd member onwards, "prop[:5]" up to 6th, "prop[2:4]" from 3rd to 5th. Range boundaries may be negative which means 'Nth member from array end'. If right range goes past array size, result will be NULL padded. If boundaries overlap or both go beyond beginning, empty array will be returned.</p>
<p>In case of straight JOINs, fully-qualified compound names for attributes from different DSs must be used in the same dot notation.</p>
<p>Source scope is specified in the FROM clause:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="592" height="248" viewBox="0 0 592 248"><g transform="translate(.5 .5)"><path d="M 20 21 v 20 m 0 -10 h 20.5"></path><g><path d="M40 31h0"></path><path d="M552 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h193"></path><path d="M339 31h193"></path><g class="non-terminal"><path d="M253 31h0"></path><path d="M339 31h0"></path><rect x="253" y="20" width="86" height="22" rx="8" ry="8"></rect><text x="296" y="35">ds_parts</text></g></g><path d="M532 31h20"></path><path d="M40 31a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M60 77h4"></path><path d="M528 77h4"></path><g class="non-terminal"><path d="M64 77h0"></path><path d="M150 77h0"></path><rect x="64" y="66" width="86" height="22" rx="8" ry="8"></rect><text x="107" y="81">join_op</text></g><path d="M150 77h10"></path><path d="M160 77h10"></path><g class="non-terminal"><path d="M170 77h0"></path><path d="M256 77h0"></path><rect x="170" y="66" width="86" height="22" rx="8" ry="8"></rect><text x="213" y="81">ds_parts</text></g><path d="M256 77h10"></path><path d="M266 77h10"></path><g><path d="M276 77h0"></path><path d="M528 77h0"></path><path d="M276 77h10"></path><g><path d="M286 77h0"></path><path d="M518 77h0"></path><path d="M286 77h20"></path><g><path d="M306 77h0"></path><path d="M498 77h0"></path><g class="terminal"><path d="M306 77h0"></path><path d="M392 77h0"></path><rect x="306" y="66" width="86" height="22" rx="0" ry="0"></rect><text x="349" y="81">,</text></g><path d="M392 77h10"></path><path d="M402 77h10"></path><g class="non-terminal"><path d="M412 77h0"></path><path d="M498 77h0"></path><rect x="412" y="66" width="86" height="22" rx="8" ry="8"></rect><text x="455" y="81">ds_parts</text></g></g><path d="M498 77h20"></path></g><path d="M518 77h10"></path><path d="M286 77a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M286 112h232"></path></g><path d="M518 112a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g></g><path d="M532 77a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v96a10 10 0 0 0 10 10"></path><g><path d="M60 147h0"></path><path d="M532 147h0"></path><g class="non-terminal"><path d="M60 147h0"></path><path d="M154 147h0"></path><rect x="60" y="136" width="94" height="22" rx="8" ry="8"></rect><text x="107" y="151">union_op</text></g><path d="M154 147h10"></path><path d="M164 147h10"></path><g class="non-terminal"><path d="M174 147h0"></path><path d="M260 147h0"></path><rect x="174" y="136" width="86" height="22" rx="8" ry="8"></rect><text x="217" y="151">ds_parts</text></g><path d="M260 147h10"></path><path d="M270 147h10"></path><g><path d="M280 147h0"></path><path d="M532 147h0"></path><path d="M280 147h10"></path><g><path d="M290 147h0"></path><path d="M522 147h0"></path><path d="M290 147h20"></path><g><path d="M310 147h0"></path><path d="M502 147h0"></path><g class="terminal"><path d="M310 147h0"></path><path d="M396 147h0"></path><rect x="310" y="136" width="86" height="22" rx="0" ry="0"></rect><text x="353" y="151">,</text></g><path d="M396 147h10"></path><path d="M406 147h10"></path><g class="non-terminal"><path d="M416 147h0"></path><path d="M502 147h0"></path><rect x="416" y="136" width="86" height="22" rx="8" ry="8"></rect><text x="459" y="151">ds_parts</text></g></g><path d="M502 147h20"></path></g><path d="M522 147h10"></path><path d="M290 147a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M290 182h232"></path></g><path d="M522 182a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g></g><path d="M532 147a10 10 0 0 0 10 -10v-96a10 10 0 0 1 10 -10"></path><path d="M40 31a10 10 0 0 1 10 10v166a10 10 0 0 0 10 10"></path><g><path d="M60 217h87"></path><path d="M445 217h87"></path><g class="non-terminal"><path d="M147 217h0"></path><path d="M241 217h0"></path><rect x="147" y="206" width="94" height="22" rx="8" ry="8"></rect><text x="194" y="221">union_op</text></g><path d="M241 217h10"></path><path d="M251 217h10"></path><g class="non-terminal"><path d="M261 217h0"></path><path d="M347 217h0"></path><rect x="261" y="206" width="86" height="22" rx="8" ry="8"></rect><text x="304" y="221">ds_parts</text></g><path d="M347 217h10"></path><path d="M357 217h10"></path><g class="terminal"><path d="M367 217h0"></path><path d="M445 217h0"></path><rect x="367" y="206" width="78" height="22" rx="0" ry="0"></rect><text x="406" y="221">*</text></g></g><path d="M532 217a10 10 0 0 0 10 -10v-166a10 10 0 0 1 10 -10"></path></g><path d="M 552 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Queries can be performed to a single or many (with UNION) DS of any type, or multiple JOINed KeyValue DSs.</p>
<p>Query to a single DS is equivalent of iteration over all its data and simple evaluation of what-to-select items, then applying constraints.</p>
<p>In the case of a single DS with * query and no other constraints, a 'fast shallow copy' of DS is performed (just a new name to same underlying data is assigned).</p>
<p>UNIONs could unite either all listed DSs, or if a star syntax is used, all DSs with names that have specified prefix. There are several types of UNION operation available:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="390" height="178" viewBox="0 0 390 178"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M350 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M330 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M146 55h0"></path><rect x="60" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="103" y="59">UNION</text></g><path d="M146 55h10"></path><g><path d="M156 55h0"></path><path d="M330 55h0"></path><path d="M156 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M176 20h134"></path></g><path d="M310 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M156 55h20"></path><g><path d="M176 55h0"></path><path d="M310 55h0"></path><path d="M176 55h20"></path><g><path d="M196 55h0"></path><path d="M290 55h0"></path><g class="terminal"><path d="M196 55h0"></path><path d="M290 55h0"></path><rect x="196" y="44" width="94" height="22" rx="0" ry="0"></rect><text x="243" y="59">CONCAT</text></g></g><path d="M290 55h20"></path><path d="M176 55a10 10 0 0 1 10 10v26a10 10 0 0 0 10 10"></path><g><path d="M196 101h12"></path><path d="M278 101h12"></path><g class="terminal"><path d="M208 101h0"></path><path d="M278 101h0"></path><rect x="208" y="90" width="70" height="22" rx="0" ry="0"></rect><text x="243" y="105">XOR</text></g></g><path d="M290 101a10 10 0 0 0 10 -10v-26a10 10 0 0 1 10 -10"></path><path d="M176 55a10 10 0 0 1 10 10v72a10 10 0 0 0 10 10"></path><g><path d="M196 147h12"></path><path d="M278 147h12"></path><g class="terminal"><path d="M208 147h0"></path><path d="M278 147h0"></path><rect x="208" y="136" width="70" height="22" rx="0" ry="0"></rect><text x="243" y="151">AND</text></g></g><path d="M290 147a10 10 0 0 0 10 -10v-72a10 10 0 0 1 10 -10"></path></g><path d="M310 55h20"></path></g></g><path d="M330 55h20"></path></g><path d="M 350 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<div class="hor-scroll"><table>
	<thead><tr><th>UNION Operation</th><th>Result</th></tr></thead>
	<tbody>
		<tr><td>By default, CONCAT or CAT</td><td>Records of all DSs are queried, in order of occurrence</td></tr>
		<tr><td>XOR</td><td>Only records that are unique to their source DSs are queried, other are discarded</td></tr>
		<tr><td>AND</td><td>Only records that are occurred in all participating DSs are queries, other are discarded</td></tr>
	</tbody>
</table></div>
<p>UNION can be applied to DSs of same type only. Also, for UNION to be successful, all top-level objects of participating DSs must have top-level attributes of same names.</p>
<p>JOINs can be used to form new objects from participating DSs Objects that have same Record keys. There are following JOIN operations available:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="502" height="272" viewBox="0 0 502 272"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M462 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M442 55h0"></path><g><path d="M60 55h0"></path><path d="M354 55h0"></path><path d="M60 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M80 20h254"></path></g><path d="M334 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M60 55h20"></path><g><path d="M80 55h0"></path><path d="M334 55h0"></path><path d="M80 55h20"></path><g><path d="M100 55h64"></path><path d="M250 55h64"></path><g class="terminal"><path d="M164 55h0"></path><path d="M250 55h0"></path><rect x="164" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="207" y="59">INNER</text></g></g><path d="M314 55h20"></path><path d="M80 55a10 10 0 0 1 10 10v50a10 10 0 0 0 10 10"></path><g><path d="M100 125h4"></path><path d="M310 125h4"></path><g class="terminal"><path d="M104 125h0"></path><path d="M182 125h0"></path><rect x="104" y="114" width="78" height="22" rx="0" ry="0"></rect><text x="143" y="129">LEFT</text></g><path d="M182 125h10"></path><g><path d="M192 125h0"></path><path d="M310 125h0"></path><path d="M192 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M212 90h78"></path></g><path d="M290 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M192 125h20"></path><g class="terminal"><path d="M212 125h0"></path><path d="M290 125h0"></path><rect x="212" y="114" width="78" height="22" rx="0" ry="0"></rect><text x="251" y="129">ANTI</text></g><path d="M290 125h20"></path></g></g><path d="M314 125a10 10 0 0 0 10 -10v-50a10 10 0 0 1 10 -10"></path><path d="M80 55a10 10 0 0 1 10 10v120a10 10 0 0 0 10 10"></path><g><path d="M100 195h0"></path><path d="M314 195h0"></path><g class="terminal"><path d="M100 195h0"></path><path d="M186 195h0"></path><rect x="100" y="184" width="86" height="22" rx="0" ry="0"></rect><text x="143" y="199">RIGHT</text></g><path d="M186 195h10"></path><g><path d="M196 195h0"></path><path d="M314 195h0"></path><path d="M196 195a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M216 160h78"></path></g><path d="M294 160a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M196 195h20"></path><g class="terminal"><path d="M216 195h0"></path><path d="M294 195h0"></path><rect x="216" y="184" width="78" height="22" rx="0" ry="0"></rect><text x="255" y="199">ANTI</text></g><path d="M294 195h20"></path></g></g><path d="M314 195a10 10 0 0 0 10 -10v-120a10 10 0 0 1 10 -10"></path><path d="M80 55a10 10 0 0 1 10 10v166a10 10 0 0 0 10 10"></path><g><path d="M100 241h64"></path><path d="M250 241h64"></path><g class="terminal"><path d="M164 241h0"></path><path d="M250 241h0"></path><rect x="164" y="230" width="86" height="22" rx="0" ry="0"></rect><text x="207" y="245">OUTER</text></g></g><path d="M314 241a10 10 0 0 0 10 -10v-166a10 10 0 0 1 10 -10"></path></g><path d="M334 55h20"></path></g><path d="M354 55h10"></path><g class="terminal"><path d="M364 55h0"></path><path d="M442 55h0"></path><rect x="364" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="403" y="59">JOIN</text></g></g><path d="M442 55h20"></path></g><path d="M 462 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Resulting record objects of straight JOINs have internal data from the first meaningful Object occurred in the DS iteration order, while Attributes are read from all JOINed sets, using compound name with dot notation (1st part is set name, then attribute name). For subtracting JOINs, however, only one set is the source of resulting objects, thus only that object Attributes are available, using simple name.</p>
<div class="hor-scroll"><table>
	<thead><tr><th>JOIN Operation</th><th>Type</th><th>Result Evaluation Rules</th><th>Result Type</th></tr></thead>
	<tbody>
	<tr><td>By default, INNER</td><td>Straight</td><td>Records that have matching keys in all participating DSs are queried, other discarded. Records always have all Attributes from all participating sets</td><td>1st set</td></tr>
		<tr><td>LEFT</td><td>Straight</td><td>DSs are iterated from left to right. Result records always have columns form 1st DS, and from subsequent DSs records with same keys. If there is no record with matching key, NULLs will be used for its attributes</td><td>1st set</td></tr>
		<tr><td>LEFT ANTI</td><td>Subtracting</td><td>DSs are iterated from left to right. Records from 1st DS that have no matching keys in all subsequent DSs will be queried, other discarded</td><td>1st set</td></tr>
		<tr><td>RIGHT</td><td>Straight</td><td>DSs are iterated from right to left. Result records always have columns form last DS, and from preceding DSs records with same keys. If there is no record with matching key, NULLs will be used for its attributes</td><td>Last set</td></tr>
		<tr><td>RIGHT ANTI</td><td>Subtracting</td><td>DSs are iterated from right to left. Records from last DS that have no matching keys in all subsequent DSs will be queried, other discarded</td><td>Last set</td></tr>
		<tr><td>OUTER</td><td>Straight</td><td>DSs are iterated from left to right. Result records always have columns form all DSs records with same keys. If there is no record with matching key, NULLs will be used for its attributes</td><td>1st set</td></tr>
	</tbody>
</table></div>
<p>Note that any referenced DS in the FROM clause may have it own PARTITION specifier, if needed. In case of star-syntax all prefixed DSs must have referenced parts.</p>
<p>There are 3 types constraints available to narrow down the query results: WHERE, DISTINCT, and LIMIT clauses.</p>
<p>WHERE constraint is a single Boolean expression (applicable only to one level of object selected by type alias, if there are many), evaluated before 'what-to-select' expressions and all other constraints for each record. If result is TRUE, record is queried, otherwise discarded.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="390" height="86" viewBox="0 0 390 86"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M350 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M330 55h0"></path><g><path d="M60 55h0"></path><path d="M210 55h0"></path><path d="M60 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M80 20h110"></path></g><path d="M190 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M60 55h20"></path><g class="non-terminal"><path d="M80 55h0"></path><path d="M190 55h0"></path><rect x="80" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="135" y="59">type_alias</text></g><path d="M190 55h20"></path></g><path d="M210 55h10"></path><g class="non-terminal"><path d="M220 55h0"></path><path d="M330 55h0"></path><rect x="220" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="275" y="59">expression</text></g></g><path d="M330 55h20"></path></g><path d="M 350 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>DISTINCT, if specified, is applied after resulting query is evaluated. Of all records that have been evaluated to exactly same key and object, there will be only one left, and any repeats discarded.</p>
<p>LIMIT is applied at the very last, and comes in two flavors, by count and by percentage. Count can be specified in any valid Numeric format, and the resulting DS will have at most the specified number of records, randomly selected. If set by percentage, it must fall into a range from 0 (exclusive) to 100 (inclusive), and result will have randomly trimmed down to set percentage of records. If invalid percentage is specified, that will lead to an error.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="374" height="86" viewBox="0 0 374 86"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M334 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M314 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M162 55h0"></path><rect x="60" y="44" width="102" height="22" rx="0" ry="0"></rect><text x="111" y="59">Numeric</text></g><path d="M162 55h10"></path><g><path d="M172 55h0"></path><path d="M314 55h0"></path><path d="M172 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M192 20h102"></path></g><path d="M294 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M172 55h20"></path><g class="terminal"><path d="M192 55h0"></path><path d="M294 55h0"></path><rect x="192" y="44" width="102" height="22" rx="0" ry="0"></rect><text x="243" y="59">%</text></g><path d="M294 55h20"></path></g></g><path d="M314 55h20"></path></g><path d="M 334 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>To summarize, the order of SELECT evaluation is as of follows:</p>
<ol>
	<li>Check of existence of INTO DS name</li>
	<li>Iteration, JOIN, or UNION over source scope of DSs</li>
	<li>WHERE constraint expression</li>
	<li>'What-to-select' expressions, from left to right</li>
	<li>DISTINCT constraint</li>
	<li>LIMIT constraint</li>
</ol>

<h3 id="CALL">CALL Statement <a class="toc" href="#TOC">↑</a></h3>
<p>Serves to call pluggable Operations, akin to SQL stored procedures (but with a substantial semantic difference), or TDL Procedures (see further below).</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="469.5" height="100" viewBox="0 0 469.5 100" id="call_stmt" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 21v20m0 -10h20"></path></g><g><path d="M40 31h0"></path><path d="M429.5 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><g><path d="M60 31h10"></path><path d="M399.5 31h10"></path><g class="terminal "><path d="M70 31h0"></path><path d="M141 31h0"></path><rect x="70" y="20" width="71" height="22"></rect><text x="105.5" y="35">CALL</text></g><path d="M141 31h10"></path><path d="M151 31h10"></path><g class="non-terminal "><path d="M161 31h0"></path><path d="M257.5 31h0"></path><rect x="161" y="20" width="96.5" height="22" rx="10" ry="10"></rect><text x="209.25" y="35">func_expr</text></g><path d="M257.5 31h10"></path><path d="M267.5 31h10"></path><g class="non-terminal "><path d="M277.5 31h0"></path><path d="M399.5 31h0"></path><rect x="277.5" y="20" width="122" height="22" rx="10" ry="10"></rect><text x="338.5" y="35">operation_io</text></g></g><path d="M409.5 31h0"></path></g><path d="M409.5 31h20"></path><path d="M40 31a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M60 69h71"></path><g><path d="M131 69h10"></path><path d="M328.5 69h10"></path><g class="terminal "><path d="M141 69h0"></path><path d="M212 69h0"></path><rect x="141" y="58" width="71" height="22"></rect><text x="176.5" y="73">CALL</text></g><path d="M212 69h10"></path><path d="M222 69h10"></path><g class="non-terminal "><path d="M232 69h0"></path><path d="M328.5 69h0"></path><rect x="232" y="58" width="96.5" height="22" rx="10" ry="10"></rect><text x="280.25" y="73">func_expr</text></g></g><path d="M338.5 69h71"></path></g><path d="M409.5 69a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path></g><path d="M 429.5 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Functional expression includes name of an Operation or Procedure and its parameters. Full list of available Operations depends on distribution, thus them and their parameters are documented separately. TDL Procedures are ephemeral and exist only in the current execution context.</p>
<p>Operations always create new DSs from existing and require INPUT FROM and OUTPUT INTO DS references (in either order).</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="555" height="176" viewBox="0 0 555 176" id="operation_io" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 21v20m0 -10h20"></path></g><g><path d="M40 31h0"></path><path d="M515 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><g><path d="M60 31h10"></path><path d="M485 31h10"></path><g><path d="M70 31h0"></path><path d="M277.5 31h0"></path><path d="M70 31h20"></path><g><path d="M90 31h0"></path><g><path d="M90 31h10"></path><path d="M247.5 31h10"></path><g class="non-terminal "><path d="M100 31h0"></path><path d="M247.5 31h0"></path><rect x="100" y="20" width="147.5" height="22" rx="10" ry="10"></rect><text x="173.75" y="35">from_positional</text></g></g><path d="M257.5 31h0"></path></g><path d="M257.5 31h20"></path><path d="M70 31a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M90 69h21.25"></path><g><path d="M111.25 69h10"></path><path d="M226.25 69h10"></path><g class="non-terminal "><path d="M121.25 69h0"></path><path d="M226.25 69h0"></path><rect x="121.25" y="58" width="105" height="22" rx="10" ry="10"></rect><text x="173.75" y="73">from_named</text></g></g><path d="M236.25 69h21.25"></path></g><path d="M257.5 69a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path></g><g><path d="M277.5 31h0"></path><path d="M485 31h0"></path><path d="M277.5 31h20"></path><g><path d="M297.5 31h0"></path><g><path d="M297.5 31h10"></path><path d="M455 31h10"></path><g class="non-terminal "><path d="M307.5 31h0"></path><path d="M455 31h0"></path><rect x="307.5" y="20" width="147.5" height="22" rx="10" ry="10"></rect><text x="381.25" y="35">into_positional</text></g></g><path d="M465 31h0"></path></g><path d="M465 31h20"></path><path d="M277.5 31a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M297.5 69h21.25"></path><g><path d="M318.75 69h10"></path><path d="M433.75 69h10"></path><g class="non-terminal "><path d="M328.75 69h0"></path><path d="M433.75 69h0"></path><rect x="328.75" y="58" width="105" height="22" rx="10" ry="10"></rect><text x="381.25" y="73">into_named</text></g></g><path d="M443.75 69h21.25"></path></g><path d="M465 69a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path></g></g><path d="M495 31h0"></path></g><path d="M495 31h20"></path><path d="M40 31a10 10 0 0 1 10 10v56a10 10 0 0 0 10 10"></path><g><path d="M60 107h0"></path><g><path d="M60 107h10"></path><path d="M485 107h10"></path><g><path d="M70 107h0"></path><path d="M277.5 107h0"></path><path d="M70 107h20"></path><g><path d="M90 107h0"></path><g><path d="M90 107h10"></path><path d="M247.5 107h10"></path><g class="non-terminal "><path d="M100 107h0"></path><path d="M247.5 107h0"></path><rect x="100" y="96" width="147.5" height="22" rx="10" ry="10"></rect><text x="173.75" y="111">into_positional</text></g></g><path d="M257.5 107h0"></path></g><path d="M257.5 107h20"></path><path d="M70 107a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M90 145h21.25"></path><g><path d="M111.25 145h10"></path><path d="M226.25 145h10"></path><g class="non-terminal "><path d="M121.25 145h0"></path><path d="M226.25 145h0"></path><rect x="121.25" y="134" width="105" height="22" rx="10" ry="10"></rect><text x="173.75" y="149">into_named</text></g></g><path d="M236.25 145h21.25"></path></g><path d="M257.5 145a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path></g><g><path d="M277.5 107h0"></path><path d="M485 107h0"></path><path d="M277.5 107h20"></path><g><path d="M297.5 107h0"></path><g><path d="M297.5 107h10"></path><path d="M455 107h10"></path><g class="non-terminal "><path d="M307.5 107h0"></path><path d="M455 107h0"></path><rect x="307.5" y="96" width="147.5" height="22" rx="10" ry="10"></rect><text x="381.25" y="111">from_positional</text></g></g><path d="M465 107h0"></path></g><path d="M465 107h20"></path><path d="M277.5 107a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M297.5 145h21.25"></path><g><path d="M318.75 145h10"></path><path d="M433.75 145h10"></path><g class="non-terminal "><path d="M328.75 145h0"></path><path d="M433.75 145h0"></path><rect x="328.75" y="134" width="105" height="22" rx="10" ry="10"></rect><text x="381.25" y="149">from_named</text></g></g><path d="M443.75 145h21.25"></path></g><path d="M465 145a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path></g></g><path d="M495 107h0"></path></g><path d="M495 107a10 10 0 0 0 10 -10v-56a10 10 0 0 1 10 -10"></path></g><path d="M 515 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Like SELECT, there is source scope of DSs, set by INPUT clause. There are two flavors of source scope, depending on Operation.</p>
<p>Positional INPUT is either a list of DS names, or a prefix, followed by a star. In case of a list, Operation tries to use matching inputs in the specified order. In case of star syntax, order doesn't matter. Some Operations may require an exact number of positional inputs, while some will use all positional inputs to create an equal number of positional outputs. Please refer to Operation documentation for its requirements.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="732" height="180" viewBox="0 0 732 180"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M692 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h87"></path><path d="M585 55h87"></path><g class="terminal"><path d="M147 55h0"></path><path d="M233 55h0"></path><rect x="147" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="190" y="59">INPUT</text></g><path d="M233 55h10"></path><g><path d="M243 55h0"></path><path d="M361 55h0"></path><path d="M243 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M263 20h78"></path></g><path d="M341 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M243 55h20"></path><g class="terminal"><path d="M263 55h0"></path><path d="M341 55h0"></path><rect x="263" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="302" y="59">FROM</text></g><path d="M341 55h20"></path></g><path d="M361 55h10"></path><g class="non-terminal"><path d="M371 55h0"></path><path d="M457 55h0"></path><rect x="371" y="44" width="86" height="22" rx="8" ry="8"></rect><text x="414" y="59">ds_parts</text></g><path d="M457 55h10"></path><g><path d="M467 55h0"></path><path d="M585 55h0"></path><path d="M467 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M487 20h78"></path></g><path d="M565 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M467 55h20"></path><g class="terminal"><path d="M487 55h0"></path><path d="M565 55h0"></path><rect x="487" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="526" y="59">*</text></g><path d="M565 55h20"></path></g></g><path d="M672 55h20"></path><path d="M40 55a10 10 0 0 1 10 10v50a10 10 0 0 0 10 10"></path><g><path d="M60 125h0"></path><path d="M672 125h0"></path><g class="terminal"><path d="M60 125h0"></path><path d="M146 125h0"></path><rect x="60" y="114" width="86" height="22" rx="0" ry="0"></rect><text x="103" y="129">INPUT</text></g><path d="M146 125h10"></path><g><path d="M156 125h0"></path><path d="M274 125h0"></path><path d="M156 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M176 90h78"></path></g><path d="M254 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M156 125h20"></path><g class="terminal"><path d="M176 125h0"></path><path d="M254 125h0"></path><rect x="176" y="114" width="78" height="22" rx="0" ry="0"></rect><text x="215" y="129">FROM</text></g><path d="M254 125h20"></path></g><path d="M274 125h10"></path><g class="non-terminal"><path d="M284 125h0"></path><path d="M370 125h0"></path><rect x="284" y="114" width="86" height="22" rx="8" ry="8"></rect><text x="327" y="129">ds_parts</text></g><path d="M370 125h10"></path><g><path d="M380 125h0"></path><path d="M672 125h0"></path><path d="M380 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M400 90h252"></path></g><path d="M652 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M380 125h20"></path><g><path d="M400 125h0"></path><path d="M652 125h0"></path><path d="M400 125h10"></path><g><path d="M410 125h0"></path><path d="M642 125h0"></path><path d="M410 125h20"></path><g><path d="M430 125h0"></path><path d="M622 125h0"></path><g class="terminal"><path d="M430 125h0"></path><path d="M516 125h0"></path><rect x="430" y="114" width="86" height="22" rx="0" ry="0"></rect><text x="473" y="129">,</text></g><path d="M516 125h10"></path><path d="M526 125h10"></path><g class="non-terminal"><path d="M536 125h0"></path><path d="M622 125h0"></path><rect x="536" y="114" width="86" height="22" rx="8" ry="8"></rect><text x="579" y="129">ds_parts</text></g></g><path d="M622 125h20"></path></g><path d="M642 125h10"></path><path d="M410 125a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M410 160h232"></path></g><path d="M642 160a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M652 125h20"></path></g></g><path d="M672 125a10 10 0 0 0 10 -10v-50a10 10 0 0 1 10 -10"></path></g><path d="M 692 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Named INPUTs have internal aliases, specific to Operations. In that case, each DS has an explicit role for the calling Operation. Some Operations may have listed some named inputs optional, and for the exact meaning of omitted input please see their respective docs.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1078" height="134" viewBox="0 0 1078 134"><g transform="translate(.5 .5)"><path d="M 20 69 v 20 m 0 -10 h 20.5"></path><g><path d="M40 79h0"></path><path d="M1038 79h0"></path><path d="M40 79h20"></path><g><path d="M60 79h0"></path><path d="M1018 79h0"></path><g class="terminal"><path d="M60 79h0"></path><path d="M146 79h0"></path><rect x="60" y="68" width="86" height="22" rx="0" ry="0"></rect><text x="103" y="83">INPUT</text></g><path d="M146 79h10"></path><path d="M156 79h10"></path><g class="non-terminal"><path d="M166 79h0"></path><path d="M260 79h0"></path><rect x="166" y="68" width="94" height="22" rx="8" ry="8"></rect><text x="213" y="83">ds_alias</text></g><path d="M260 79h10"></path><g><path d="M270 79h0"></path><path d="M388 79h0"></path><path d="M270 79a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M290 44h78"></path></g><path d="M368 44a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M270 79h20"></path><g class="terminal"><path d="M290 79h0"></path><path d="M368 79h0"></path><rect x="290" y="68" width="78" height="22" rx="0" ry="0"></rect><text x="329" y="83">FROM</text></g><path d="M368 79h20"></path></g><path d="M388 79h10"></path><g class="non-terminal"><path d="M398 79h0"></path><path d="M484 79h0"></path><rect x="398" y="68" width="86" height="22" rx="8" ry="8"></rect><text x="441" y="83">ds_parts</text></g><path d="M484 79h10"></path><g><path d="M494 79h0"></path><path d="M1018 79h0"></path><path d="M494 79a10 10 0 0 0 10 -10v-39a10 10 0 0 1 10 -10"></path><g><path d="M514 20h484"></path></g><path d="M998 20a10 10 0 0 1 10 10v39a10 10 0 0 0 10 10"></path><path d="M494 79h20"></path><g><path d="M514 79h0"></path><path d="M998 79h0"></path><path d="M514 79h10"></path><g><path d="M524 79h0"></path><path d="M988 79h0"></path><path d="M524 79h20"></path><g><path d="M544 79h0"></path><path d="M968 79h0"></path><g class="terminal"><path d="M544 79h0"></path><path d="M630 79h0"></path><rect x="544" y="68" width="86" height="22" rx="0" ry="0"></rect><text x="587" y="83">,</text></g><path d="M630 79h10"></path><path d="M640 79h10"></path><g class="non-terminal"><path d="M650 79h0"></path><path d="M744 79h0"></path><rect x="650" y="68" width="94" height="22" rx="8" ry="8"></rect><text x="697" y="83">ds_alias</text></g><path d="M744 79h10"></path><g><path d="M754 79h0"></path><path d="M872 79h0"></path><path d="M754 79a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M774 44h78"></path></g><path d="M852 44a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M754 79h20"></path><g class="terminal"><path d="M774 79h0"></path><path d="M852 79h0"></path><rect x="774" y="68" width="78" height="22" rx="0" ry="0"></rect><text x="813" y="83">FROM</text></g><path d="M852 79h20"></path></g><path d="M872 79h10"></path><g class="non-terminal"><path d="M882 79h0"></path><path d="M968 79h0"></path><rect x="882" y="68" width="86" height="22" rx="8" ry="8"></rect><text x="925" y="83">ds_parts</text></g></g><path d="M968 79h20"></path></g><path d="M988 79h10"></path><path d="M524 79a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M524 114h464"></path></g><path d="M988 114a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M998 79h20"></path></g></g><path d="M1018 79h20"></path></g><path d="M 1038 79 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Note that any referenced DS in the INOUT clause may have it own PARTITION specifier, if needed. In case of star-syntax all prefixed DSs must have referenced parts.</p>
<p>Quite unlike SELECT, an Operation may produce a number of resulting DSs. There are 3 distinct varieties of them. <b>Filtered</b> outputs have records internally unchanged from input, but selected according to some set of rules. <b>Augmented</b> outputs extend of otherwise change internal structure of records coming from inputs. Finally, there may be outputs consisting of records, <b>generated</b> from input anew. Please refer to Operation docs for each case.</p>
<p>Positional OUTPUT has meaning similar to positional INPUT. Specified star name is used for setting resulting DSs prefix (with suffixes coming from INPUT names), or a literal list of names is used, if they are comma-separated.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="740" height="180" viewBox="0 0 740 180"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M700 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h87"></path><path d="M593 55h87"></path><g class="terminal"><path d="M147 55h0"></path><path d="M241 55h0"></path><rect x="147" y="44" width="94" height="22" rx="0" ry="0"></rect><text x="194" y="59">OUTPUT</text></g><path d="M241 55h10"></path><g><path d="M251 55h0"></path><path d="M369 55h0"></path><path d="M251 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M271 20h78"></path></g><path d="M349 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M251 55h20"></path><g class="terminal"><path d="M271 55h0"></path><path d="M349 55h0"></path><rect x="271" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="310" y="59">INTO</text></g><path d="M349 55h20"></path></g><path d="M369 55h10"></path><g class="non-terminal"><path d="M379 55h0"></path><path d="M465 55h0"></path><rect x="379" y="44" width="86" height="22" rx="8" ry="8"></rect><text x="422" y="59">ds_name</text></g><path d="M465 55h10"></path><g><path d="M475 55h0"></path><path d="M593 55h0"></path><path d="M475 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M495 20h78"></path></g><path d="M573 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M475 55h20"></path><g class="terminal"><path d="M495 55h0"></path><path d="M573 55h0"></path><rect x="495" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="534" y="59">*</text></g><path d="M573 55h20"></path></g></g><path d="M680 55h20"></path><path d="M40 55a10 10 0 0 1 10 10v50a10 10 0 0 0 10 10"></path><g><path d="M60 125h0"></path><path d="M680 125h0"></path><g class="terminal"><path d="M60 125h0"></path><path d="M154 125h0"></path><rect x="60" y="114" width="94" height="22" rx="0" ry="0"></rect><text x="107" y="129">OUTPUT</text></g><path d="M154 125h10"></path><g><path d="M164 125h0"></path><path d="M282 125h0"></path><path d="M164 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M184 90h78"></path></g><path d="M262 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M164 125h20"></path><g class="terminal"><path d="M184 125h0"></path><path d="M262 125h0"></path><rect x="184" y="114" width="78" height="22" rx="0" ry="0"></rect><text x="223" y="129">INTO</text></g><path d="M262 125h20"></path></g><path d="M282 125h10"></path><g class="non-terminal"><path d="M292 125h0"></path><path d="M378 125h0"></path><rect x="292" y="114" width="86" height="22" rx="8" ry="8"></rect><text x="335" y="129">ds_name</text></g><path d="M378 125h10"></path><g><path d="M388 125h0"></path><path d="M680 125h0"></path><path d="M388 125a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M408 90h252"></path></g><path d="M660 90a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M388 125h20"></path><g><path d="M408 125h0"></path><path d="M660 125h0"></path><path d="M408 125h10"></path><g><path d="M418 125h0"></path><path d="M650 125h0"></path><path d="M418 125h20"></path><g><path d="M438 125h0"></path><path d="M630 125h0"></path><g class="terminal"><path d="M438 125h0"></path><path d="M524 125h0"></path><rect x="438" y="114" width="86" height="22" rx="0" ry="0"></rect><text x="481" y="129">,</text></g><path d="M524 125h10"></path><path d="M534 125h10"></path><g class="non-terminal"><path d="M544 125h0"></path><path d="M630 125h0"></path><rect x="544" y="114" width="86" height="22" rx="8" ry="8"></rect><text x="587" y="129">ds_name</text></g></g><path d="M630 125h20"></path></g><path d="M650 125h10"></path><path d="M418 125a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M418 160h232"></path></g><path d="M650 160a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M660 125h20"></path></g></g><path d="M680 125a10 10 0 0 0 10 -10v-50a10 10 0 0 1 10 -10"></path></g><path d="M 700 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Named OUTPUTs are explicitly different, and for each of Operation OUTPUT alias, resulting DS generally is of a specified structure. Some operations may have optional named OUTPUTs.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1086" height="134" viewBox="0 0 1086 134"><g transform="translate(.5 .5)"><path d="M 20 69 v 20 m 0 -10 h 20.5"></path><g><path d="M40 79h0"></path><path d="M1046 79h0"></path><path d="M40 79h20"></path><g><path d="M60 79h0"></path><path d="M1026 79h0"></path><g class="terminal"><path d="M60 79h0"></path><path d="M154 79h0"></path><rect x="60" y="68" width="94" height="22" rx="0" ry="0"></rect><text x="107" y="83">OUTPUT</text></g><path d="M154 79h10"></path><path d="M164 79h10"></path><g class="non-terminal"><path d="M174 79h0"></path><path d="M268 79h0"></path><rect x="174" y="68" width="94" height="22" rx="8" ry="8"></rect><text x="221" y="83">ds_alias</text></g><path d="M268 79h10"></path><g><path d="M278 79h0"></path><path d="M396 79h0"></path><path d="M278 79a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M298 44h78"></path></g><path d="M376 44a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M278 79h20"></path><g class="terminal"><path d="M298 79h0"></path><path d="M376 79h0"></path><rect x="298" y="68" width="78" height="22" rx="0" ry="0"></rect><text x="337" y="83">INTO</text></g><path d="M376 79h20"></path></g><path d="M396 79h10"></path><g class="non-terminal"><path d="M406 79h0"></path><path d="M492 79h0"></path><rect x="406" y="68" width="86" height="22" rx="8" ry="8"></rect><text x="449" y="83">ds_name</text></g><path d="M492 79h10"></path><g><path d="M502 79h0"></path><path d="M1026 79h0"></path><path d="M502 79a10 10 0 0 0 10 -10v-39a10 10 0 0 1 10 -10"></path><g><path d="M522 20h484"></path></g><path d="M1006 20a10 10 0 0 1 10 10v39a10 10 0 0 0 10 10"></path><path d="M502 79h20"></path><g><path d="M522 79h0"></path><path d="M1006 79h0"></path><path d="M522 79h10"></path><g><path d="M532 79h0"></path><path d="M996 79h0"></path><path d="M532 79h20"></path><g><path d="M552 79h0"></path><path d="M976 79h0"></path><g class="terminal"><path d="M552 79h0"></path><path d="M638 79h0"></path><rect x="552" y="68" width="86" height="22" rx="0" ry="0"></rect><text x="595" y="83">,</text></g><path d="M638 79h10"></path><path d="M648 79h10"></path><g class="non-terminal"><path d="M658 79h0"></path><path d="M752 79h0"></path><rect x="658" y="68" width="94" height="22" rx="8" ry="8"></rect><text x="705" y="83">ds_alias</text></g><path d="M752 79h10"></path><g><path d="M762 79h0"></path><path d="M880 79h0"></path><path d="M762 79a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M782 44h78"></path></g><path d="M860 44a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M762 79h20"></path><g class="terminal"><path d="M782 79h0"></path><path d="M860 79h0"></path><rect x="782" y="68" width="78" height="22" rx="0" ry="0"></rect><text x="821" y="83">INTO</text></g><path d="M860 79h20"></path></g><path d="M880 79h10"></path><g class="non-terminal"><path d="M890 79h0"></path><path d="M976 79h0"></path><rect x="890" y="68" width="86" height="22" rx="8" ry="8"></rect><text x="933" y="83">ds_name</text></g></g><path d="M976 79h20"></path></g><path d="M996 79h10"></path><path d="M532 79a10 10 0 0 0 -10 10v15a10 10 0 0 0 10 10"></path><g><path d="M532 114h464"></path></g><path d="M996 114a10 10 0 0 0 10 -10v-15a10 10 0 0 0 -10 -10"></path></g><path d="M1006 79h20"></path></g></g><path d="M1026 79h20"></path></g><path d="M 1046 79 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>An Operation may have positional INPUTs and named OUTPUTs, or vice versa.</p>

<h3 id="ANALYZE">ANALYZE Statement <a class="toc" href="#TOC">↑</a></h3>
<p>Performs calculation of basic statistics about the specified DS (or multiple DSs, found by prefix in the star syntax).</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="832.5" height="78" viewBox="0 0 832.5 78" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 37v20m0 -10h20"></path></g><g><path d="M40 47h0"></path><path d="M792.5 47h0"></path><path d="M40 47h20"></path><g><path d="M60 47h0"></path><g><path d="M60 47h10"></path><path d="M762.5 47h10"></path><g class="terminal "><path d="M70 47h0"></path><path d="M166.5 47h0"></path><rect x="70" y="36" width="96.5" height="22"></rect><text x="118.25" y="51">ANALYZE</text></g><path d="M166.5 47h10"></path><g><path d="M176.5 47h0"></path><path d="M270.5 47h0"></path><path d="M176.5 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M196.5 20h54"></path></g><path d="M250.5 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M176.5 47h20"></path><g class="terminal "><path d="M196.5 47h0"></path><path d="M250.5 47h0"></path><rect x="196.5" y="36" width="54" height="22"></rect><text x="223.5" y="51">DS</text></g><path d="M250.5 47h20"></path></g><path d="M270.5 47h10"></path><g class="non-terminal "><path d="M280.5 47h0"></path><path d="M360 47h0"></path><rect x="280.5" y="36" width="79.5" height="22" rx="10" ry="10"></rect><text x="320.25" y="51">ds_name</text></g><path d="M360 47h10"></path><g><path d="M370 47h0"></path><path d="M481 47h0"></path><path d="M370 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M390 20h71"></path></g><path d="M461 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M370 47h20"></path><g class="terminal "><path d="M390 47h0"></path><path d="M461 47h0"></path><rect x="390" y="36" width="71" height="22"></rect><text x="425.5" y="51">*</text></g><path d="M461 47h20"></path></g><g><path d="M481 47h0"></path><path d="M609 47h0"></path><path d="M481 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M501 20h88"></path></g><path d="M589 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M481 47h20"></path><g class="non-terminal "><path d="M501 47h0"></path><path d="M589 47h0"></path><rect x="501" y="36" width="88" height="22" rx="10" ry="10"></rect><text x="545" y="51">key_item</text></g><path d="M589 47h20"></path></g><g><path d="M609 47h0"></path><path d="M762.5 47h0"></path><path d="M609 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M629 20h113.5"></path></g><path d="M742.5 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M609 47h20"></path><g class="terminal "><path d="M629 47h0"></path><path d="M742.5 47h0"></path><rect x="629" y="36" width="113.5" height="22"></rect><text x="685.75" y="51">PARTITION</text></g><path d="M742.5 47h20"></path></g></g><path d="M772.5 47h0"></path></g><path d="M772.5 47h20"></path></g><path d="M 792.5 47 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>This statement uses results of KEY expression evaluated for each DS Record as 'counting values' for DS statistics, like in TRANSFORM statement. If KEY clause is omitted, Record's own Key is used automatically.</p>
<p>After the counting value is decided, all records in the DS are iterated over to calculate the following indicators:</p>
<div class="hor-scroll"><table>
	<thead><tr><th>Statistical indicator</th><th>Meaning</th></tr></thead>
	<tbody>
		<tr><td>_name</td><td>DS name</td></tr>
		<tr><td>_type</td><td>DS Record type</td></tr>
		<tr><td>_parts</td><td>Number of DS partitions</td></tr>
		<tr><td>_counter</td><td>KEY expression</td></tr>
		<tr><td>_total</td><td>Count of records in the DS, like COUNT * in SQL</td></tr>
		<tr><td>_unique</td><td>Number of unique counting values</td></tr>
		<tr><td>_average</td><td>Average number of records per each of unique counting value</td></tr>
		<tr><td>_median</td><td>Median number of records per each of unique counting value</td></tr>
	</tbody>
</table></div>
<p>They are appended to a special Columnar DS named "_metrics" as a new record. Its records keys are always names of analyzed DSs.</p>
<p>Because each DS may be altered multiple times in their life cycle, and because ANALYZE may be called another time for same DS (i.e. with different KEY expression), each successive invocation of ANALYZE for same DS adds a new record to "_metrics" DS instead of replacing it, keeping history of all ANALYZE calls.</p>
<h4 id="PARTITION">Per-partition <a class="toc" href="#TOC">↑</a></h4>
<p>If PARTITION clause is specified, an additional round of statistics calculation is performed for each partition of the analyzed DS. In that case, an additional special Columnar DS is created for each analyzed DS, named "_metrics_&lt;DS name&gt;". There are as many records in that DS as many partitions it has, and their fields contain the following indicators:</p>
<div class="hor-scroll"><table>
	<thead><tr><th>Statistical indicator</th><th>Meaning</th></tr></thead>
	<tbody>
	<tr><td>_part</td><td>Partition number, starting with 0</td></tr>
	<tr><td>_counter</td><td>KEY expression</td></tr>
	<tr><td>_total</td><td>Count of records in the partition</td></tr>
	<tr><td>_unique</td><td>Number of unique counting values per partition</td></tr>
	<tr><td>_average</td><td>Average number of records per each of unique counting value per partition</td></tr>
	<tr><td>_median</td><td>Median number of records per each of unique counting value per partition</td></tr>
	</tbody>
</table></div>
<p>Its records keys are always partition numbers of analyzed DSs. If some partition is emtpy, its indicators are amounted to zero.</p>
<p>Each subsequent ANALYZE PARTITION replaces per-partition statistics DS "_metrics_&lt;DS name&gt;", and if multiple results are required (e.g. with different KEY expressions), make sure to copy it under different names.</p>

<h2 id="Compound">Compound Control Flow Statements <a class="toc" href="#TOC">↑</a></h2>
<p>Compond statements have nested statements (including other compound statements) inside their clauses that execute under various conditions in a separate execution context.</p>

<h3 id="LET">LET Statement <a class="toc" href="#TOC">↑</a></h3>
<p>Defines (or undefines) a new script Variable in the current execution context.</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="501" height="100" viewBox="0 0 501 100" id="let_stmt" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 21v20m0 -10h20"></path></g><g><path d="M40 31h0"></path><path d="M461 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h4.25"></path><g><path d="M64.25 31h10"></path><path d="M426.75 31h10"></path><g class="terminal "><path d="M74.25 31h0"></path><path d="M136.75 31h0"></path><rect x="74.25" y="20" width="62.5" height="22"></rect><text x="105.5" y="35">LET</text></g><path d="M136.75 31h10"></path><path d="M146.75 31h10"></path><g class="non-terminal "><path d="M156.75 31h0"></path><path d="M244.75 31h0"></path><rect x="156.75" y="20" width="88" height="22" rx="10" ry="10"></rect><text x="200.75" y="35">var_name</text></g><path d="M244.75 31h10"></path><path d="M254.75 31h10"></path><g class="terminal "><path d="M264.75 31h0"></path><path d="M318.75 31h0"></path><rect x="264.75" y="20" width="54" height="22"></rect><text x="291.75" y="35">=</text></g><path d="M318.75 31h10"></path><path d="M328.75 31h10"></path><g class="non-terminal "><path d="M338.75 31h0"></path><path d="M426.75 31h0"></path><rect x="338.75" y="20" width="88" height="22" rx="10" ry="10"></rect><text x="382.75" y="35">expression</text></g></g><path d="M436.75 31h4.25"></path></g><path d="M441 31h20"></path><path d="M40 31a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M60 69h0"></path><g><path d="M60 69h10"></path><path d="M431 69h10"></path><g class="terminal "><path d="M70 69h0"></path><path d="M132.5 69h0"></path><rect x="70" y="58" width="62.5" height="22"></rect><text x="101.25" y="73">LET</text></g><path d="M132.5 69h10"></path><path d="M142.5 69h10"></path><g class="non-terminal "><path d="M152.5 69h0"></path><path d="M240.5 69h0"></path><rect x="152.5" y="58" width="88" height="22" rx="10" ry="10"></rect><text x="196.5" y="73">var_name</text></g><path d="M240.5 69h10"></path><path d="M250.5 69h10"></path><g class="terminal "><path d="M260.5 69h0"></path><path d="M314.5 69h0"></path><rect x="260.5" y="58" width="54" height="22"></rect><text x="287.5" y="73">=</text></g><path d="M314.5 69h10"></path><path d="M324.5 69h10"></path><g class="non-terminal "><path d="M334.5 69h0"></path><path d="M431 69h0"></path><rect x="334.5" y="58" width="96.5" height="22" rx="10" ry="10"></rect><text x="382.75" y="73">sub_query</text></g></g><path d="M441 69h0"></path></g><path d="M441 69a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path></g><path d="M 461 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Simple expression of a Variable is same as of a Parameter expression (that means Name Array definitions are allowed). If expression result is NULL, Variable is removed from the context.</p>
<p>Arrays of values derived from DS Records may be returned as results from the limited SELECT query:</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="1292" height="86" viewBox="0 0 1292 86"><g transform="translate(.5 .5)"><path d="M 20 45 v 20 m 0 -10 h 20.5"></path><g><path d="M40 55h0"></path><path d="M1252 55h0"></path><path d="M40 55h20"></path><g><path d="M60 55h0"></path><path d="M1232 55h0"></path><g class="terminal"><path d="M60 55h0"></path><path d="M154 55h0"></path><rect x="60" y="44" width="94" height="22" rx="0" ry="0"></rect><text x="107" y="59">SELECT</text></g><path d="M154 55h10"></path><g><path d="M164 55h0"></path><path d="M314 55h0"></path><path d="M164 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M184 20h110"></path></g><path d="M294 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M164 55h20"></path><g class="terminal"><path d="M184 55h0"></path><path d="M294 55h0"></path><rect x="184" y="44" width="110" height="22" rx="0" ry="0"></rect><text x="239" y="59">DISTINCT</text></g><path d="M294 55h20"></path></g><path d="M314 55h10"></path><g class="non-terminal"><path d="M324 55h0"></path><path d="M426 55h0"></path><rect x="324" y="44" width="102" height="22" rx="8" ry="8"></rect><text x="375" y="59">what_expr</text></g><path d="M426 55h10"></path><path d="M436 55h10"></path><g class="terminal"><path d="M446 55h0"></path><path d="M524 55h0"></path><rect x="446" y="44" width="78" height="22" rx="0" ry="0"></rect><text x="485" y="59">FROM</text></g><path d="M524 55h10"></path><path d="M534 55h10"></path><g class="non-terminal"><path d="M544 55h0"></path><path d="M630 55h0"></path><rect x="544" y="44" width="86" height="22" rx="8" ry="8"></rect><text x="587" y="59">ds_parts</text></g><path d="M630 55h10"></path><g><path d="M640 55h0"></path><path d="M936 55h0"></path><path d="M640 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M660 20h256"></path></g><path d="M916 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M640 55h20"></path><g><path d="M660 55h0"></path><path d="M916 55h0"></path><path d="M660 55h20"></path><g><path d="M680 55h0"></path><path d="M896 55h0"></path><g class="terminal"><path d="M680 55h0"></path><path d="M766 55h0"></path><rect x="680" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="723" y="59">WHERE</text></g><path d="M766 55h10"></path><path d="M776 55h10"></path><g class="non-terminal"><path d="M786 55h0"></path><path d="M896 55h0"></path><rect x="786" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="841" y="59">where_expr</text></g></g><path d="M896 55h20"></path></g><path d="M916 55h20"></path></g><g><path d="M936 55h0"></path><path d="M1232 55h0"></path><path d="M936 55a10 10 0 0 0 10 -10v-15a10 10 0 0 1 10 -10"></path><g><path d="M956 20h256"></path></g><path d="M1212 20a10 10 0 0 1 10 10v15a10 10 0 0 0 10 10"></path><path d="M936 55h20"></path><g><path d="M956 55h0"></path><path d="M1212 55h0"></path><path d="M956 55h20"></path><g><path d="M976 55h0"></path><path d="M1192 55h0"></path><g class="terminal"><path d="M976 55h0"></path><path d="M1062 55h0"></path><rect x="976" y="44" width="86" height="22" rx="0" ry="0"></rect><text x="1019" y="59">LIMIT</text></g><path d="M1062 55h10"></path><path d="M1072 55h10"></path><g class="non-terminal"><path d="M1082 55h0"></path><path d="M1192 55h0"></path><rect x="1082" y="44" width="110" height="22" rx="8" ry="8"></rect><text x="1137" y="59">limit_expr</text></g></g><path d="M1192 55h20"></path></g><path d="M1212 55h20"></path></g></g><path d="M1232 55h20"></path></g><path d="M 1252 55 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>There are a few differences from a regular SELECT query. First, only one DS must be queried (no JOINs nor UNIONs are allowed). Second, only one expression in the what-to-select list is allowed. Query constraints do work as expected, and PARTITION specifier is supported as well.</p>

<h3 id="IF">IF Statement <a class="toc" href="#TOC">↑</a></h3>
<p>Performs control flow branching. Evaluates a Boolean expression, and executes statements nested in THEN clause for TRUE. Otherwise, executes statements in ELSE clause, if it is present, or just does nothing.</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="1000.5" height="78" viewBox="0 0 1000.5 78" id="if_stmt" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 37v20m0 -10h20"></path></g><g><path d="M40 47h0"></path><path d="M960.5 47h0"></path><path d="M40 47h20"></path><g><path d="M60 47h0"></path><g><path d="M60 47h10"></path><path d="M930.5 47h10"></path><g class="terminal "><path d="M70 47h0"></path><path d="M124 47h0"></path><rect x="70" y="36" width="54" height="22"></rect><text x="97" y="51">IF</text></g><path d="M124 47h10"></path><path d="M134 47h10"></path><g class="non-terminal "><path d="M144 47h0"></path><path d="M232 47h0"></path><rect x="144" y="36" width="88" height="22" rx="10" ry="10"></rect><text x="188" y="51">expression</text></g><path d="M232 47h10"></path><path d="M242 47h10"></path><g class="terminal "><path d="M252 47h0"></path><path d="M323 47h0"></path><rect x="252" y="36" width="71" height="22"></rect><text x="287.5" y="51">THEN</text></g><path d="M323 47h10"></path><path d="M333 47h10"></path><g class="non-terminal "><path d="M343 47h0"></path><path d="M448 47h0"></path><rect x="343" y="36" width="105" height="22" rx="10" ry="10"></rect><text x="395.5" y="51">statements</text></g><path d="M448 47h10"></path><g><path d="M458 47h0"></path><path d="M754 47h0"></path><path d="M458 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M478 20h256"></path></g><path d="M734 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M458 47h20"></path><g><path d="M478 47h0"></path><path d="M734 47h0"></path><path d="M478 47h20"></path><g><path d="M498 47h0"></path><g><path d="M498 47h10"></path><path d="M704 47h10"></path><g class="terminal "><path d="M508 47h0"></path><path d="M579 47h0"></path><rect x="508" y="36" width="71" height="22"></rect><text x="543.5" y="51">ELSE</text></g><path d="M579 47h10"></path><path d="M589 47h10"></path><g class="non-terminal "><path d="M599 47h0"></path><path d="M704 47h0"></path><rect x="599" y="36" width="105" height="22" rx="10" ry="10"></rect><text x="651.5" y="51">statements</text></g></g><path d="M714 47h0"></path></g><path d="M714 47h20"></path></g><path d="M734 47h20"></path></g><path d="M754 47h10"></path><g class="terminal "><path d="M764 47h0"></path><path d="M826.5 47h0"></path><rect x="764" y="36" width="62.5" height="22"></rect><text x="795.25" y="51">END</text></g><path d="M826.5 47h10"></path><g><path d="M836.5 47h0"></path><path d="M930.5 47h0"></path><path d="M836.5 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M856.5 20h54"></path></g><path d="M910.5 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M836.5 47h20"></path><g class="terminal "><path d="M856.5 47h0"></path><path d="M910.5 47h0"></path><rect x="856.5" y="36" width="54" height="22"></rect><text x="883.5" y="51">IF</text></g><path d="M910.5 47h20"></path></g></g><path d="M940.5 47h0"></path></g><path d="M940.5 47h20"></path></g><path d="M 960.5 47 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Nested statements in either branches can be any number of TDL4 statements (even none).</p>

<h3 id="LOOP">LOOP Statement <a class="toc" href="#TOC">↑</a></h3>
<p>Executes statements nested in BEGIN clause as many times as number values in the array, each time setting loop Variable to next value. If expression evaluates to NULL or array is empty, and ELSE clause is present, its nested statements will be executed once instead.</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="1245" height="78" viewBox="0 0 1245 78" id="loop_stmt" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 37v20m0 -10h20"></path></g><g><path d="M40 47h0"></path><path d="M1205 47h0"></path><path d="M40 47h20"></path><g><path d="M60 47h0"></path><g><path d="M60 47h10"></path><path d="M1175 47h10"></path><g class="terminal "><path d="M70 47h0"></path><path d="M141 47h0"></path><rect x="70" y="36" width="71" height="22"></rect><text x="105.5" y="51">LOOP</text></g><path d="M141 47h10"></path><path d="M151 47h10"></path><g class="non-terminal "><path d="M161 47h0"></path><path d="M249 47h0"></path><rect x="161" y="36" width="88" height="22" rx="10" ry="10"></rect><text x="205" y="51">var_name</text></g><path d="M249 47h10"></path><g><path d="M259 47h0"></path><path d="M353 47h0"></path><path d="M259 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M279 20h54"></path></g><path d="M333 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M259 47h20"></path><g class="terminal "><path d="M279 47h0"></path><path d="M333 47h0"></path><rect x="279" y="36" width="54" height="22"></rect><text x="306" y="51">IN</text></g><path d="M333 47h20"></path></g><path d="M353 47h10"></path><g class="non-terminal "><path d="M363 47h0"></path><path d="M451 47h0"></path><rect x="363" y="36" width="88" height="22" rx="10" ry="10"></rect><text x="407" y="51">expression</text></g><path d="M451 47h10"></path><path d="M461 47h10"></path><g class="terminal "><path d="M471 47h0"></path><path d="M550.5 47h0"></path><rect x="471" y="36" width="79.5" height="22"></rect><text x="510.75" y="51">BEGIN</text></g><path d="M550.5 47h10"></path><path d="M560.5 47h10"></path><g class="non-terminal "><path d="M570.5 47h0"></path><path d="M675.5 47h0"></path><rect x="570.5" y="36" width="105" height="22" rx="10" ry="10"></rect><text x="623" y="51">statements</text></g><path d="M675.5 47h10"></path><g><path d="M685.5 47h0"></path><path d="M981.5 47h0"></path><path d="M685.5 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M705.5 20h256"></path></g><path d="M961.5 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M685.5 47h20"></path><g><path d="M705.5 47h0"></path><path d="M961.5 47h0"></path><path d="M705.5 47h20"></path><g><path d="M725.5 47h0"></path><g><path d="M725.5 47h10"></path><path d="M931.5 47h10"></path><g class="terminal "><path d="M735.5 47h0"></path><path d="M806.5 47h0"></path><rect x="735.5" y="36" width="71" height="22"></rect><text x="771" y="51">ELSE</text></g><path d="M806.5 47h10"></path><path d="M816.5 47h10"></path><g class="non-terminal "><path d="M826.5 47h0"></path><path d="M931.5 47h0"></path><rect x="826.5" y="36" width="105" height="22" rx="10" ry="10"></rect><text x="879" y="51">statements</text></g></g><path d="M941.5 47h0"></path></g><path d="M941.5 47h20"></path></g><path d="M961.5 47h20"></path></g><path d="M981.5 47h10"></path><g class="terminal "><path d="M991.5 47h0"></path><path d="M1054 47h0"></path><rect x="991.5" y="36" width="62.5" height="22"></rect><text x="1022.75" y="51">END</text></g><path d="M1054 47h10"></path><g><path d="M1064 47h0"></path><path d="M1175 47h0"></path><path d="M1064 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M1084 20h71"></path></g><path d="M1155 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M1064 47h20"></path><g class="terminal "><path d="M1084 47h0"></path><path d="M1155 47h0"></path><rect x="1084" y="36" width="71" height="22"></rect><text x="1119.5" y="51">LOOP</text></g><path d="M1155 47h20"></path></g></g><path d="M1185 47h0"></path></g><path d="M1185 47h20"></path></g><path d="M 1205 47 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>If there was an existing Variable with same name as loop Variable in the outer context, it will be restored to its prevoius value, because LOOP creates a new nested context.</p>

<h3 id="CREATEPROC">CREATE PROCEDURE Statement <a class="toc" href="#TOC">↑</a></h3>
<p>Creates a sequence of statements in the current global execution context, that can be CALLed as a whole with its own context of Variables.</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="2158.5" height="110" viewBox="0 0 2158.5 110" id="create_proc" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 53v20m0 -10h20"></path></g><g><path d="M40 63h0"></path><path d="M2118.5 63h0"></path><path d="M40 63h20"></path><g><path d="M60 63h0"></path><g><path d="M60 63h10"></path><path d="M2088.5 63h10"></path><g><path d="M70 63h0"></path><path d="M538.5 63h0"></path><path d="M70 63a10 10 0 0 0 10 -10v-23a10 10 0 0 1 10 -10"></path><g><path d="M90 20h428.5"></path></g><path d="M518.5 20a10 10 0 0 1 10 10v23a10 10 0 0 0 10 10"></path><path d="M70 63h20"></path><g><path d="M90 63h0"></path><path d="M518.5 63h0"></path><path d="M90 63h20"></path><g><path d="M110 63h0"></path><g><path d="M110 63h10"></path><path d="M488.5 63h10"></path><g class="terminal "><path d="M120 63h0"></path><path d="M208 63h0"></path><rect x="120" y="52" width="88" height="22"></rect><text x="164" y="67">CREATE</text></g><path d="M208 63h10"></path><g><path d="M218 63h0"></path><path d="M488.5 63h0"></path><path d="M218 63a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M238 36h230.5"></path></g><path d="M468.5 36a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M218 63h20"></path><g><path d="M238 63h0"></path><path d="M468.5 63h0"></path><path d="M238 63h20"></path><g><path d="M258 63h0"></path><g><path d="M258 63h10"></path><path d="M438.5 63h10"></path><g class="terminal "><path d="M268 63h0"></path><path d="M322 63h0"></path><rect x="268" y="52" width="54" height="22"></rect><text x="295" y="67">OR</text></g><path d="M322 63h10"></path><path d="M332 63h10"></path><g class="terminal "><path d="M342 63h0"></path><path d="M438.5 63h0"></path><rect x="342" y="52" width="96.5" height="22"></rect><text x="390.25" y="67">REPLACE</text></g></g><path d="M448.5 63h0"></path></g><path d="M448.5 63h20"></path></g><path d="M468.5 63h20"></path></g></g><path d="M498.5 63h0"></path></g><path d="M498.5 63h20"></path></g><path d="M518.5 63h20"></path></g><path d="M538.5 63h10"></path><g class="terminal "><path d="M548.5 63h0"></path><path d="M662 63h0"></path><rect x="548.5" y="52" width="113.5" height="22"></rect><text x="605.25" y="67">PROCEDURE</text></g><path d="M662 63h10"></path><path d="M672 63h10"></path><g class="non-terminal "><path d="M682 63h0"></path><path d="M736 63h0"></path><rect x="682" y="52" width="54" height="22" rx="10" ry="10"></rect><text x="709" y="67">func</text></g><path d="M736 63h10"></path><g><path d="M746 63h0"></path><path d="M1534 63h0"></path><path d="M746 63a10 10 0 0 0 10 -10v-23a10 10 0 0 1 10 -10"></path><g><path d="M766 20h748"></path></g><path d="M1514 20a10 10 0 0 1 10 10v23a10 10 0 0 0 10 10"></path><path d="M746 63h20"></path><g><path d="M766 63h0"></path><path d="M1514 63h0"></path><path d="M766 63h20"></path><g><path d="M786 63h0"></path><g><path d="M786 63h10"></path><path d="M1484 63h10"></path><g class="terminal "><path d="M796 63h0"></path><path d="M901 63h0"></path><rect x="796" y="52" width="105" height="22"></rect><text x="848.5" y="67">(</text></g><path d="M901 63h10"></path><path d="M911 63h10"></path><g class="non-terminal "><path d="M921 63h0"></path><path d="M1026 63h0"></path><rect x="921" y="52" width="105" height="22" rx="10" ry="10"></rect><text x="973.5" y="67">proc_param</text></g><path d="M1026 63h10"></path><g><path d="M1036 63h0"></path><path d="M1360.5 63h0"></path><path d="M1036 63a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M1056 36h284.5"></path></g><path d="M1340.5 36a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M1036 63h20"></path><g><path d="M1056 63h0"></path><path d="M1340.5 63h0"></path><path d="M1056 63h10"></path><g><path d="M1066 63h0"></path><path d="M1330.5 63h0"></path><path d="M1066 63h20"></path><g><path d="M1086 63h0"></path><g><path d="M1086 63h10"></path><path d="M1300.5 63h10"></path><g class="terminal "><path d="M1096 63h0"></path><path d="M1175.5 63h0"></path><rect x="1096" y="52" width="79.5" height="22"></rect><text x="1135.75" y="67">,</text></g><path d="M1175.5 63h10"></path><path d="M1185.5 63h10"></path><g class="non-terminal "><path d="M1195.5 63h0"></path><path d="M1300.5 63h0"></path><rect x="1195.5" y="52" width="105" height="22" rx="10" ry="10"></rect><text x="1248" y="67">proc_param</text></g></g><path d="M1310.5 63h0"></path></g><path d="M1310.5 63h20"></path></g><path d="M1330.5 63h10"></path><path d="M1066 63a10 10 0 0 0 -10 10v7a10 10 0 0 0 10 10"></path><g><path d="M1066 90h264.5"></path></g><path d="M1330.5 90a10 10 0 0 0 10 -10v-7a10 10 0 0 0 -10 -10"></path></g><path d="M1340.5 63h20"></path></g><path d="M1360.5 63h10"></path><g class="terminal "><path d="M1370.5 63h0"></path><path d="M1484 63h0"></path><rect x="1370.5" y="52" width="113.5" height="22"></rect><text x="1427.25" y="67">)</text></g></g><path d="M1494 63h0"></path></g><path d="M1494 63h20"></path></g><path d="M1514 63h20"></path></g><g><path d="M1534 63h0"></path><path d="M1628 63h0"></path><path d="M1534 63a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M1554 36h54"></path></g><path d="M1608 36a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M1534 63h20"></path><g class="terminal "><path d="M1554 63h0"></path><path d="M1608 63h0"></path><rect x="1554" y="52" width="54" height="22"></rect><text x="1581" y="67">AS</text></g><path d="M1608 63h20"></path></g><path d="M1628 63h10"></path><g class="terminal "><path d="M1638 63h0"></path><path d="M1717.5 63h0"></path><rect x="1638" y="52" width="79.5" height="22"></rect><text x="1677.75" y="67">BEGIN</text></g><path d="M1717.5 63h10"></path><path d="M1727.5 63h10"></path><g class="non-terminal "><path d="M1737.5 63h0"></path><path d="M1842.5 63h0"></path><rect x="1737.5" y="52" width="105" height="22" rx="10" ry="10"></rect><text x="1790" y="67">statements</text></g><path d="M1842.5 63h10"></path><path d="M1852.5 63h10"></path><g class="terminal "><path d="M1862.5 63h0"></path><path d="M1925 63h0"></path><rect x="1862.5" y="52" width="62.5" height="22"></rect><text x="1893.75" y="67">END</text></g><path d="M1925 63h10"></path><g><path d="M1935 63h0"></path><path d="M2088.5 63h0"></path><path d="M1935 63a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M1955 36h113.5"></path></g><path d="M2068.5 36a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M1935 63h20"></path><g class="terminal "><path d="M1955 63h0"></path><path d="M2068.5 63h0"></path><rect x="1955" y="52" width="113.5" height="22"></rect><text x="2011.75" y="67">PROCEDURE</text></g><path d="M2068.5 63h20"></path></g></g><path d="M2098.5 63h0"></path></g><path d="M2098.5 63h20"></path></g><path d="M 2118.5 63 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Procedures exist in the same namespace as Operations, and they can't override existing Operations. But they can be replaced further down in the script code. For example, if your library script defines some Procedures, you may redefine some in your script by using OR REPLACE clause.</p>
<p>Each @-Parameter becomes a $-Variable inside BEGIN clause with the value assigned at the CALL context. Because Parameters become Variables, they are always named, never positional.</p>
<p>Parameters can be optional, in that case they should have default value set by an expression (evaluated in the current context, not in the CALL context). If defined without default value (just as a @Name), Parameters become mandatory and must always have a CALL value.</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="336" height="100" viewBox="0 0 336 100" id="proc_param" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 21v20m0 -10h20"></path></g><g><path d="M40 31h0"></path><path d="M296 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h66.75"></path><g><path d="M126.75 31h10"></path><path d="M199.25 31h10"></path><g class="non-terminal "><path d="M136.75 31h0"></path><path d="M199.25 31h0"></path><rect x="136.75" y="20" width="62.5" height="22" rx="10" ry="10"></rect><text x="168" y="35">param</text></g></g><path d="M209.25 31h66.75"></path></g><path d="M276 31h20"></path><path d="M40 31a10 10 0 0 1 10 10v18a10 10 0 0 0 10 10"></path><g><path d="M60 69h0"></path><g><path d="M60 69h10"></path><path d="M266 69h10"></path><g class="terminal "><path d="M70 69h0"></path><path d="M124 69h0"></path><rect x="70" y="58" width="54" height="22"></rect><text x="97" y="73">@</text></g><path d="M124 69h10"></path><path d="M134 69h10"></path><g class="terminal "><path d="M144 69h0"></path><path d="M266 69h0"></path><rect x="144" y="58" width="122" height="22"></rect><text x="205" y="73">Name</text></g></g><path d="M276 69h0"></path></g><path d="M276 69a10 10 0 0 0 10 -10v-18a10 10 0 0 1 10 -10"></path></g><path d="M 296 31 h 20 m 0 -10 v 20"></path></g></svg></div>

<h3 id="DROPPROC">DROP PROCEDURE Statement <a class="toc" href="#TOC">↑</a></h3>
<p>Use this statement to remove one or many PROCEDUREs from the current global execution context.</p>
<div class="hor-scroll"><svg class="railroad-diagram" width="702" height="94" viewBox="0 0 702 94" id="drop_proc" xmlns="http://www.w3.org/2000/svg"><g transform="translate(.5 .5)"><g><path d="M20 37v20m0 -10h20"></path></g><g><path d="M40 47h0"></path><path d="M662 47h0"></path><path d="M40 47h20"></path><g><path d="M60 47h0"></path><g><path d="M60 47h10"></path><path d="M632 47h10"></path><g class="terminal "><path d="M70 47h0"></path><path d="M141 47h0"></path><rect x="70" y="36" width="71" height="22"></rect><text x="105.5" y="51">DROP</text></g><path d="M141 47h10"></path><path d="M151 47h10"></path><g class="terminal "><path d="M161 47h0"></path><path d="M274.5 47h0"></path><rect x="161" y="36" width="113.5" height="22"></rect><text x="217.75" y="51">PROCEDURE</text></g><path d="M274.5 47h10"></path><path d="M284.5 47h10"></path><g class="non-terminal "><path d="M294.5 47h0"></path><path d="M348.5 47h0"></path><rect x="294.5" y="36" width="54" height="22" rx="10" ry="10"></rect><text x="321.5" y="51">func</text></g><path d="M348.5 47h10"></path><g><path d="M358.5 47h0"></path><path d="M632 47h0"></path><path d="M358.5 47a10 10 0 0 0 10 -10v-7a10 10 0 0 1 10 -10"></path><g><path d="M378.5 20h233.5"></path></g><path d="M612 20a10 10 0 0 1 10 10v7a10 10 0 0 0 10 10"></path><path d="M358.5 47h20"></path><g><path d="M378.5 47h0"></path><path d="M612 47h0"></path><path d="M378.5 47h10"></path><g><path d="M388.5 47h0"></path><path d="M602 47h0"></path><path d="M388.5 47h20"></path><g><path d="M408.5 47h0"></path><g><path d="M408.5 47h10"></path><path d="M572 47h10"></path><g class="terminal "><path d="M418.5 47h0"></path><path d="M498 47h0"></path><rect x="418.5" y="36" width="79.5" height="22"></rect><text x="458.25" y="51">,</text></g><path d="M498 47h10"></path><path d="M508 47h10"></path><g class="non-terminal "><path d="M518 47h0"></path><path d="M572 47h0"></path><rect x="518" y="36" width="54" height="22" rx="10" ry="10"></rect><text x="545" y="51">func</text></g></g><path d="M582 47h0"></path></g><path d="M582 47h20"></path></g><path d="M602 47h10"></path><path d="M388.5 47a10 10 0 0 0 -10 10v7a10 10 0 0 0 10 10"></path><g><path d="M388.5 74h213.5"></path></g><path d="M602 74a10 10 0 0 0 10 -10v-7a10 10 0 0 0 -10 -10"></path></g><path d="M612 47h20"></path></g></g><path d="M642 47h0"></path></g><path d="M642 47h20"></path></g><path d="M 662 47 h 20 m 0 -10 v 20"></path></g></svg></div>

<h2 id="Settings">Settings Statements <a class="toc" href="#TOC">↑</a></h2>

<h3 id="OPTIONS">OPTIONS Statement <a class="toc" href="#TOC">↑</a></h3>
<p>Sets internal Data Cooker parameters to specified values.</p>
<div class="hor-scroll"><svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="360" height="62" viewBox="0 0 360 62"><g transform="translate(.5 .5)"><path d="M 20 21 v 20 m 0 -10 h 20.5"></path><g><path d="M40 31h0"></path><path d="M320 31h0"></path><path d="M40 31h20"></path><g><path d="M60 31h0"></path><path d="M300 31h0"></path><g class="terminal"><path d="M60 31h0"></path><path d="M162 31h0"></path><rect x="60" y="20" width="102" height="22" rx="0" ry="0"></rect><text x="111" y="35">OPTIONS</text></g><path d="M162 31h10"></path><path d="M172 31h10"></path><g class="non-terminal"><path d="M182 31h0"></path><path d="M300 31h0"></path><rect x="182" y="20" width="118" height="22" rx="8" ry="8"></rect><text x="241" y="35">params_expr</text></g></g><path d="M300 31h20"></path></g><path d="M 320 31 h 20 m 0 -10 v 20"></path></g></svg></div>
<p>Unlike all other statements, Data Cooker pulls all OPTIONS to topmost execution context and executes them once, before evaluating all other script contents. They are completely ignored thereafter, in the normal script execution flow.</p>
<p>Parameters, that may be set by OPTIONS, is dependent on Data Cooker distribution and version, so please see a dedicated doc in the distribution for exact definitions.</p>

</body></html>